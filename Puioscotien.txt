
local b64decode = function(data)
    local b='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
    data = string.gsub(data, '[^'..b..'=]', '')
    return (data:gsub('.', function(x)
        if (x == '=') then return '' end
        local r,f='',(b:find(x)-1)
        for i=6,1,-1 do r=r..(f%2^i-f%2^(i-1)>0 and '1' or '0') end
        return r
    end):gsub('%d%d%d?%d?%d?%d?%d?%d?', function(x)
        if (#x ~= 8) then return '' end
        local c=0
        for i=1,8 do c=c+(x:sub(i,i)=='1' and 2^(8-i) or 0) end
        return string.char(c)
    end))
end

loadstring(b64decode("c2hhcmVkLkxvYWRlclRpdGxlID0gIsSQxINuZyBLw70gS8OqbmggUHUgSW9zIER68J+XvyI7CnNoYXJlZC5Mb2FkZXJLZXlGcmFtZXMgPSB7CiAgICBbMV0gPSB7CiAgICAgICAgMSwKICAgICAgICAxMAogICAgfSwKICAgIFsyXSA9IHsKICAgICAgICAyLAogICAgICAgIDMwCiAgICB9LAogICAgWzNdID0gewogICAgICAgIDMsCiAgICAgICAgNjAKICAgIH0sCiAgICBbNF0gPSB7CiAgICAgICAgMiwKICAgICAgICAxMDAKICAgIH0KfTsKbG9jYWwgdjIgPSB7CiAgICBMb2FkZXJEYXRhID0gewogICAgICAgIE5hbWUgPSBzaGFyZWQuTG9hZGVyVGl0bGUgb3IgIkEgTG9hZGVyIiwKICAgICAgICBDb2xvcnMgPSBzaGFyZWQuTG9hZGVyQ29sb3JzIG9yIHsKICAgICAgICAgICAgTWFpbiA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApLAogICAgICAgICAgICBUb3BpYyA9IENvbG9yMy5mcm9tUkdCKDIwMCwgMjAwLCAyMDApLAogICAgICAgICAgICBUaXRsZSA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpLAogICAgICAgICAgICBMb2FkZXJCYWNrZ3JvdW5kID0gQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA0MCksCiAgICAgICAgICAgIExvYWRlclNwbGFzaCA9IENvbG9yMy5mcm9tUkdCKDMsIDI1MiwgMykKICAgICAgICB9CiAgICB9LAogICAgS2V5ZnJhbWVzID0gc2hhcmVkLkxvYWRlcktleUZyYW1lcyBvciB7CiAgICAgICAgWzFdID0gewogICAgICAgICAgICAxLAogICAgICAgICAgICAxMAogICAgICAgIH0sCiAgICAgICAgWzJdID0gewogICAgICAgICAgICAyLAogICAgICAgICAgICAzMAogICAgICAgIH0sCiAgICAgICAgWzNdID0gewogICAgICAgICAgICAzLAogICAgICAgICAgICA2MAogICAgICAgIH0sCiAgICAgICAgWzRdID0gewogICAgICAgICAgICAyLAogICAgICAgICAgICAxMDAKICAgICAgICB9CiAgICB9Cn07CmxvY2FsIHYzID0gewogICAgWzFdID0gIiIsCiAgICBbMl0gPSAiIiwKICAgIFszXSA9ICIiLAogICAgWzRdID0gIiIKfTsKZnVuY3Rpb24gVHdlZW5PYmplY3QodjE3OCwgdjE3OSwgdjE4MCkKICAgIGdhbWUuVHdlZW5TZXJ2aWNlOkNyZWF0ZSh2MTc4LCBUd2VlbkluZm8ubmV3KHYxNzksIEVudW0uRWFzaW5nU3R5bGUuTGluZWFyLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5Jbk91dCksIHYxODApOlBsYXkoKTsKZW5kCmZ1bmN0aW9uIENyZWF0ZU9iamVjdCh2MTgxLCB2MTgyKQogICAgbG9jYWwgdjE4MyA9IEluc3RhbmNlLm5ldyh2MTgxKTsKICAgIGxvY2FsIHYxODQ7CiAgICBmb3IgdjQxNiwgdjQxNyBpbiBwYWlycyh2MTgyKSBkbwogICAgICAgIGlmICh2NDE2IH49ICJQYXJlbnQiKSB0aGVuCiAgICAgICAgICAgIHYxODNbdjQxNl0gPSB2NDE3OwogICAgICAgIGVsc2UKICAgICAgICAgICAgdjE4NCA9IHY0MTc7CiAgICAgICAgZW5kCiAgICBlbmQKICAgIHYxODMuUGFyZW50ID0gdjE4NDsKICAgIHJldHVybiB2MTgzOwplbmQKbG9jYWwgZnVuY3Rpb24gdjQodjE4NiwgdjE4NykKICAgIGxvY2FsIHYxODggPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIik7CiAgICB2MTg4LkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIHYxODYpOwogICAgdjE4OC5QYXJlbnQgPSB2MTg3OwplbmQKbG9jYWwgdjUgPSBDcmVhdGVPYmplY3QoIlNjcmVlbkd1aSIsIHsKICAgIE5hbWUgPSAiQ29yZSIsCiAgICBQYXJlbnQgPSBnYW1lLkNvcmVHdWkKfSk7CmxvY2FsIHY2ID0gQ3JlYXRlT2JqZWN0KCJGcmFtZSIsIHsKICAgIE5hbWUgPSAiTWFpbiIsCiAgICBQYXJlbnQgPSB2NSwKICAgIEJhY2tncm91bmRDb2xvcjMgPSB2Mi5Mb2FkZXJEYXRhLkNvbG9ycy5NYWluLAogICAgQm9yZGVyU2l6ZVBpeGVsID0gMCwKICAgIENsaXBzRGVzY2VuZGFudHMgPSB0cnVlLAogICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAwLCAwLjUsIDApLAogICAgQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSksCiAgICBTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIDApCn0pOwp2NCgxMiwgdjYpOwpsb2NhbCB2NyA9IENyZWF0ZU9iamVjdCgiSW1hZ2VMYWJlbCIsIHsKICAgIE5hbWUgPSAiVXNlckltYWdlIiwKICAgIFBhcmVudCA9IHY2LAogICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICBJbWFnZSA9ICJyYnhhc3NldGlkOi8vOTAzNzY3NzI0MDY4MTciLAogICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTUsIDAsIDEwKSwKICAgIFNpemUgPSBVRGltMi5uZXcoMCwgNTAsIDAsIDUwKQp9KTsKdjQoMjUsIHY3KTsKbG9jYWwgdjggPSBDcmVhdGVPYmplY3QoIlRleHRMYWJlbCIsIHsKICAgIE5hbWUgPSAiVXNlck5hbWUiLAogICAgUGFyZW50ID0gdjYsCiAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgIFRleHQgPSAiWW91dHViZTogUHUgSW9zIER68J+XvyIsCiAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA3NSwgMCwgMTApLAogICAgU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKSwKICAgIEZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZCwKICAgIFRleHRDb2xvcjMgPSB2Mi5Mb2FkZXJEYXRhLkNvbG9ycy5UaXRsZSwKICAgIFRleHRTaXplID0gMTQsCiAgICBUZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAp9KTsKbG9jYWwgdjkgPSBDcmVhdGVPYmplY3QoIlRleHRMYWJlbCIsIHsKICAgIE5hbWUgPSAiVG9wIiwKICAgIFRleHRUcmFuc3BhcmVuY3kgPSAxLAogICAgUGFyZW50ID0gdjYsCiAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSksCiAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDMwLCAwLCA3MCksCiAgICBTaXplID0gVURpbTIubmV3KDAsIDMwMSwgMCwgMjApLAogICAgRm9udCA9IEVudW0uRm9udC5Hb3RoYW0sCiAgICBUZXh0ID0gIkxvYWRlciIsCiAgICBUZXh0Q29sb3IzID0gdjIuTG9hZGVyRGF0YS5Db2xvcnMuVG9waWMsCiAgICBUZXh0U2l6ZSA9IDEwLAogICAgVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKfSk7CmxvY2FsIHYxMCA9IENyZWF0ZU9iamVjdCgiVGV4dExhYmVsIiwgewogICAgTmFtZSA9ICJUaXRsZSIsCiAgICBQYXJlbnQgPSB2NiwKICAgIFRleHRUcmFuc3BhcmVuY3kgPSAxLAogICAgQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpLAogICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAzMCwgMCwgOTApLAogICAgU2l6ZSA9IFVEaW0yLm5ldygwLCAzMDEsIDAsIDQ2KSwKICAgIEZvbnQgPSBFbnVtLkZvbnQuR290aGFtLAogICAgUmljaFRleHQgPSB0cnVlLAogICAgVGV4dCA9ICI8Yj4iIC4uIHYyLkxvYWRlckRhdGEuTmFtZSAuLiAiPC9iPiIsCiAgICBUZXh0Q29sb3IzID0gdjIuTG9hZGVyRGF0YS5Db2xvcnMuVGl0bGUsCiAgICBUZXh0U2l6ZSA9IDE0LAogICAgVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKfSk7CmxvY2FsIHYxMSA9IENyZWF0ZU9iamVjdCgiRnJhbWUiLCB7CiAgICBOYW1lID0gIkJHIiwKICAgIFBhcmVudCA9IHY2LAogICAgQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDApLAogICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICBCYWNrZ3JvdW5kQ29sb3IzID0gdjIuTG9hZGVyRGF0YS5Db2xvcnMuTG9hZGVyQmFja2dyb3VuZCwKICAgIEJvcmRlclNpemVQaXhlbCA9IDAsCiAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAsIDcwKSwKICAgIFNpemUgPSBVRGltMi5uZXcoMC44NTAwMDAwMjM4NDE4NTc5LCAwLCAwLCAyNCkKfSk7CnY0KDgsIHYxMSk7CmxvY2FsIHYxMiA9IENyZWF0ZU9iamVjdCgiRnJhbWUiLCB7CiAgICBOYW1lID0gIlByb2dyZXNzIiwKICAgIFBhcmVudCA9IHYxMSwKICAgIEJhY2tncm91bmRDb2xvcjMgPSB2Mi5Mb2FkZXJEYXRhLkNvbG9ycy5Mb2FkZXJTcGxhc2gsCiAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgIEJvcmRlclNpemVQaXhlbCA9IDAsCiAgICBTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIDI0KQp9KTsKdjQoOCwgdjEyKTsKbG9jYWwgdjEzID0gQ3JlYXRlT2JqZWN0KCJUZXh0TGFiZWwiLCB7CiAgICBOYW1lID0gIlN0ZXBMYWJlbCIsCiAgICBQYXJlbnQgPSB2NiwKICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAwLCAxLCAtIDI1KSwKICAgIFNpemUgPSBVRGltMi5uZXcoMSwgLSAyMCwgMCwgMjApLAogICAgRm9udCA9IEVudW0uRm9udC5Hb3RoYW0sCiAgICBUZXh0ID0gIiIsCiAgICBUZXh0Q29sb3IzID0gdjIuTG9hZGVyRGF0YS5Db2xvcnMuVG9waWMsCiAgICBUZXh0U2l6ZSA9IDE0LAogICAgVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkNlbnRlciwKICAgIEFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpCn0pOwpmdW5jdGlvbiBVcGRhdGVTdGVwVGV4dCh2MTkxKQogICAgdjEzLlRleHQgPSB2M1t2MTkxXSBvciAiIiA7CmVuZApmdW5jdGlvbiBVcGRhdGVQZXJjZW50YWdlKHYxOTMsIHYxOTQpCiAgICBUd2Vlbk9iamVjdCh2MTIsIDAuNSwgewogICAgICAgIFNpemUgPSBVRGltMi5uZXcodjE5MyAvIDEwMCwgMCwgMCwgMjQpCiAgICB9KTsKICAgIFVwZGF0ZVN0ZXBUZXh0KHYxOTQpOwplbmQKVHdlZW5PYmplY3QodjYsIDAuMjUsIHsKICAgIFNpemUgPSBVRGltMi5uZXcoMCwgMzQ2LCAwLCAxMjEpCn0pOwp3YWl0KCk7ClR3ZWVuT2JqZWN0KHY5LCAwLjUsIHsKICAgIFRleHRUcmFuc3BhcmVuY3kgPSAwCn0pOwpUd2Vlbk9iamVjdCh2MTAsIDAuNSwgewogICAgVGV4dFRyYW5zcGFyZW5jeSA9IDAKfSk7ClR3ZWVuT2JqZWN0KHYxMSwgMC41LCB7CiAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMAp9KTsKVHdlZW5PYmplY3QodjEyLCAwLjUsIHsKICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwCn0pOwpmb3IgdjE5NSwgdjE5NiBpbiBwYWlycyh2Mi5LZXlmcmFtZXMpIGRvCiAgICB3YWl0KHYxOTZbMV0pOwogICAgVXBkYXRlUGVyY2VudGFnZSh2MTk2WzJdLCB2MTk1KTsKZW5kClVwZGF0ZVBlcmNlbnRhZ2UoMTAwLCA0KTsKVHdlZW5PYmplY3QodjksIDAuNSwgewogICAgVGV4dFRyYW5zcGFyZW5jeSA9IDEKfSk7ClR3ZWVuT2JqZWN0KHYxMCwgMC41LCB7CiAgICBUZXh0VHJhbnNwYXJlbmN5ID0gMQp9KTsKVHdlZW5PYmplY3QodjExLCAwLjUsIHsKICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCn0pOwpUd2Vlbk9iamVjdCh2MTIsIDAuNSwgewogICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKfSk7CndhaXQoMC41KTsKVHdlZW5PYmplY3QodjYsIDAuMjUsIHsKICAgIFNpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgMCkKfSk7CndhaXQoMC4yNSk7CnY1OkRlc3Ryb3koKTsKLS0gc3Bhd24oZnVuY3Rpb24oKQotLSAgICAgd2hpbGUgd2FpdCgpIGRvCi0tICAgICAgICAgZnVuY3Rpb24gcHJpbnQoKQotLSAgICAgICAgIGVuZAotLSAgICAgICAgIGZ1bmN0aW9uIHdhcm4oKQotLSAgICAgICAgIGVuZAotLSAgICAgICAgIGZ1bmN0aW9uIGVycm9yKCkKLS0gICAgICAgICBlbmQKLS0gICAgICAgICBkZWJ1Zy50cmFjZWJhY2sgPSBmdW5jdGlvbigpCi0tICAgICAgICAgICAgIHJldHVybiAiVHJhY2ViYWNrIGJsb2NrZWQiOwotLSAgICAgICAgIGVuZDsKLS0gICAgICAgICBkZWJ1Zy5pbmZvID0gZnVuY3Rpb24oKQotLSAgICAgICAgICAgICByZXR1cm4gIkluZm8gYmxvY2tlZCI7Ci0tICAgICAgICAgZW5kOwotLSAgICAgICAgIGxvY2FsIHY0MjAgPSBnZXRyYXdtZXRhdGFibGUoZ2FtZSk7Ci0tICAgICAgICAgaWYgKHY0MjAgYW5kIG5vdCB2NDIwLl9fbWV0YXRhYmxlKSB0aGVuCi0tICAgICAgICAgICAgIHNldHJlYWRvbmx5KHY0MjAsIGZhbHNlKTsKLS0gICAgICAgICAgICAgbG9jYWwgdjY1OCA9IHY0MjAuX19pbmRleDsKLS0gICAgICAgICAgICAgbG9jYWwgdjY1OSA9IHY0MjAuX19uZXdpbmRleDsKLS0gICAgICAgICAgICAgdjQyMC5fX2luZGV4ID0gZnVuY3Rpb24odjc1OSwgdjc2MCkKLS0gICAgICAgICAgICAgICAgIGlmICgodjc2MCA9PSAiZGVidWciKSBvciAodjc2MCA9PSAiZ2V0cmF3bWV0YXRhYmxlIikpIHRoZW4KLS0gICAgICAgICAgICAgICAgICAgICBlcnJvcigiQW50aSBTa2lkOiBUYW1wZXJpbmcgZGV0ZWN0ZWQhIik7Ci0tICAgICAgICAgICAgICAgICBlbmQKLS0gICAgICAgICAgICAgICAgIHJldHVybiB2NjU4KHY3NTksIHY3NjApOwotLSAgICAgICAgICAgICBlbmQ7Ci0tICAgICAgICAgICAgIHY0MjAuX19uZXdpbmRleCA9IGZ1bmN0aW9uKHY3NjEsIHY3NjIsIHY3NjMpCi0tICAgICAgICAgICAgICAgICBpZiAoKHY3NjIgPT0gImRlYnVnIikgb3IgKHY3NjIgPT0gImdldHJhd21ldGF0YWJsZSIpKSB0aGVuCi0tICAgICAgICAgICAgICAgICAgICAgZXJyb3IoIkFudGkgU2tpZDogVGFtcGVyaW5nIGRldGVjdGVkISIpOwotLSAgICAgICAgICAgICAgICAgZW5kCi0tICAgICAgICAgICAgICAgICByZXR1cm4gdjY1OSh2NzYxLCB2NzYyLCB2NzYzKTsKLS0gICAgICAgICAgICAgZW5kOwotLSAgICAgICAgICAgICBzZXRyZWFkb25seSh2NDIwLCB0cnVlKTsKLS0gICAgICAgICBlbmQKLS0gICAgICAgICBsb2NhbCBmdW5jdGlvbiB2NDIxKCkKLS0gICAgICAgICAgICAgbG9jYWwgdjU2OCA9IHsKLS0gICAgICAgICAgICAgICAgICJfRyIsCi0tICAgICAgICAgICAgICAgICAiZGVidWciLAotLSAgICAgICAgICAgICAgICAgImdldGdlbnYiLAotLSAgICAgICAgICAgICAgICAgImdldHJhd21ldGF0YWJsZSIsCi0tICAgICAgICAgICAgICAgICAic2V0ZmVudiIsCi0tICAgICAgICAgICAgICAgICAibG9hZHN0cmluZyIsCi0tICAgICAgICAgICAgICAgICAiaG9va2Z1bmN0aW9uIgotLSAgICAgICAgICAgICB9OwotLSAgICAgICAgICAgICBmb3IgdjY2MiwgdjY2MyBpbiBpcGFpcnModjU2OCkgZG8KLS0gICAgICAgICAgICAgICAgIGxvY2FsIHY2NjQsIHY2NjUgPSBwY2FsbChmdW5jdGlvbigpCi0tICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9HW3Y2NjNdOwotLSAgICAgICAgICAgICAgICAgZW5kKTsKLS0gICAgICAgICAgICAgICAgIGlmICh2NjY0IGFuZCB2NjY1KSB0aGVuCi0tICAgICAgICAgICAgICAgICAgICAgZXJyb3IoIkFudGkgU2tpZDogRW52aXJvbm1lbnQgdGFtcGVyaW5nIGRldGVjdGVkISIpOwotLSAgICAgICAgICAgICAgICAgZW5kCi0tICAgICAgICAgICAgIGVuZAotLSAgICAgICAgIGVuZAotLSAgICAgICAgIGxvY2FsIGZ1bmN0aW9uIHY0MjIoKQotLSAgICAgICAgICAgICBsb2NhbCB2NTY5ID0gewotLSAgICAgICAgICAgICAgICAgZ2V0cmF3bWV0YXRhYmxlLAotLSAgICAgICAgICAgICAgICAgc2V0cmVhZG9ubHksCi0tICAgICAgICAgICAgICAgICBnZXRnZW52LAotLSAgICAgICAgICAgICAgICAgZGVidWcuZ2V0aW5mbywKLS0gICAgICAgICAgICAgICAgIGRlYnVnLmdldHJlZ2lzdHJ5Ci0tICAgICAgICAgICAgIH07Ci0tICAgICAgICAgICAgIGZvciB2NjY2LCB2NjY3IGluIGlwYWlycyh2NTY5KSBkbwotLSAgICAgICAgICAgICAgICAgaWYgdjY2NyB0aGVuCi0tICAgICAgICAgICAgICAgICAgICAgZXJyb3IoIkFudGkgU2tpZDogSG9vayB0YW1wZXJpbmcgZGV0ZWN0ZWQhIik7Ci0tICAgICAgICAgICAgICAgICBlbmQKLS0gICAgICAgICAgICAgZW5kCi0tICAgICAgICAgZW5kCi0tICAgICAgICAgbG9jYWwgdjQyMyA9IGdhbWU6RmluZFNlcnZpY2UoIkh0dHBTZXJ2aWNlIik7Ci0tICAgICAgICAgaWYgdjQyMyB0aGVuCi0tICAgICAgICAgICAgIHY0MjMuUmVxdWVzdEFzeW5jID0gZnVuY3Rpb24oKQotLSAgICAgICAgICAgICAgICAgZXJyb3IoIkhUVFAgUmVxdWVzdHMgQmxvY2tlZCIpOwotLSAgICAgICAgICAgICBlbmQ7Ci0tICAgICAgICAgICAgIHY0MjMuR2V0QXN5bmMgPSBmdW5jdGlvbigpCi0tICAgICAgICAgICAgICAgICBlcnJvcigiSFRUUCBHZXQgQmxvY2tlZCIpOwotLSAgICAgICAgICAgICBlbmQ7Ci0tICAgICAgICAgICAgIHY0MjMuUG9zdEFzeW5jID0gZnVuY3Rpb24oKQotLSAgICAgICAgICAgICAgICAgZXJyb3IoIkhUVFAgUG9zdCBCbG9ja2VkIik7Ci0tICAgICAgICAgICAgIGVuZDsKLS0gICAgICAgICBlbmQKLS0gICAgICAgICBmdW5jdGlvbiBjb2xsZWN0Z2FyYmFnZSgpCi0tICAgICAgICAgICAgIGVycm9yKCJHQyBCbG9ja2VkIik7Ci0tICAgICAgICAgZW5kCi0tICAgICAgICAgb3MudGltZSA9IGZ1bmN0aW9uKCkKLS0gICAgICAgICAgICAgZXJyb3IoIk9TIFRpbWUgQmxvY2tlZCIpOwotLSAgICAgICAgIGVuZDsKLS0gICAgICAgICBwY2FsbCh2NDIxKTsKLS0gICAgICAgICBwY2FsbCh2NDIyKTsKLS0gICAgIGVuZAotLSBlbmQpOwpsb2NhbCB2MTQgPSBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL29iZmFsY2h4L3Rlc3RmbHVlbnQvcmVmcy9oZWFkcy9tYWluL0ZsdWVudFRyYXUiKSkoKTsKbG9jYWwgdjE1ID0gdjE0OkNyZWF0ZVdpbmRvdyh7CiAgICBUaXRsZSA9ICJQdSBJb3MgRHoiLAogICAgU3ViVGl0bGUgPSAiIiwKICAgIFRhYldpZHRoID0gMTYwLAogICAgVGhlbWUgPSAiTGlnaHQiLAogICAgQWNyeWxpYyA9IGZhbHNlLAogICAgU2l6ZSA9IFVEaW0yLmZyb21PZmZzZXQoNTAwLCAzMjApLAogICAgTWluaW1pemVLZXkgPSBFbnVtLktleUNvZGUuRW5kCn0pOwpsb2NhbCB2MTYgPSB7CiAgICBIb21lID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiVGjDtG5nIFRpbiIKICAgIH0pLAogICAgTWFpbiA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIkPDoHkiCiAgICB9KSwKICAgIFNlYSA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIlPhu7EgS2nhu4duIgogICAgfSksCiAgICBJVE0gPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJW4bqtdCBQaOG6qW0iCiAgICB9KSwKICAgIFNldHRpbmcgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJDw6BpIMSQ4bq3dCIKICAgIH0pLAogICAgU3RhdHVzID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiTcOheSBDaOG7pyIKICAgIH0pLAogICAgU3RhdHMgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJDaOG7iSBT4buRIgogICAgfSksCiAgICBQbGF5ZXIgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJOZ8aw4budaSBDaMahaSIKICAgIH0pLAogICAgVGVsZXBvcnQgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJE4buLY2ggQ2h1eeG7g24iCiAgICB9KSwKICAgIFZpc3VhbCA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIkdp4bqjIgogICAgfSksCiAgICBGcnVpdCA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIlRyw6FpIgogICAgfSksCiAgICBSYWlkID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiVOG6rXAgS8OtY2giCiAgICB9KSwKICAgIFJhY2UgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJU4buZYyIKICAgIH0pLAogICAgU2hvcCA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIkPhu61hIEjDoG5nIgogICAgfSksCiAgICBNaXNjID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiS2jDoWMiCiAgICB9KQp9Owpsb2NhbCB2MTcgPSB2MTQuT3B0aW9uczsKbG9jYWwgdjE4ID0gZ2FtZS5QbGFjZUlkOwppZiAodjE4ID09IDI3NTM5MTU1NDkpIHRoZW4KICAgIFNlYTEgPSB0cnVlOwplbHNlaWYgKHYxOCA9PSA0NDQyMjcyMTgzKSB0aGVuCiAgICBTZWEyID0gdHJ1ZTsKZWxzZWlmICh2MTggPT0gNzQ0OTQyMzYzNSkgdGhlbgogICAgU2VhMyA9IHRydWU7CmVsc2UKICAgIGdhbWU6U2h1dGRvd24oKTsKZW5kCmdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLklkbGVkOmNvbm5lY3QoZnVuY3Rpb24oKQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsVXNlciIpOkJ1dHRvbjJEb3duKFZlY3RvcjIubmV3KDAsIDApLCB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUpOwogICAgd2FpdCgpOwogICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsVXNlciIpOkJ1dHRvbjJVcChWZWN0b3IyLm5ldygwLCAwKSwgd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ0ZyYW1lKTsKZW5kKTsKClNlYTEgPSBmYWxzZTsKU2VhMiA9IGZhbHNlOwpTZWEzID0gZmFsc2U7CmxvY2FsIHYxOSA9IGdhbWUuUGxhY2VJZDsKaWYgKHYxOSA9PSAyNzUzOTE1NTQ5KSB0aGVuCiAgICBTZWExID0gdHJ1ZTsKZWxzZWlmICh2MTkgPT0gNDQ0MjI3MjE4MykgdGhlbgogICAgU2VhMiA9IHRydWU7CmVsc2VpZiAodjE5ID09IDc0NDk0MjM2MzUpIHRoZW4KICAgIFNlYTMgPSB0cnVlOwplbmQKZnVuY3Rpb24gQ2hlY2tMZXZlbCgpCiAgICBsb2NhbCB2MTk3ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZTsKICAgIGlmIFNlYTEgdGhlbgogICAgICAgIGlmICgodjE5NyA9PSAxKSBvciAodjE5NyA8PSA5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiQmFuZGl0IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQmFuZGl0IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkJhbmRpdFF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkJhbmRpdCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDEwNjAuOTM4MzU0NDkyMiwgMTYuNDU1MDY2NjgwOTA4LCAxNTQ3Ljc4NDE3OTY4NzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDEwMzguNTUzMzQ0NzI2NiwgNDEuMjk2MjQ5Mzg5NjQ4LCAxNTc2LjUwOTg4NzY5NTMpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTApIG9yICh2MTk3IDw9IDE0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTW9ua2V5IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTW9ua2V5IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkp1bmdsZVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTW9ua2V5IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxNjAxLjY1NTM5NTUwNzgsIDM2Ljg1MjEzNDcwNDU5LCAxNTMuMzg4MDkyMDQxMDIpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTQ0OC4xNDQ2NTMzMjAzLCA1MC44NTE5OTM1NjA3OTEsIDYzLjYwNzE4NTM2Mzc3KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE1KSBvciAodjE5NyA8PSAyOSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkdvcmlsbGEiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJHb3JpbGxhIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkp1bmdsZVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiR29yaWxsYSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTYwMS42NTUzOTU1MDc4LCAzNi44NTIxMzQ3MDQ1OSwgMTUzLjM4ODA5MjA0MTAyKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDExNDIuNjQ4ODAzNzEwOSwgNDAuNDYyMzQ4OTM3OTg4LCAtIDUxNS4zOTIyNzI5NDkyMik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAzMCkgb3IgKHYxOTcgPD0gMzkpIG9yIChTZWxlY3RNb25zdGVyID09ICJQaXJhdGUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJQaXJhdGUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQnVnZ3lRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJQaXJhdGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDExNDAuMTc2MTQ3NDYwOSwgNC43NTIwNDk0NDYxMDYsIDM4MjcuNDA1NzYxNzE4OCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxMjAxLjA4ODEzNDc2NTYsIDQwLjYyODk0MDU4MjI3NSwgMzg1Ny41OTY2Nzk2ODc1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDQwKSBvciAodjE5NyA8PSA1OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkJydXRlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQnJ1dGUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQnVnZ3lRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJCcnV0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTE0MC4xNzYxNDc0NjA5LCA0Ljc1MjA0OTQ0NjEwNiwgMzgyNy40MDU3NjE3MTg4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDEzODcuNTMyNDcwNzAzMSwgMjQuNTkyMDM1MjkzNTc5LCA0MTAwLjk1NzUxOTUzMTMpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNjApIG9yICh2MTk3IDw9IDc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRGVzZXJ0IEJhbmRpdCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkRlc2VydCBCYW5kaXQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRGVzZXJ0UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJEZXNlcnQgQmFuZGl0IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoODk2LjUxNzIxMTkxNDA2LCA2LjQzODQ2MTc4MDU0ODEsIDQzOTAuMTQ5NDE0MDYyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoOTg0Ljk5ODk2MjQwMjM0LCAxNi4xMDk1NTIzODM0MjMsIDQ0MTcuOTEwMTU2MjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNzUpIG9yICh2MTk3IDw9IDg5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRGVzZXJ0IE9mZmljZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJEZXNlcnQgT2ZmaWNlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEZXNlcnRRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkRlc2VydCBPZmZpY2VyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoODk2LjUxNzIxMTkxNDA2LCA2LjQzODQ2MTc4MDU0ODEsIDQzOTAuMTQ5NDE0MDYyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMTU0Ny4xNTEwMDA5NzY2LCAxNC40NTIwMzg3NjQ5NTQsIDQzODEuODAwMjkyOTY4OCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA5MCkgb3IgKHYxOTcgPD0gOTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJTbm93IEJhbmRpdCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNub3cgQmFuZGl0IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNub3dRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlNub3cgQmFuZGl0IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMTM4Ni44MDczNzMwNDY5LCA4Ny4yNzI3ODkwMDE0NjUsIC0gMTI5OC4zNTc2NjYwMTU2KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygxMzU2LjMwMjg1NjQ0NTMsIDEwNS43Njg2NTM4Njk2MywgLSAxMzI4LjI0MTgyMTI4OTEpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTAwKSBvciAodjE5NyA8PSAxMTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJTbm93bWFuIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU25vd21hbiI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTbm93UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTbm93bWFuIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMTM4Ni44MDczNzMwNDY5LCA4Ny4yNzI3ODkwMDE0NjUsIC0gMTI5OC4zNTc2NjYwMTU2KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygxMjE4Ljc5NTY1NDI5NjksIDEzOC4wMTE4NDA4MjAzMSwgLSAxNDg4LjAyNjI0NTExNzIpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTIwKSBvciAodjE5NyA8PSAxNDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJDaGllZiBQZXR0eSBPZmZpY2VyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQ2hpZWYgUGV0dHkgT2ZmaWNlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJNYXJpbmVRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJDaGllZiBQZXR0eSBPZmZpY2VyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA1MDM1LjQ5NjA5Mzc1LCAyOC42Nzc4MzU0NjQ0NzgsIDQzMjQuMTg0MDgyMDMxMyk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA0OTMxLjE1NTI3MzQzNzUsIDY1Ljc5MzExMzcwODQ5NiwgNDEyMS44MzkzNTU0Njg4KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE1MCkgb3IgKHYxOTcgPD0gMTc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU2t5IEJhbmRpdCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNreSBCYW5kaXQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2t5UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTa3kgQmFuZGl0IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA0ODQyLjEzNzIwNzAzMTMsIDcxNy42OTU0MzQ1NzAzMSwgLSAyNjIzLjA0ODMzOTg0MzgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNDk1NS42NDExMTMyODEzLCAzNjUuNDYzNjUzNTY0NDUsIC0gMjkwOC4xODY1MjM0Mzc1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE3NSkgb3IgKHYxOTcgPD0gMTg5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRGFyayBNYXN0ZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJEYXJrIE1hc3RlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTa3lRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkRhcmsgTWFzdGVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA0ODQyLjEzNzIwNzAzMTMsIDcxNy42OTU0MzQ1NzAzMSwgLSAyNjIzLjA0ODMzOTg0MzgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNTE0OC4xNjUwMzkwNjI1LCA0MzkuMDQ1NzE1MzMyMDMsIC0gMjMzMi45NjExODE2NDA2KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE5MCkgb3IgKHYxOTcgPD0gMjA5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiUHJpc29uZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJQcmlzb25lciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJQcmlzb25lclF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiUHJpc29uZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg1MzEwLjYwNTQ3LCAwLjM1MDAxNDkyNSwgNDc0Ljk0NjU5NCwgMC4wMTc1MDE3MTE4LCAwLCAwLjk5OTg0NjkzNSwgMCwgMSwgMCwgLSAwLjk5OTg0NjkzNSwgMCwgMC4wMTc1MDE3MTE4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg0OTM3LjMxODg1LCAwLjMzMjAzMTM5OSwgNjQ5LjU3NDUyNCwgMC42OTQ2NDk4MTYsIDAsIC0gMC43MTkzNDgwNzMsIDAsIDEsIDAsIDAuNzE5MzQ4MDczLCAwLCAwLjY5NDY0OTgxNik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMTApIG9yICh2MTk3IDw9IDI0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkRhbmdlcm91cyBQcmlzb25lciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkRhbmdlcm91cyBQcmlzb25lciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJQcmlzb25lclF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRGFuZ2Vyb3VzIFByaXNvbmVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNTMxMC42MDU0NywgMC4zNTAwMTQ5MjUsIDQ3NC45NDY1OTQsIDAuMDE3NTAxNzExOCwgMCwgMC45OTk4NDY5MzUsIDAsIDEsIDAsIC0gMC45OTk4NDY5MzUsIDAsIDAuMDE3NTAxNzExOCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNTA5OS42NjI2LCAwLjM1MTU2MjY3OSwgMTA1NS43NTgzLCAwLjg5ODkwNjgyNywgMCwgLSAwLjQzODEzOTg1NiwgMCwgMSwgMCwgMC40MzgxMzk4NTYsIDAsIDAuODk4OTA2ODI3KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDI1MCkgb3IgKHYxOTcgPD0gMjc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiVG9nYSBXYXJyaW9yIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiVG9nYSBXYXJyaW9yIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNvbG9zc2V1bVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiVG9nYSBXYXJyaW9yIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxNTc3Ljc4OTA2MjUsIDcuNDE1MTQyMDU5MzI2MiwgLSAyOTg0LjQ4Mzg4NjcxODgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTg3Mi41MTY2MDE1NjI1LCA0OS4wODAyMTU0NTQxMDIsIC0gMjkxMy44MTA1NDY4NzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjc1KSBvciAodjE5NyA8PSAyOTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJHbGFkaWF0b3IiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJHbGFkaWF0b3IiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ29sb3NzZXVtUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJHbGFkaWF0b3IiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE1NzcuNzg5MDYyNSwgNy40MTUxNDIwNTkzMjYyLCAtIDI5ODQuNDgzODg2NzE4OCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxNTIxLjM3NDAyMzQzNzUsIDgxLjIwMzE3MDc3NjM2NywgLSAzMDY2LjMxMzk2NDg0MzgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMzAwKSBvciAodjE5NyA8PSAzMjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJNaWxpdGFyeSBTb2xkaWVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTWlsaXRhcnkgU29sZGllciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJNYWdtYVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTWlsaXRhcnkgU29sZGllciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNTMxNi4xMTU3MjI2NTYzLCAxMi4yNjI4MzE2ODc5MjcsIDg1MTcuMDAzOTA2MjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNTM2OS4wMDA0ODgyODEzLCA2MS4yNDM1MjY0NTg3NCwgODU1Ni40OTIxODc1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDMyNSkgb3IgKHYxOTcgPD0gMzc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTWlsaXRhcnkgU3B5IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTWlsaXRhcnkgU3B5IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIk1hZ21hUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJNaWxpdGFyeSBTcHkiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDUzMTYuMTE1NzIyNjU2MywgMTIuMjYyODMxNjg3OTI3LCA4NTE3LjAwMzkwNjI1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDU3ODcuMDAyOTMsIDc1LjgyNjI2MzQsIDg2NTEuNjk5MjIsIDAuODM4NTkwNTYyLCAwLCAtIDAuNTQ0NzYyMTk0LCAwLCAxLCAwLCAwLjU0NDc2MjE5NCwgMCwgMC44Mzg1OTA1NjIpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMzc1KSBvciAodjE5NyA8PSAzOTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJGaXNobWFuIFdhcnJpb3IiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJGaXNobWFuIFdhcnJpb3IiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRmlzaG1hblF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRmlzaG1hbiBXYXJyaW9yIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNjExMjIuNjUyMzQzNzUsIDE4LjQ5NzQ0MjI0NTQ4MywgMTU2OS4zOTk3ODAyNzM0KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg2MDg0NC4xMDU0Njg3NSwgOTguNDYyODc1MzY2MjExLCAxMjk4LjM5ODU1OTU3MDMpOwogICAgICAgICAgICBpZiAoX0cuQXV0b0xldmVsIGFuZCAoKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMzAwMCkpIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDYxMTYzLjg1MTU2MjUsIDExLjY3OTY4NzUsIDE4MTkuNzg0MTc5Njg3NSkpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDQwMCkgb3IgKHYxOTcgPD0gNDQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRmlzaG1hbiBDb21tYW5kbyIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkZpc2htYW4gQ29tbWFuZG8iOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRmlzaG1hblF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRmlzaG1hbiBDb21tYW5kbyI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDYxMTIyLjY1MjM0Mzc1LCAxOC40OTc0NDIyNDU0ODMsIDE1NjkuMzk5NzgwMjczNCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNjE3MzguMzk4NDM3NSwgNjQuMjA3MzIxMTY2OTkyLCAxNDMzLjgzNzUyNDQxNDEpOwogICAgICAgICAgICBpZiAoX0cuQXV0b0xldmVsIGFuZCAoKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMzAwMCkpIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDYxMTYzLjg1MTU2MjUsIDExLjY3OTY4NzUsIDE4MTkuNzg0MTc5Njg3NSkpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEwKSBvciAodjE5NyA8PSA0NzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJHb2QncyBHdWFyZCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkdvZCdzIEd1YXJkIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNreUV4cDFRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkdvZCdzIEd1YXJkIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA0NzIxLjg2MDM1MTU2MjUsIDg0NS4zMDI5Nzg1MTU2MywgLSAxOTUzLjg0ODk5OTAyMzQpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNDYyOC4wNDk4MDQ2ODc1LCA4NjYuOTI4NzcxOTcyNjYsIC0gMTkzMS4yMzUyMjk0OTIyKTsKICAgICAgICAgICAgaWYgKF9HLkF1dG9MZXZlbCBhbmQgKChDRnJhbWVNb24uUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDMwMDApKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDQ2MDcuODIyNzUsIDg3Mi41NDI0OCwgLSAxNjY3LjU1Njg4KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNDc1KSBvciAodjE5NyA8PSA1MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJTaGFuZGEiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTaGFuZGEiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2t5RXhwMVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU2hhbmRhIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA3ODYzLjE1OTY2Nzk2ODgsIDU1NDUuNTE5MDQyOTY4OCwgLSAzNzguNDIyNjY4NDU3MDMpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNzY4NS4xNDc0NjA5Mzc1LCA1NjAxLjA3NTE5NTMxMjUsIC0gNDQxLjM4ODc2MzQyNzczKTsKICAgICAgICAgICAgaWYgKF9HLkF1dG9MZXZlbCBhbmQgKChDRnJhbWVNb24uUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDMwMDApKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDc4OTQuNjE3Njc1NzgxMywgNTU0Ny4xNDE2MDE1NjI1LCAtIDM4MC4yOTExOTg3MzA0NykpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDUyNSkgb3IgKHYxOTcgPD0gNTQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiUm95YWwgU3F1YWQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJSb3lhbCBTcXVhZCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTa3lFeHAyUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJSb3lhbCBTcXVhZCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNzkwMy4zODI4MTI1LCA1NjM1Ljk4OTc0NjA5MzgsIC0gMTQxMC45MjM4MjgxMjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNzY1NC4yNTE0NjQ4NDM4LCA1NjM3LjEwNzkxMDE1NjMsIC0gMTQwNy43NTUwMDQ4ODI4KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDU1MCkgb3IgKHYxOTcgPD0gNjI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiUm95YWwgU29sZGllciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlJveWFsIFNvbGRpZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2t5RXhwMlF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiUm95YWwgU29sZGllciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNzkwMy4zODI4MTI1LCA1NjM1Ljk4OTc0NjA5MzgsIC0gMTQxMC45MjM4MjgxMjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNzc2MC40MTA2NDQ1MzEzLCA1Njc5LjkwNzcxNDg0MzgsIC0gMTg4NC44MTEyNzkyOTY5KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDYyNSkgb3IgKHYxOTcgPD0gNjQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiR2FsbGV5IFBpcmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkdhbGxleSBQaXJhdGUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRm91bnRhaW5RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkdhbGxleSBQaXJhdGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg1MjU4LjI3ODgwODU5MzgsIDM4LjUyNjkzMTc2MjY5NSwgNDA1MC4wNDQ5MjE4NzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDU1NTcuMTY4NDU3MDMxMywgMTUyLjMyNzE3ODk1NTA4LCAzOTk4Ljc3NTg3ODkwNjMpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPj0gNjUwKSBvciAoU2VsZWN0TW9uc3RlciA9PSAiR2FsbGV5IENhcHRhaW4iKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJHYWxsZXkgQ2FwdGFpbiI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGb3VudGFpblF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiR2FsbGV5IENhcHRhaW4iOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg1MjU4LjI3ODgwODU5MzgsIDM4LjUyNjkzMTc2MjY5NSwgNDA1MC4wNDQ5MjE4NzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDU2NzcuNjc3MjQ2MDkzOCwgOTIuNzg2MTA5OTI0MzE2LCA0OTY2LjYzMjMyNDIxODgpOwogICAgICAgIGVuZAogICAgZW5kCiAgICBpZiBTZWEyIHRoZW4KICAgICAgICBpZiAoKHYxOTcgPT0gNzAwKSBvciAodjE5NyA8PSA3MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJSYWlkZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJSYWlkZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQXJlYTFRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlJhaWRlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNDI3LjcyNTY3NzQ5MDIzLCA3Mi45OTYzNDU1MjAwMiwgMTgzNS45NDI2MjY5NTMxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg2OC44NzQ1NjUxMjQ1MTIsIDkzLjYzNTY0MzAwNTM3MSwgMjQyOS42NzUyOTI5Njg4KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDcyNSkgb3IgKHYxOTcgPD0gNzc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTWVyY2VuYXJ5IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTWVyY2VuYXJ5IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkFyZWExUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJNZXJjZW5hcnkiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDQyNy43MjU2Nzc0OTAyMywgNzIuOTk2MzQ1NTIwMDIsIDE4MzUuOTQyNjI2OTUzMSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA4NjQuODUwMDk3NjU2MjUsIDEyMi40NzEwNDY0NDc3NSwgMTQ1My4xNTA1MTI2OTUzKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDc3NSkgb3IgKHYxOTcgPD0gNzk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU3dhbiBQaXJhdGUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTd2FuIFBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJBcmVhMlF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU3dhbiBQaXJhdGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg2MzUuNjExNTExMjMwNDcsIDczLjA5NjM1MTYyMzUzNSwgOTE3LjgxMjk4ODI4MTI1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygxMDY1LjM2Njk0MzM1OTQsIDEzNy42NDAxMjE0NTk5NiwgMTMyNC4zNzk4ODI4MTI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDgwMCkgb3IgKHYxOTcgPD0gODc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRmFjdG9yeSBTdGFmZiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkZhY3RvcnkgU3RhZmYiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQXJlYTJRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkZhY3RvcnkgU3RhZmYiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg2MzUuNjExNTExMjMwNDcsIDczLjA5NjM1MTYyMzUzNSwgOTE3LjgxMjk4ODI4MTI1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg1MzMuMjIwNDU4OTg0MzgsIDEyOC40Njg3NjUyNTg3OSwgMzU1LjYyNjE1OTY2Nzk3KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDg3NSkgb3IgKHYxOTcgPD0gODk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTWFyaW5lIExpZXV0ZW5hbiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIk1hcmluZSBMaWV1dGVuYW50IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIk1hcmluZVF1ZXN0MyI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIk1hcmluZSBMaWV1dGVuYW50IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAyNDQwLjk5MzQwODIwMzEsIDczLjA0MTkwODI2NDE2LCAtIDMyMTcuNzA4MjUxOTUzMSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAyNDg5LjI2MjIwNzAzMTMsIDg0LjYxMzU5NDA1NTE3NiwgLSAzMTUxLjg4MzA1NjY0MDYpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gOTAwKSBvciAodjE5NyA8PSA5NDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJNYXJpbmUgQ2FwdGFpbiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIk1hcmluZSBDYXB0YWluIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIk1hcmluZVF1ZXN0MyI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIk1hcmluZSBDYXB0YWluIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAyNDQwLjk5MzQwODIwMzEsIDczLjA0MTkwODI2NDE2LCAtIDMyMTcuNzA4MjUxOTUzMSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAyMzM1LjIwMjYzNjcxODgsIDc5Ljc4NjY1OTI0MDcyMywgLSAzMjQ1Ljg2NzQzMTY0MDYpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gOTUwKSBvciAodjE5NyA8PSA5NzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJab21iaWUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJab21iaWUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiWm9tYmllUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJab21iaWUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDU0OTQuMzQxMzA4NTkzOCwgNDguNTA1OTMxODU0MjQ4LCAtIDc5NC41OTA5NDIzODI4MSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA1NTM2LjQ5NzA3MDMxMjUsIDEwMS4wODU3NzcyODI3MSwgLSA4MzUuNTkwNzU5Mjc3MzQpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gOTc1KSBvciAodjE5NyA8PSA5OTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJWYW1waXJlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiVmFtcGlyZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJab21iaWVRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlZhbXBpcmUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDU0OTQuMzQxMzA4NTkzOCwgNDguNTA1OTMxODU0MjQ4LCAtIDc5NC41OTA5NDIzODI4MSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA1ODA2LjEwOTg2MzI4MTMsIDE2LjcyMjUyODQ1NzY0MiwgLSAxMTY0LjQzODQ3NjU2MjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTAwMCkgb3IgKHYxOTcgPD0gMTA0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNub3cgVHJvb3BlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNub3cgVHJvb3BlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTbm93TW91bnRhaW5RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlNub3cgVHJvb3BlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDYwNy4wNTk2MzEzNDc2NiwgNDAxLjQ0NzgxNDk0MTQxLCAtIDUzNzAuNTU0Njg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNTM1LjIxMDUxMDI1MzkxLCA0MzIuNzQyMDk1OTQ3MjcsIC0gNTQ4NC45MTY1MDM5MDYzKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEwNTApIG9yICh2MTk3IDw9IDEwOTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJXaW50ZXIgV2FycmlvciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIldpbnRlciBXYXJyaW9yIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNub3dNb3VudGFpblF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiV2ludGVyIFdhcnJpb3IiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg2MDcuMDU5NjMxMzQ3NjYsIDQwMS40NDc4MTQ5NDE0MSwgLSA1MzcwLjU1NDY4NzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDEyMzQuNDQ0OTQ2Mjg5MSwgNDU2Ljk1NDE5MzExNTIzLCAtIDUxNzQuMTMwODU5Mzc1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDExMDApIG9yICh2MTk3IDw9IDExMjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJMYWIgU3Vib3JkaW5hdGUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJMYWIgU3Vib3JkaW5hdGUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiSWNlU2lkZVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTGFiIFN1Ym9yZGluYXRlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA2MDYxLjg0MTc5Njg3NSwgMTUuOTI2NjcxOTgxODEyLCAtIDQ5MDIuMDM4NTc0MjE4OCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA1NzIwLjU1NzYxNzE4NzUsIDYzLjMwOTQ3MTEzMDM3MSwgLSA0Nzg0LjYxMDM1MTU2MjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTEyNSkgb3IgKHYxOTcgPD0gMTE3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkhvcm5lZCBXYXJyaW9yIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiSG9ybmVkIFdhcnJpb3IiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiSWNlU2lkZVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiSG9ybmVkIFdhcnJpb3IiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDYwNjEuODQxNzk2ODc1LCAxNS45MjY2NzE5ODE4MTIsIC0gNDkwMi4wMzg1NzQyMTg4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDYyOTIuNzUxOTUzMTI1LCA5MS4xODE5ODM5NDc3NTQsIC0gNTUwMi42NDk5MDIzNDM4KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDExNzUpIG9yICh2MTk3IDw9IDExOTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJNYWdtYSBOaW5qYSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIk1hZ21hIE5pbmphIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZpcmVTaWRlUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJNYWdtYSBOaW5qYSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNTQyOS4wNDczNjMyODEzLCAxNS45Nzc1NjU3NjUzODEsIC0gNTI5Ny45NjE0MjU3ODEzKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDU0NjEuODM4ODY3MTg3NSwgMTMwLjM2MzQ3OTYxNDI2LCAtIDU4MzYuNDcwMjE0ODQzOCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMjAwKSBvciAodjE5NyA8PSAxMjQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTGF2YSBQaXJhdGUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJMYXZhIFBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGaXJlU2lkZVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTGF2YSBQaXJhdGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDU0MjkuMDQ3MzYzMjgxMywgMTUuOTc3NTY1NzY1MzgxLCAtIDUyOTcuOTYxNDI1NzgxMyk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA1MjUxLjE4ODk2NDg0MzgsIDU1LjE2NDUzNTUyMjQ2MSwgLSA0Nzc0LjQwOTY2Nzk2ODgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTI1MCkgb3IgKHYxOTcgPD0gMTI3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNoaXAgRGVja2hhbmQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTaGlwIERlY2toYW5kIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNoaXBRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTaGlwIERlY2toYW5kIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMTA0MC4yOTI3MjQ2MDk0LCAxMjUuMDgyOTMxNTE4NTUsIDMyOTExLjAzOTA2MjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDkyMS4xMjM2NTcyMjY1NiwgMTI1Ljk4Mzk1NTM4MzMsIDMzMDg4LjMyODEyNSk7CiAgICAgICAgICAgIGlmIChfRy5BdXRvTGV2ZWwgYW5kICgoQ0ZyYW1lTW9uLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAyMDAwMCkpIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDkyMy4yMTI1MjQ0MTQwNiwgMTI2Ljk3NjAwNTU1NDIsIDMyODUyLjgzMjAzMTI1KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTI3NSkgb3IgKHYxOTcgPD0gMTI5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNoaXAgRW5naW5lZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTaGlwIEVuZ2luZWVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNoaXBRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTaGlwIEVuZ2luZWVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMTA0MC4yOTI3MjQ2MDk0LCAxMjUuMDgyOTMxNTE4NTUsIDMyOTExLjAzOTA2MjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDg4Ni4yODE3OTkzMTY0MSwgNDAuNDc3OTAxNDU4NzQsIDMyODAwLjgzMjAzMTI1KTsKICAgICAgICAgICAgaWYgKF9HLkF1dG9MZXZlbCBhbmQgKChDRnJhbWVNb24uUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDIwMDAwKSkgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoOTIzLjIxMjUyNDQxNDA2LCAxMjYuOTc2MDA1NTU0MiwgMzI4NTIuODMyMDMxMjUpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMzAwKSBvciAodjE5NyA8PSAxMzI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU2hpcCBTdGV3YXJkIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU2hpcCBTdGV3YXJkIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNoaXBRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTaGlwIFN0ZXdhcmQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg5NzEuNDIwNjU0Mjk2ODgsIDEyNS4wODI5MzE1MTg1NSwgMzMyNDUuNTQyOTY4NzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDk0My44NTUwNDE1MDM5MSwgMTI5LjU4MTgzMjg4NTc0LCAzMzQ0NC4zNjcxODc1KTsKICAgICAgICAgICAgaWYgKF9HLkF1dG9MZXZlbCBhbmQgKChDRnJhbWVNb24uUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDIwMDAwKSkgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoOTIzLjIxMjUyNDQxNDA2LCAxMjYuOTc2MDA1NTU0MiwgMzI4NTIuODMyMDMxMjUpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMzI1KSBvciAodjE5NyA8PSAxMzQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU2hpcCBPZmZpY2VyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU2hpcCBPZmZpY2VyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNoaXBRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTaGlwIE9mZmljZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg5NzEuNDIwNjU0Mjk2ODgsIDEyNS4wODI5MzE1MTg1NSwgMzMyNDUuNTQyOTY4NzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDk1NS4zODQ1ODI1MTk1MywgMTgxLjA4MzM1ODc2NDY1LCAzMzMzMS44OTA2MjUpOwogICAgICAgICAgICBpZiAoX0cuQXV0b0xldmVsIGFuZCAoKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMjAwMDApKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg5MjMuMjEyNTI0NDE0MDYsIDEyNi45NzYwMDU1NTQyLCAzMjg1Mi44MzIwMzEyNSkpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEzNTApIG9yICh2MTk3IDw9IDEzNzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJBcmN0aWMgV2FycmlvciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkFyY3RpYyBXYXJyaW9yIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZyb3N0UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJBcmN0aWMgV2FycmlvciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDU2NjguMTM3MjA3MDMxMywgMjguMjAyNTMxODE0NTc1LCAtIDY0ODQuNjAwNTg1OTM3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNTkzNS40NTQxMDE1NjI1LCA3Ny4yNjAxNjk5ODI5MSwgLSA2NDcyLjc1NjgzNTkzNzUpOwogICAgICAgICAgICBpZiAoX0cuQXV0b0xldmVsIGFuZCAoKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMjAwMDApKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDY1MDguNTU4MTA1NDY4OCwgODkuMDM0OTk2MDMyNzE1LCAtIDEzMi44Mzk1Mzg1NzQyMikpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEzNzUpIG9yICh2MTk3IDw9IDE0MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJTbm93IEx1cmtlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNub3cgTHVya2VyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZyb3N0UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTbm93IEx1cmtlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDU2NjguMTM3MjA3MDMxMywgMjguMjAyNTMxODE0NTc1LCAtIDY0ODQuNjAwNTg1OTM3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNTYyOC40ODI0MjE4NzUsIDU3LjU3NDk5Njk0ODI0MiwgLSA2NjE4LjM0ODE0NDUzMTMpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTQyNSkgb3IgKHYxOTcgPD0gMTQ0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNlYSBTb2xkaWVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU2VhIFNvbGRpZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRm9yZ290dGVuUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTZWEgU29sZGllciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMzA1NC41ODI3NjM2NzE5LCAyMzYuODcyMTMxMzQ3NjYsIC0gMTAxNDcuNzkwMDM5MDYzKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDMxODUuMDE1MzgwODU5NCwgNTguNzg5MDg5MjAyODgxLCAtIDk2NjMuNjA2NDQ1MzEyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA+PSAxNDUwKSBvciAoU2VsZWN0TW9uc3RlciA9PSAiV2F0ZXIgRmlnaHRlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIldhdGVyIEZpZ2h0ZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRm9yZ290dGVuUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJXYXRlciBGaWdodGVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAzMDU0LjU4Mjc2MzY3MTksIDIzNi44NzIxMzEzNDc2NiwgLSAxMDE0Ny43OTAwMzkwNjMpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMzI2Mi45MzAxNzU3ODEzLCAyOTguNjkwMzY4NjUyMzQsIC0gMTA1NTIuNTI5Mjk2ODc1KTsKICAgICAgICBlbmQKICAgIGVuZAogICAgaWYgU2VhMyB0aGVuCiAgICAgICAgaWYgKCh2MTk3ID09IDE1MDApIG9yICh2MTk3IDw9IDE1MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJQaXJhdGUgTWlsbGlvbmFpcmUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJQaXJhdGUgTWlsbGlvbmFpcmUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiUGlyYXRlUG9ydFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiUGlyYXRlIE1pbGxpb25haXJlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA0NTAuMTA0NjQ0Nzc1MzkwNiwgMTA3LjY4MTQ1NzUxOTUzMTI1LCA1OTUwLjcyNjA3NDIxODc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE5My45OTIyNzkwNTI3MzQzOCwgNTYuMTI1MDI2NzAyODgwODYsIDU3NTUuNzg4MDg1OTM3NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNTI1KSBvciAodjE5NyA8PSAxNTc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiUGlzdG9sIEJpbGxpb25haXJlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiUGlzdG9sIEJpbGxpb25haXJlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlBpcmF0ZVBvcnRRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlBpc3RvbCBCaWxsaW9uYWlyZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNDUwLjEwNDY0NDc3NTM5MDYsIDEwNy42ODE0NTc1MTk1MzEyNSwgNTk1MC43MjYwNzQyMTg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxODguMTQ0NjIyODAyNzM0MzgsIDg0LjQ5NjEzMTg5Njk3MjY2LCA2MzM3LjA0MTk5MjE4NzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTU3NSkgb3IgKHYxOTcgPD0gMTU5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkRyYWdvbiBDcmV3IFdhcnJpb3IiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJEcmFnb24gQ3JldyBXYXJyaW9yIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkRyYWdvbkNyZXdRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkRyYWdvbiBDcmV3IFdhcnJpb3IiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg2NzM1LjExMDgzOTg0Mzc1LCAxMjYuOTkwNDYzMjU2ODM1OTQsIC0gNzExLjA5Nzk2MTQyNTc4MTIpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDY2MTUuMjMzMzk4NDM3NSwgNTAuODQ3Njc5MTM4MTgzNTk0LCAtIDk3OC45MzQwODIwMzEyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNjAwKSBvciAodjE5NyA8PSAxNjI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRHJhZ29uIENyZXcgQXJjaGVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRHJhZ29uIENyZXcgQXJjaGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkRyYWdvbkNyZXdRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkRyYWdvbiBDcmV3IEFyY2hlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDY3MzUuMTEwODM5ODQzNzUsIDEyNi45OTA0NjMyNTY4MzU5NCwgLSA3MTEuMDk3OTYxNDI1NzgxMik7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNjgxOC41ODkzNTU0Njg3NSwgNDgzLjcxODk5NDE0MDYyNSwgNTEyLjcyNjgwNjY0MDYyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNjI1KSBvciAodjE5NyA8PSAxNjQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiSHlkcmEgRW5mb3JjZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJIeWRyYSBFbmZvcmNlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJWZW5vbUNyZXdRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkh5ZHJhIEVuZm9yY2VyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNTQ0Ni44NzkzOTQ1MzEzLCA2MDEuNjI5NDU1NTY2NDEsIDc0OS40NTY3MjYwNzQyMik7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNDU0Ny4xMTUyMzQzNzUsIDEwMDEuNjAyMDUwNzgxMjUsIDMzNC4xOTU0NjUwODc4OTA2KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE2NTApIG9yICh2MTk3IDw9IDE2OTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJWZW5vbW91cyBBc3NhaWxhbnQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJWZW5vbW91cyBBc3NhaWxhbnQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiVmVub21DcmV3UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJWZW5vbW91cyBBc3NhaWxhbnQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg1NDQ2Ljg3OTM5NDUzMTMsIDYwMS42Mjk0NTU1NjY0MSwgNzQ5LjQ1NjcyNjA3NDIyKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg0NjM3Ljg4NTI1MzkwNjI1LCAxMDc3Ljg1NTk1NzAzMTI1LCA4ODIuNDE4Mzk1OTk2MDkzOCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNzAwKSBvciAodjE5NyA8PSAxNzI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTWFyaW5lIENvbW1vZG9yZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIk1hcmluZSBDb21tb2RvcmUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTWFyaW5lVHJlZUlzbGFuZCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIk1hcmluZSBDb21tb2RvcmUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygyMTc5Ljk4ODI4MTI1LCAyOC43MzEyMzkzMTg4NDgsIC0gNjc0MC4wNTUxNzU3ODEzKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygyMTk4LjAwNjM0NzY1NjMsIDEyOC43MTA3NTQzOTQ1MywgLSA3MTA5LjUwNDM5NDUzMTMpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTcyNSkgb3IgKHYxOTcgPD0gMTc3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk1hcmluZSBSZWFyIEFkbWlyYWwiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJNYXJpbmUgUmVhciBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIk1hcmluZVRyZWVJc2xhbmQiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJNYXJpbmUgUmVhciBBZG1pcmFsIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMjE3OS45ODgyODEyNSwgMjguNzMxMjM5MzE4ODQ4LCAtIDY3NDAuMDU1MTc1NzgxMyk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMzI5NC4zMTQyMDg5ODQ0LCAzODUuNDExMjU0ODgyODEsIC0gNzA0OC42MzQyNzczNDM4KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE3NzUpIG9yICh2MTk3IDw9IDE3OTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJGaXNobWFuIFJhaWRlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkZpc2htYW4gUmFpZGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkRlZXBGb3Jlc3RJc2xhbmQzIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRmlzaG1hbiBSYWlkZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDEwNTgyLjc1OTc2NTYyNSwgMzMxLjc4ODQ1MjE0ODQ0LCAtIDg3NTcuNjY2MDE1NjI1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDEwNTUzLjI2ODU1NDY4OCwgNTIxLjM4NDM5OTQxNDA2LCAtIDgxNzYuOTQ1ODAwNzgxMyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxODAwKSBvciAodjE5NyA8PSAxODI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRmlzaG1hbiBDYXB0YWluIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRmlzaG1hbiBDYXB0YWluIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkRlZXBGb3Jlc3RJc2xhbmQzIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRmlzaG1hbiBDYXB0YWluIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxMDU4My4wOTk2MDkzNzUsIDMzMS43ODg0NTIxNDg0NCwgLSA4NzU5LjQ2Mzg2NzE4NzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTA3ODkuNDAxMzY3MTg4LCA0MjcuMTg2MzcwODQ5NjEsIC0gOTEzMS40NDIzODI4MTI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE4MjUpIG9yICh2MTk3IDw9IDE4NDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJGb3Jlc3QgUGlyYXRlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRm9yZXN0IFBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEZWVwRm9yZXN0SXNsYW5kIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRm9yZXN0IFBpcmF0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTMyMzIuNjYyMTA5Mzc1LCAzMzIuNDAzOTYxMTgxNjQsIC0gNzYyNi40ODE5MzM1OTM4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDEzNDg5LjM5NzQ2MDkzOCwgNDAwLjMwMzQ5NzMxNDQ1LCAtIDc3NzAuMjUxOTUzMTI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE4NTApIG9yICh2MTk3IDw9IDE4OTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJNeXRob2xvZ2ljYWwgUGlyYXRlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTXl0aG9sb2dpY2FsIFBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEZWVwRm9yZXN0SXNsYW5kIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTXl0aG9sb2dpY2FsIFBpcmF0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTMyMzIuNjYyMTA5Mzc1LCAzMzIuNDAzOTYxMTgxNjQsIC0gNzYyNi40ODE5MzM1OTM4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDEzNTA4LjYxNjIxMDkzOCwgNTgyLjQ2MjI4MDI3MzQ0LCAtIDY5ODUuMzAzNzEwOTM3NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxOTAwKSBvciAodjE5NyA8PSAxOTI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiSnVuZ2xlIFBpcmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkp1bmdsZSBQaXJhdGUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRGVlcEZvcmVzdElzbGFuZDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJKdW5nbGUgUGlyYXRlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxMjY4Mi4wOTY2Nzk2ODgsIDM5MC44ODY1MzU2NDQ1MywgLSA5OTAyLjEyNDAyMzQzNzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTIyNjcuMTAzNTE1NjI1LCA0NTkuNzUyNjI0NTExNzIsIC0gMTAyNzcuMjAwMTk1MzEzKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE5MjUpIG9yICh2MTk3IDw9IDE5NzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJNdXNrZXRlZXIgUGlyYXRlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTXVza2V0ZWVyIFBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEZWVwRm9yZXN0SXNsYW5kMiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIk11c2tldGVlciBQaXJhdGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDEyNjgyLjA5NjY3OTY4OCwgMzkwLjg4NjUzNTY0NDUzLCAtIDk5MDIuMTI0MDIzNDM3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxMzI5MS41MDc4MTI1LCA1MjAuNDczMzg4NjcxODgsIC0gOTkwNC42Mzg2NzE4NzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTk3NSkgb3IgKHYxOTcgPD0gMTk5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlJlYm9ybiBTa2VsZXRvbiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlJlYm9ybiBTa2VsZXRvbiI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJIYXVudGVkUXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiUmVib3JuIFNrZWxldG9uIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA5NDgwLjgwNzYyLCAxNDIuMTMwNjYxLCA1NTY2LjM3MzA1LCAtIDAuMDA2NTU1MDMwNTksIDQuNTI5NTQyM2UtOCwgLSAwLjk5OTk3ODU0MiwgMi4wNDkyMDQ3ZS04LCAxLCA0LjUxNjIwNjhlLTgsIDAuOTk5OTc4NTQyLCAtIDIuMDE5NTU2OGUtOCwgLSAwLjAwNjU1NTAzMDU5KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDg3NjEuNzcxNDgsIDE4My40MzE3NDcsIDYxNjguMzMzMDEsIDAuOTc4MDczNTk3LCAtIDAuMDAwMDEzOTUwNzMyLCAtIDAuMjA4MjU5MDE2LCAtIDAuMDAwMDAxMDgwNzM5MywgMSwgLSAwLjAwMDA3MjA2MzAzLCAwLjIwODI1OTAxNiwgMC4wMDAwNzA3MDgwNCwgMC45NzgwNzM1OTcpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjAwMCkgb3IgKHYxOTcgPD0gMjAyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkxpdmluZyBab21iaWUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJMaXZpbmcgWm9tYmllIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkhhdW50ZWRRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJMaXZpbmcgWm9tYmllIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA5NDgwLjgwNzYyLCAxNDIuMTMwNjYxLCA1NTY2LjM3MzA1LCAtIDAuMDA2NTU1MDMwNTksIDQuNTI5NTQyM2UtOCwgLSAwLjk5OTk3ODU0MiwgMi4wNDkyMDQ3ZS04LCAxLCA0LjUxNjIwNjhlLTgsIDAuOTk5OTc4NTQyLCAtIDIuMDE5NTU2OGUtOCwgLSAwLjAwNjU1NTAzMDU5KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDEwMTAzLjc1MjksIDIzOC41NjU5NzksIDYxNzkuNzU5NzcsIDAuOTk5NDc0MjI3LCAyLjc3NTQ3MTRlLTgsIDAuMDMyNDI0MDM2NCwgLSAyLjU4MDA2MzNlLTgsIDEsIC0gNi4wNjg0ODVlLTgsIC0gMC4wMzI0MjQwMzY0LCA1Ljk4MTYzOWUtOCwgMC45OTk0NzQyMjcpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjAyNSkgb3IgKHYxOTcgPD0gMjA0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkRlbW9uaWMgU291bCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkRlbW9uaWMgU291bCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJIYXVudGVkUXVlc3QyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRGVtb25pYyBTb3VsIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA5NTE2Ljk5MzE2NDA2MjUsIDE3OC4wMDY1MTU1MDI5MywgNjA3OC40NjUzMzIwMzEzKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDk3MTIuMDMxMjUsIDIwNC42OTU4OTIzMzM5OCwgNjE5My4zMjIyNjU2MjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjA1MCkgb3IgKHYxOTcgPD0gMjA3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlBvc2Vzc2VkIE11bW15IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiUG9zZXNzZWQgTXVtbXkiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiSGF1bnRlZFF1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlBvc2Vzc2VkIE11bW15IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA5NTE2Ljk5MzE2NDA2MjUsIDE3OC4wMDY1MTU1MDI5MywgNjA3OC40NjUzMzIwMzEzKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDk1NDUuNzc2MzY3MTg3NSwgNjkuNjE5ODk1OTM1MDU5LCA2MzM5LjU2MTUyMzQzNzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjA3NSkgb3IgKHYxOTcgPD0gMjA5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlBlYW51dCBTY291dCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlBlYW51dCBTY291dCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJOdXRzSXNsYW5kUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJQZWFudXQgU2NvdXQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDIxMDUuNTMxOTgsIDM3LjI0OTU5OTUsIC0gMTAxOTUuNTA4OCwgLSAwLjc2NjA2MTY2NCwgMCwgLSAwLjY0Mjc2NzYwOCwgMCwgMSwgMCwgMC42NDI3Njc2MDgsIDAsIC0gMC43NjYwNjE2NjQpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMjE1MC41ODc4OTA2MjUsIDEyMi40OTc2NzMwMzQ2NywgLSAxMDM1OC45OTQxNDA2MjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjEwMCkgb3IgKHYxOTcgPD0gMjEyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlBlYW51dCBQcmVzaWRlbnQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJQZWFudXQgUHJlc2lkZW50IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIk51dHNJc2xhbmRRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlBlYW51dCBQcmVzaWRlbnQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDIxMDUuNTMxOTgsIDM3LjI0OTU5OTUsIC0gMTAxOTUuNTA4OCwgLSAwLjc2NjA2MTY2NCwgMCwgLSAwLjY0Mjc2NzYwOCwgMCwgMSwgMCwgMC42NDI3Njc2MDgsIDAsIC0gMC43NjYwNjE2NjQpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMjE1MC41ODc4OTA2MjUsIDEyMi40OTc2NzMwMzQ2NywgLSAxMDM1OC45OTQxNDA2MjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjEyNSkgb3IgKHYxOTcgPD0gMjE0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkljZSBDcmVhbSBDaGVmIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiSWNlIENyZWFtIENoZWYiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiSWNlQ3JlYW1Jc2xhbmRRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkljZSBDcmVhbSBDaGVmIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA4MTkuMzc2NzA5LCA2NC45MjU5Nzk2LCAtIDEwOTY3LjI4MzIsIC0gMC43NjYwNjE2NjQsIDAsIDAuNjQyNzY3NjA4LCAwLCAxLCAwLCAtIDAuNjQyNzY3NjA4LCAwLCAtIDAuNzY2MDYxNjY0KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDc4OS45NDE1MjgsIDIwOS4zODI4ODksIC0gMTEwMDkuOTgwNSwgLSAwLjA3MDMxMDE1MzEsICItMCIsIC0gMC45OTc1MjUxNTYsICItMCIsIDEuMDAwMDAwMTIsICItMCIsIDAuOTk3NTI1Mjc1LCAwLCAtIDAuMDcwMzEwMTQ1Nik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMTUwKSBvciAodjE5NyA8PSAyMTk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiSWNlIENyZWFtIENvbW1hbmRlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkljZSBDcmVhbSBDb21tYW5kZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiSWNlQ3JlYW1Jc2xhbmRRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkljZSBDcmVhbSBDb21tYW5kZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDgxOS4zNzY3MDksIDY0LjkyNTk3OTYsIC0gMTA5NjcuMjgzMiwgLSAwLjc2NjA2MTY2NCwgMCwgMC42NDI3Njc2MDgsIDAsIDEsIDAsIC0gMC42NDI3Njc2MDgsIDAsIC0gMC43NjYwNjE2NjQpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNzg5Ljk0MTUyOCwgMjA5LjM4Mjg4OSwgLSAxMTAwOS45ODA1LCAtIDAuMDcwMzEwMTUzMSwgIi0wIiwgLSAwLjk5NzUyNTE1NiwgIi0wIiwgMS4wMDAwMDAxMiwgIi0wIiwgMC45OTc1MjUyNzUsIDAsIC0gMC4wNzAzMTAxNDU2KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIyMDApIG9yICh2MTk3IDw9IDIyMjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJDb29raWUgQ3JhZnRlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkNvb2tpZSBDcmFmdGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNha2VRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJDb29raWUgQ3JhZnRlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMjAyMi4yOTg1OCwgMzYuOTI3NTg5NCwgLSAxMjAzMC45NzY2LCAtIDAuOTYxMjczOTA5LCAwLCAtIDAuMjc1NTk0NTkyLCAwLCAxLCAwLCAwLjI3NTU5NDU5MiwgMCwgLSAwLjk2MTI3MzkwOSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAyMzIxLjcxMjE2LCAzNi42OTk0ODIsIC0gMTIyMTYuNzg3MSwgLSAwLjc4MDA3NDk1NCwgMCwgMC42MjU2ODYxMDksIDAsIDEsIDAsIC0gMC42MjU2ODYxMDksIDAsIC0gMC43ODAwNzQ5NTQpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjIyNSkgb3IgKHYxOTcgPD0gMjI0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkNha2UgR3VhcmQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJDYWtlIEd1YXJkIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNha2VRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJDYWtlIEd1YXJkIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAyMDIyLjI5ODU4LCAzNi45Mjc1ODk0LCAtIDEyMDMwLjk3NjYsIC0gMC45NjEyNzM5MDksIDAsIC0gMC4yNzU1OTQ1OTIsIDAsIDEsIDAsIDAuMjc1NTk0NTkyLCAwLCAtIDAuOTYxMjczOTA5KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE0MTguMTEwMTEsIDM2LjY3MTg5NDEsIC0gMTIyNTUuNzMyNCwgMC4wNjc3ODQ0ODgyLCAwLCAwLjk5NzcwMDAzNiwgMCwgMSwgMCwgLSAwLjk5NzcwMDAzNiwgMCwgMC4wNjc3ODQ0ODgyKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIyNTApIG9yICh2MTk3IDw9IDIyNzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJCYWtpbmcgU3RhZmYiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJCYWtpbmcgU3RhZmYiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2FrZVF1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkJha2luZyBTdGFmZiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTkyOC4zMTc2MywgMzcuNzI5NjYzOCwgLSAxMjg0MC42MjYsIDAuOTUxMDY4NDAxLCAiLTAiLCAtIDAuMzA4OTgwNDY1LCAwLCAxLCAiLTAiLCAwLjMwODk4MDQ2NSwgMCwgMC45NTEwNjg0MDEpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTk4MC40Mzg0OCwgMzYuNjcxNjc2NiwgLSAxMjk4My44NDE4LCAtIDAuMjU0NDQzNzY1LCAwLCAtIDAuOTY3MDg3NTY3LCAwLCAxLCAwLCAwLjk2NzA4NzU2NywgMCwgLSAwLjI1NDQ0Mzc2NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMjc1KSBvciAodjE5NyA8PSAyMjk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiSGVhZCBCYWtlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkhlYWQgQmFrZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2FrZVF1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkhlYWQgQmFrZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE5MjguMzE3NjMsIDM3LjcyOTY2MzgsIC0gMTI4NDAuNjI2LCAwLjk1MTA2ODQwMSwgIi0wIiwgLSAwLjMwODk4MDQ2NSwgMCwgMSwgIi0wIiwgMC4zMDg5ODA0NjUsIDAsIDAuOTUxMDY4NDAxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDIyNTEuNTc5MSwgNTIuMjcxNDYxNSwgLSAxMzAzMy4zOTY1LCAtIDAuOTkxOTcxMDE2LCAwLCAtIDAuMTI2NDY2MDk1LCAwLCAxLCAwLCAwLjEyNjQ2NjA5NSwgMCwgLSAwLjk5MTk3MTAxNik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMzAwKSBvciAodjE5NyA8PSAyMzI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiQ29jb2EgV2FycmlvciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkNvY29hIFdhcnJpb3IiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2hvY1F1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkNvY29hIFdhcnJpb3IiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygyMzEuNzUsIDIzLjkwMDMwMjksIC0gMTIyMDAuMjkyLCAtIDEsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIC0gMSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMTY3Ljk3ODUxNiwgMjYuMjI1NDY1OCwgLSAxMjIzOC44NzQsIC0gMC45Mzk3MDA5NjEsIDAsIDAuMzQxOTk4MzY5LCAwLCAxLCAwLCAtIDAuMzQxOTk4MzY5LCAwLCAtIDAuOTM5NzAwOTYxKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIzMjUpIG9yICh2MTk3IDw9IDIzNDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJDaG9jb2xhdGUgQmFyIEJhdHRsZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJDaG9jb2xhdGUgQmFyIEJhdHRsZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2hvY1F1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkNob2NvbGF0ZSBCYXIgQmF0dGxlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDIzMS43NSwgMjMuOTAwMzAyOSwgLSAxMjIwMC4yOTIsIC0gMSwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgLSAxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg3MDEuMzEyMDczLCAyNS41ODI0OTg2LCAtIDEyNzA4LjIxNDgsIC0gMC4zNDIwNDI2ODUsIDAsIC0gMC45Mzk2ODQzOTEsIDAsIDEsIDAsIDAuOTM5Njg0MzkxLCAwLCAtIDAuMzQyMDQyNjg1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIzNTApIG9yICh2MTk3IDw9IDIzNzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJTd2VldCBUaGllZiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlN3ZWV0IFRoaWVmIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNob2NRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTd2VldCBUaGllZiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDE1MS4xOTgyNDIsIDIzLjg5MDcxNDYsIC0gMTI3NzQuNjE3MiwgMC40MjI1OTI5OTgsIDAsIDAuOTA2MzE5NjE4LCAwLCAxLCAwLCAtIDAuOTA2MzE5NjE4LCAwLCAwLjQyMjU5Mjk5OCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxNDAuMjU4MzAxLCAyNS41ODI0OTg2LCAtIDEyNjUyLjMxMTUsIDAuMTczNjI0MzM3LCAiLTAiLCAtIDAuOTg0ODExOTAyLCAwLCAxLCAiLTAiLCAwLjk4NDgxMTkwMiwgMCwgMC4xNzM2MjQzMzcpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjM3NSkgb3IgKHYxOTcgPD0gMjQwMCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkNhbmR5IFJlYmVsIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQ2FuZHkgUmViZWwiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2hvY1F1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkNhbmR5IFJlYmVsIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMTUxLjE5ODI0MiwgMjMuODkwNzE0NiwgLSAxMjc3NC42MTcyLCAwLjQyMjU5Mjk5OCwgMCwgMC45MDYzMTk2MTgsIDAsIDEsIDAsIC0gMC45MDYzMTk2MTgsIDAsIDAuNDIyNTkyOTk4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg0Ny45MjMxNDUzLCAyNS41ODI0OTg2LCAtIDEzMDI5LjI0MDIsIC0gMC44MTkxNTYwNTEsIDAsIC0gMC41NzM1NzEyNjUsIDAsIDEsIDAsIDAuNTczNTcxMjY1LCAwLCAtIDAuODE5MTU2MDUxKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDI0MDApIG9yICh2MTk3IDw9IDI0MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJDYW5keSBQaXJhdGUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJDYW5keSBQaXJhdGUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2FuZHlRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJDYW5keSBQaXJhdGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDExNDkuMzI4LCAxMy41NzU5MDM5LCAtIDE0NDQ1LjYxNDMsIC0gMC4xNTY0NDYwOTksIDAsIC0gMC45ODc2ODY1NzQsIDAsIDEsIDAsIDAuOTg3Njg2NTc0LCAwLCAtIDAuMTU2NDQ2MDk5KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE0MzcuNTYzNDgsIDE3LjE0ODEyODUsIC0gMTQzODUuNjkzNCwgMC4xNzM2MjQzMzcsICItMCIsIC0gMC45ODQ4MTE5MDIsIDAsIDEsICItMCIsIDAuOTg0ODExOTAyLCAwLCAwLjE3MzYyNDMzNyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyNDI1KSBvciAodjE5NyA8PSAyNDQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU25vdyBEZW1vbiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNub3cgRGVtb24iOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2FuZHlRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTbm93IERlbW9uIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxMTQ5LjMyOCwgMTMuNTc1OTAzOSwgLSAxNDQ0NS42MTQzLCAtIDAuMTU2NDQ2MDk5LCAwLCAtIDAuOTg3Njg2NTc0LCAwLCAxLCAwLCAwLjk4NzY4NjU3NCwgMCwgLSAwLjE1NjQ0NjA5OSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA5MTYuMjIyNjU2LCAxNy4xNDgxMjg1LCAtIDE0NjM4LjgxMjUsIDAuODY2MDA3MjY4LCAwLCAwLjUwMDAzMTQxMiwgMCwgMSwgMCwgLSAwLjUwMDAzMTQxMiwgMCwgMC44NjYwMDcyNjgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjQ1MCkgb3IgKHYxOTcgPD0gMjQ3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIklzbGUgT3V0bGF3IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiSXNsZSBPdXRsYXciOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiVGlraVF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIklzbGUgT3V0bGF3IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxNjU0OS44OTA2MjUsIDU1LjY4NjM1NTU5MDgyMDMxLCAtIDE3OS45MTM2MDQ3MzYzMjgxMik7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxNjE2Mi44MTkzMzU5Mzc1LCAxMS42ODYzMzc0NzEwMDgzLCAtIDk2LjQ1NDgxODcyNTU4NTk0KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDI0NzUpIG9yICh2MTk3IDw9IDI0OTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJJc2xhbmQgQm95IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiSXNsYW5kIEJveSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJUaWtpUXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiSXNsYW5kIEJveSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTY1NDkuODkwNjI1LCA1NS42ODYzNTU1OTA4MjAzMSwgLSAxNzkuOTEzNjA0NzM2MzI4MTIpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTYzNTcuMzEyNSwgMjAuNjMyODIyMDM2NzQzMTY0LCAxMDA1LjY0ODkyNTc4MTI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDI1MDApIG9yICh2MTk3IDw9IDI1MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJTdW4ta2lzc2VkIFdhcnJpb3IiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTdW4ta2lzc2VkIFdhcnJpb3IiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiVGlraVF1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlN1bi1raXNzZWQgV2FycmlvciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTY1NDEuMDIxNDg0Mzc1LCA1NC43NzA4MTI5ODgyODEyNSwgMTA1MS40NjExODE2NDA2MjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTYzNTcuMzEyNSwgMjAuNjMyODIyMDM2NzQzMTY0LCAxMDA1LjY0ODkyNTc4MTI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDI1MjUpIG9yICh2MTk3IDw9IDI1NDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJJc2xlIENoYW1waW9uIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiSXNsZSBDaGFtcGlvbiI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJUaWtpUXVlc3QyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiSXNsZSBDaGFtcGlvbiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTY1NDEuMDIxNDg0Mzc1LCA1NC43NzA4MTI5ODgyODEyNSwgMTA1MS40NjExODE2NDA2MjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTY4NDguOTQxNDA2MjUsIDIxLjY4NjMzNDYwOTk4NTM1LCAxMDQxLjQ0OTA5NjY3OTY4NzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjU1MCkgb3IgKHYxOTcgPD0gMjU3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNlcnBlbnQgSHVudGVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU2VycGVudCBIdW50ZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiVGlraVF1ZXN0MyI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlNlcnBlbnQgSHVudGVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxNjY2NS4xOTE0MDYyNSwgMTA0LjU5NjQwNTAyOTI5Njg4LCAxNTc5LjY5NDMzNTkzNzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTY2MjEuNDE0MDYyNSwgMTIxLjQwNjMxMTAzNTE1NjI1LCAxMjkwLjY4ODExMDM1MTU2MjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjU3NSkgb3IgKHYxOTcgPD0gMjU5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNrdWxsIFNsYXllciIpIG9yICh2MTk3ID09IDI2MDApKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNrdWxsIFNsYXllciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJUaWtpUXVlc3QzIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU2t1bGwgU2xheWVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxNjY2NS4xOTE0MDYyNSwgMTA0LjU5NjQwNTAyOTI5Njg4LCAxNTc5LjY5NDMzNTkzNzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTY4MTEuNTcwMzEyNSwgODQuNjI1MjQ0MTQwNjI1LCAxNTQyLjIzNTEwNzQyMTg3NSk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kCmlmIFNlYTEgdGhlbgogICAgdGFibGVNb24gPSB7CiAgICAgICAgIkJhbmRpdCIsCiAgICAgICAgIk1vbmtleSIsCiAgICAgICAgIkdvcmlsbGEiLAogICAgICAgICJQaXJhdGUiLAogICAgICAgICJCcnV0ZSIsCiAgICAgICAgIkRlc2VydCBCYW5kaXQiLAogICAgICAgICJEZXNlcnQgT2ZmaWNlciIsCiAgICAgICAgIlNub3cgQmFuZGl0IiwKICAgICAgICAiU25vd21hbiIsCiAgICAgICAgIkNoaWVmIFBldHR5IE9mZmljZXIiLAogICAgICAgICJTa3kgQmFuZGl0IiwKICAgICAgICAiRGFyayBNYXN0ZXIiLAogICAgICAgICJQcmlzb25lciIsCiAgICAgICAgIkRhbmdlcm91cyBQcmlzb25lciIsCiAgICAgICAgIlRvZ2EgV2FycmlvciIsCiAgICAgICAgIkdsYWRpYXRvciIsCiAgICAgICAgIk1pbGl0YXJ5IFNvbGRpZXIiLAogICAgICAgICJNaWxpdGFyeSBTcHkiLAogICAgICAgICJGaXNobWFuIFdhcnJpb3IiLAogICAgICAgICJGaXNobWFuIENvbW1hbmRvIiwKICAgICAgICAiR29kJ3MgR3VhcmQiLAogICAgICAgICJTaGFuZGEiLAogICAgICAgICJSb3lhbCBTcXVhZCIsCiAgICAgICAgIlJveWFsIFNvbGRpZXIiLAogICAgICAgICJHYWxsZXkgUGlyYXRlIiwKICAgICAgICAiR2FsbGV5IENhcHRhaW4iCiAgICB9OwplbHNlaWYgU2VhMiB0aGVuCiAgICB0YWJsZU1vbiA9IHsKICAgICAgICAiUmFpZGVyIiwKICAgICAgICAiTWVyY2VuYXJ5IiwKICAgICAgICAiU3dhbiBQaXJhdGUiLAogICAgICAgICJGYWN0b3J5IFN0YWZmIiwKICAgICAgICAiTWFyaW5lIExpZXV0ZW5hbnQiLAogICAgICAgICJNYXJpbmUgQ2FwdGFpbiIsCiAgICAgICAgIlpvbWJpZSIsCiAgICAgICAgIlZhbXBpcmUiLAogICAgICAgICJTbm93IFRyb29wZXIiLAogICAgICAgICJXaW50ZXIgV2FycmlvciIsCiAgICAgICAgIkxhYiBTdWJvcmRpbmF0ZSIsCiAgICAgICAgIkhvcm5lZCBXYXJyaW9yIiwKICAgICAgICAiTWFnbWEgTmluamEiLAogICAgICAgICJMYXZhIFBpcmF0ZSIsCiAgICAgICAgIlNoaXAgRGVja2hhbmQiLAogICAgICAgICJTaGlwIEVuZ2luZWVyIiwKICAgICAgICAiU2hpcCBTdGV3YXJkIiwKICAgICAgICAiU2hpcCBPZmZpY2VyIiwKICAgICAgICAiQXJjdGljIFdhcnJpb3IiLAogICAgICAgICJTbm93IEx1cmtlciIsCiAgICAgICAgIlNlYSBTb2xkaWVyIiwKICAgICAgICAiV2F0ZXIgRmlnaHRlciIKICAgIH07CmVsc2VpZiBTZWEzIHRoZW4KICAgIHRhYmxlTW9uID0gewogICAgICAgICJQaXJhdGUgTWlsbGlvbmFpcmUiLAogICAgICAgICJEcmFnb24gQ3JldyBXYXJyaW9yIiwKICAgICAgICAiRHJhZ29uIENyZXcgQXJjaGVyIiwKICAgICAgICAiSHlkcmEgRW5mb3JjZXIiLAogICAgICAgICJWZW5vbW91cyBBc3NhaWxhbnQiLAogICAgICAgICJNYXJpbmUgQ29tbW9kb3JlIiwKICAgICAgICAiTWFyaW5lIFJlYXIgQWRtaXJhbCIsCiAgICAgICAgIkZpc2htYW4gUmFpZGVyIiwKICAgICAgICAiRmlzaG1hbiBDYXB0YWluIiwKICAgICAgICAiRm9yZXN0IFBpcmF0ZSIsCiAgICAgICAgIk15dGhvbG9naWNhbCBQaXJhdGUiLAogICAgICAgICJKdW5nbGUgUGlyYXRlIiwKICAgICAgICAiTXVza2V0ZWVyIFBpcmF0ZSIsCiAgICAgICAgIlJlYm9ybiBTa2VsZXRvbiIsCiAgICAgICAgIkxpdmluZyBab21iaWUiLAogICAgICAgICJEZW1vbmljIFNvdWwiLAogICAgICAgICJQb3Nlc3NlZCBNdW1teSIsCiAgICAgICAgIlBlYW51dCBTY291dCIsCiAgICAgICAgIlBlYW51dCBQcmVzaWRlbnQiLAogICAgICAgICJJY2UgQ3JlYW0gQ2hlZiIsCiAgICAgICAgIkljZSBDcmVhbSBDb21tYW5kZXIiLAogICAgICAgICJDb29raWUgQ3JhZnRlciIsCiAgICAgICAgIkNha2UgR3VhcmQiLAogICAgICAgICJCYWtpbmcgU3RhZmYiLAogICAgICAgICJIZWFkIEJha2VyIiwKICAgICAgICAiQ29jb2EgV2FycmlvciIsCiAgICAgICAgIkNob2NvbGF0ZSBCYXIgQmF0dGxlciIsCiAgICAgICAgIlN3ZWV0IFRoaWVmIiwKICAgICAgICAiQ2FuZHkgUmViZWwiLAogICAgICAgICJDYW5keSBQaXJhdGUiLAogICAgICAgICJTbm93IERlbW9uIiwKICAgICAgICAiSXNsZSBPdXRsYXciLAogICAgICAgICJJc2xhbmQgQm95IiwKICAgICAgICAiU3VuLWtpc3NlZCBXYXJyaW9yIiwKICAgICAgICAiSXNsZSBDaGFtcGlvbiIsCiAgICAgICAgIlNlcnBlbnQgSHVudGVyIiwKICAgICAgICAiU2t1bGwgU2xheWVyIgogICAgfTsKZW5kCmlmIFNlYTEgdGhlbgogICAgQXJlYUxpc3QgPSB7CiAgICAgICAgIkp1bmdsZSIsCiAgICAgICAgIkJ1Z2d5IiwKICAgICAgICAiRGVzZXJ0IiwKICAgICAgICAiU25vdyIsCiAgICAgICAgIk1hcmluZSIsCiAgICAgICAgIlNreSIsCiAgICAgICAgIlByaXNvbiIsCiAgICAgICAgIkNvbG9zc2V1bSIsCiAgICAgICAgIk1hZ21hIiwKICAgICAgICAiRmlzaG1hbiIsCiAgICAgICAgIlNreSBJc2xhbmQiLAogICAgICAgICJGb3VudGFpbiIKICAgIH07CmVsc2VpZiBTZWEyIHRoZW4KICAgIEFyZWFMaXN0ID0gewogICAgICAgICJBcmVhIDEiLAogICAgICAgICJBcmVhIDIiLAogICAgICAgICJab21iaWUiLAogICAgICAgICJNYXJpbmUiLAogICAgICAgICJTbm93IE1vdW50YWluIiwKICAgICAgICAiSWNlIGZpcmUiLAogICAgICAgICJTaGlwIiwKICAgICAgICAiRnJvc3QiLAogICAgICAgICJGb3Jnb3R0ZW4iCiAgICB9OwplbHNlaWYgU2VhMyB0aGVuCiAgICBBcmVhTGlzdCA9IHsKICAgICAgICAiUGlyYXRlIFBvcnQiLAogICAgICAgICJBbWF6b24iLAogICAgICAgICJNYXJpbmUgVHJlZSIsCiAgICAgICAgIkRlZXAgRm9yZXN0IiwKICAgICAgICAiSGF1bnRlZCBDYXN0bGUiLAogICAgICAgICJOdXQgSXNsYW5kIiwKICAgICAgICAiSWNlIENyZWFtIElzbGFuZCIsCiAgICAgICAgIkNha2UgSXNsYW5kIiwKICAgICAgICAiQ2hvY28gSXNsYW5kIiwKICAgICAgICAiQ2FuZHkgSXNsYW5kIiwKICAgICAgICAiVGlraSBPdXRwb3N0IgogICAgfTsKZW5kCmZ1bmN0aW9uIENoZWNrQm9zc1F1ZXN0KCkKICAgIGlmIFNlYTEgdGhlbgogICAgICAgIGlmIChTZWxlY3RCb3NzID09ICJUaGUgR29yaWxsYSBLaW5nIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIlRoZSBHb3JpbGxhIEtpbmciOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJUaGUgR29ycmlsYSBLaW5nIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJKdW5nbGVRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMiwwMDBcbjcsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSAxNjAxLjY1NTM5NTUwNzgsIDM2Ljg1MjEzNDcwNDU5LCAxNTMuMzg4MDkyMDQxMDIpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDEwODguNzU5NzcsIDguMTM0NjM3ODMsIC0gNDg4LjU1OTkwNiwgLSAwLjcwNzEzNDI0NywgMCwgMC43MDcwNzkyOTEsIDAsIDEsIDAsIC0gMC43MDcwNzkyOTEsIDAsIC0gMC43MDcxMzQyNDcpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiQm9iYnkiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiQm9iYnkiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJCb2JieSI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiQnVnZ3lRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDgsMDAwXG4zNSwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDExNDAuMTc2MTQ3NDYwOSwgNC43NTIwNDk0NDYxMDYsIDM4MjcuNDA1NzYxNzE4OCk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gMTA4Ny4zNzYwOTg2MzI4LCA0Ni45NDk0MDk0ODQ4NjMsIDQwNDAuMTQ2MjQwMjM0NCk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJUaGUgU2F3IikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIlRoZSBTYXciOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJUaGUgU2F3IjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSA3ODQuODk3MTU1NzYxNzIsIDcyLjQyNzM4MzQyMjg1MiwgMTYwMy41ODIyNzUzOTA2KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIllldGkiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiWWV0aSI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIllldGkiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIlNub3dRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMTAsMDAwXG4xODAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoMTM4Ni44MDczNzMwNDY5LCA4Ny4yNzI3ODkwMDE0NjUsIC0gMTI5OC4zNTc2NjYwMTU2KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoMTIxOC43OTU2NTQyOTY5LCAxMzguMDExODQwODIwMzEsIC0gMTQ4OC4wMjYyNDUxMTcyKTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIk1vYiBMZWFkZXIiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiTW9iIExlYWRlciI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIk1vYiBMZWFkZXIiOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDI4NDQuNzMwNzEyODkwNiwgNy40MTgwNTAyODkxNTQxLCA1MzU2LjY3MjM2MzI4MTMpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiVmljZSBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIlZpY2UgQWRtaXJhbCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIlZpY2UgQWRtaXJhbCI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiTWFyaW5lUXVlc3QyIjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAyOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQxMCwwMDBcbjE4MCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDUwMzYuMjQ2NTgyMDMxMywgMjguNjc3ODM1NDY0NDc4LCA0MzI0LjU2NjQwNjI1KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSA1MDA2LjU0NTQxMDE1NjMsIDg4LjAzMjA4MTYwNDAwNCwgNDM1My4xNjIxMDkzNzUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiU2FiZXIgRXhwZXJ0IikgdGhlbgogICAgICAgICAgICBOYW1lQm9zcyA9ICJTYWJlciBFeHBlcnQiOwogICAgICAgICAgICBCb3NzTW9uID0gIlNhYmVyIEV4cGVydCI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gMTQ1OC44OTUwMiwgMjkuODg3MDMzNSwgLSA1MC42MzM1NjQpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiV2FyZGVuIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIldhcmRlbiI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIldhcmRlbiI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiSW1wZWxRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMTsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kNiwwMDBcbjg1MCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDUyNzguMDQ5MzIsIDIuMTUxNjc0NzUsIDk0NC4xMDE5MjksIDAuMjIwNTQ2OTYxLCAtIDAuMDAwMDA0NDk5NDY0LCAwLjk3NTM3NjQyNywgLSAwLjAwMDAxOTU0MTI1OCwgMSwgMC4wMDAwMDkwMzE2MjEsIC0gMC45NzUzNzY0MjcsIC0gMC4wMDAwMjEwNTE5NzYsIDAuMjIwNTQ2OTYxKTsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDUxOTEuODYxMzMsIDIuODQwMjA2ODYsIDY4Ni40Mzg3MjEsIC0gMC43MzEzODQ2MzUsIDAsIDAuNjgxOTY1MTcyLCAwLCAxLCAwLCAtIDAuNjgxOTY1MTcyLCAwLCAtIDAuNzMxMzg0NjM1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkNoaWVmIFdhcmRlbiIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJDaGllZiBXYXJkZW4iOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJDaGllZiBXYXJkZW4iOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkltcGVsUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDI7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDEwLDAwMFxuMSwwMDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldyg1MjA2LjkyNTc4LCAwLjk5Nzc1MzM4MiwgODE0Ljk3Njc0NiwgMC4zNDIwNDEzNDMsIC0gMC4wMDA2MjkxNTY3NywgMC45Mzk2ODQ3NDksIDAuMDAxOTE2NDUzOTQsIDAuOTk5OTk4MTUyLCAtIDAuMDAwMDI4MDQyMjM0LCAtIDAuOTM5NjgyOTYxLCAwLjAwMTgxMDQ1NDA2LCAwLjM0MjA0MTkzOSk7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldyg1MTkxLjg2MTMzLCAyLjg0MDIwNjg2LCA2ODYuNDM4NzIxLCAtIDAuNzMxMzg0NjM1LCAwLCAwLjY4MTk2NTE3MiwgMCwgMSwgMCwgLSAwLjY4MTk2NTE3MiwgMCwgLSAwLjczMTM4NDYzNSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJTd2FuIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIlN3YW4iOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJTd2FuIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJJbXBlbFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQxNSwwMDBcbjEsNjAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoNTMyNS4wOTYxOSwgNy4wMzkwNjU4NCwgNzE5LjU3MDY3OSwgLSAwLjMwOTA2MDgxMiwgMCwgMC45NTEwNDIyMzUsIDAsIDEsIDAsIC0gMC45NTEwNDIyMzUsIDAsIC0gMC4zMDkwNjA4MTIpOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoNTE5MS44NjEzMywgMi44NDAyMDY4NiwgNjg2LjQzODcyMSwgLSAwLjczMTM4NDYzNSwgMCwgMC42ODE5NjUxNzIsIDAsIDEsIDAsIC0gMC42ODE5NjUxNzIsIDAsIC0gMC43MzEzODQ2MzUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiTWFnbWEgQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJNYWdtYSBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiTWFnbWEgQWRtaXJhbCI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiTWFnbWFRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMTUsMDAwXG4yLDgwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDUzMTQuNjIyMDcwMzEyNSwgMTIuMjYyNDIwNjU0Mjk3LCA4NTE3LjI3OTI5Njg3NSk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gNTc2NS44OTY5NzI2NTYzLCA4Mi45MjA2NDY2Njc0OCwgODcxOC4zMDQ2ODc1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkZpc2htYW4gTG9yZCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJGaXNobWFuIExvcmQiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJGaXNobWFuIExvcmQiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkZpc2htYW5RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMTUsMDAwXG40LDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldyg2MTEyMi42NTIzNDM3NSwgMTguNDk3NDQyMjQ1NDgzLCAxNTY5LjM5OTc4MDI3MzQpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldyg2MTI2MC4xNTIzNDM3NSwgMzAuOTUwODgxOTU4MDA4LCAxMTkzLjQzMjk4MzM5ODQpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiV3lzcGVyIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIld5c3BlciI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIld5c3BlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiU2t5RXhwMVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQxNSwwMDBcbjQsODAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gNzg2MS45NDcyNjU2MjUsIDU1NDUuNTE3NTc4MTI1LCAtIDM3OS44NTk3NDEyMTA5NCk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gNzg2Ni4xMzMzMDA3ODEzLCA1NTc2LjQzMTE1MjM0MzgsIC0gNTQ2Ljc0ODE2ODk0NTMxKTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIlRodW5kZXIgR29kIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIlRodW5kZXIgR29kIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiVGh1bmRlciBHb2QiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIlNreUV4cDJRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMjAsMDAwXG41LDgwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDc5MDMuMzgyODEyNSwgNTYzNS45ODk3NDYwOTM4LCAtIDE0MTAuOTIzODI4MTI1KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSA3OTk0Ljk4NDM3NSwgNTc2MS4wMjUzOTA2MjUsIC0gMjA4OC42NDc5NDkyMTg4KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkN5Ym9yZyIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJDeWJvcmciOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJDeWJvcmciOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkZvdW50YWluUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDIwLDAwMFxuNyw1MDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoNTI1OC4yNzg4MDg1OTM4LCAzOC41MjY5MzE3NjI2OTUsIDQwNTAuMDQ0OTIxODc1KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoNjA5NC4wMjQ5MDIzNDM4LCA3My43NzAwNTAwNDg4MjgsIDM4MjUuNzM0ODYzMjgxMyk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJJY2UgQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJJY2UgQWRtaXJhbCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkljZSBBZG1pcmFsIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoMTI2Ni4wODk0OCwgMjYuMTc1Nzk0NiwgLSAxMzk5LjU3Njc4LCAtIDAuNTczNTk5MjE5LCAwLCAtIDAuODE5MTM2NTYsIDAsIDEsIDAsIDAuODE5MTM2NTYsIDAsIC0gMC41NzM1OTkyMTkpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiR3JleWJlYXJkIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkdyZXliZWFyZCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkdyZXliZWFyZCI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gNTA4MS4zNDUyMTQ4NDM4LCA4NS4yMjE2NDE1NDA1MjcsIDQyNTcuMzU4ODg2NzE4OCk7CiAgICAgICAgZW5kCiAgICBlbmQKICAgIGlmIFNlYTIgdGhlbgogICAgICAgIGlmIChTZWxlY3RCb3NzID09ICJEaWFtb25kIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkRpYW1vbmQiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJEaWFtb25kIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJBcmVhMVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQyNSwwMDBcbjksMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gNDI3LjU2NjY4MDkwODIsIDczLjMxMzc4MTczODI4MSwgMTgzNS40MjA4OTg0Mzc1KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSAxNTc2LjcxNjY3NDgwNDcsIDE5OC41OTI2NTEzNjcxOSwgMTMuNzI0Mjg2MDc5NDA3KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkplcmVteSIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJKZXJlbXkiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJKZXJlbXkiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkFyZWEyUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDI1LDAwMFxuMTEsNTAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDYzNi43OTk0Mzg0NzY1NiwgNzMuNDEzNzg3ODQxNzk3LCA5MTguMDA0MTUwMzkwNjMpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygyMDA2LjkyNjE0NzQ2MDksIDQ0OC45NTY2NjUwMzkwNiwgODUzLjk4Mjg0OTEyMTA5KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkZhaml0YSIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJGYWppdGEiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJGYWppdGEiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIk1hcmluZVF1ZXN0MyI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMjUsMDAwXG4xNSwwMDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSAyNDQxLjk4NjMyODEyNSwgNzMuMzU5MzQ0NDgyNDIyLCAtIDMyMTcuNTMyNDcwNzAzMSk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gMjE3Mi43Mzk5OTAyMzQ0LCAxMDMuMzIyMTY2NDQyODcsIC0gNDAxNS4wMjUzOTA2MjUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiRG9uIFN3YW4iKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiRG9uIFN3YW4iOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJEb24gU3dhbiI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDIyODYuMjAwNDM5NDUzMSwgMTUuMTc3ODM5Mjc5MTc1LCA4NjMuODM4ODY3MTg3NSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJTbW9rZSBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIlNtb2tlIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJTbW9rZSBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJJY2VTaWRlUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDIwLDAwMFxuMjUsMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gNTQyOS4wNDczNjMyODEzLCAxNS45Nzc1NjU3NjUzODEsIC0gNTI5Ny45NjE0MjU3ODEzKTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSA1Mjc1LjE5ODczMDQ2ODgsIDIwLjc1NzI1NzQ2MTU0OCwgLSA1MjYwLjY2Njk5MjE4NzUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiQXdha2VuZWQgSWNlIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiQXdha2VuZWQgSWNlIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJBd2FrZW5lZCBJY2UgQWRtaXJhbCI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiRnJvc3RRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMjAsMDAwXG4zNiwwMDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoNTY2OC45NzgwMjczNDM4LCAyOC41MTk5ODkwMTM2NzIsIC0gNjQ4My4zNTIwNTA3ODEzKTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoNjQwMy41NDM5NDUzMTI1LCAzNDAuMjk3NjY4NDU3MDMsIC0gNjg5NC41NTk1NzAzMTI1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIlRpZGUgS2VlcGVyIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIlRpZGUgS2VlcGVyIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiVGlkZSBLZWVwZXIiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkZvcmdvdHRlblF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQxMiw1MDBcbjM4LDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDMwNTMuOTgxNDQ1MzEyNSwgMjM3LjE4OTU0NDY3NzczLCAtIDEwMTQ1LjAzOTA2MjUpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDM3OTUuNjQyMzMzOTg0NCwgMTA1Ljg4ODc3MTA1NzEzLCAtIDExNDIxLjMwNzYxNzE4OCk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJEYXJrYmVhcmQiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiRGFya2JlYXJkIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiRGFya2JlYXJkIjsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygzNjc3LjA4MjAzMTI1LCA2Mi43NTE5Mzc4NjYyMTEsIC0gMzE0NC44MzMyNTE5NTMxKTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkN1cnNlZCBDYXB0YWluIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkN1cnNlZCBDYXB0YWluIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiQ3Vyc2VkIENhcHRhaW4iOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldyg5MTYuOTI4NTg5LCAxODEuMDkyNzczLCAzMzQyMik7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJPcmRlciIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJPcmRlciI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIk9yZGVyIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSA2MjE3LjIwMjE0ODQzNzUsIDI4LjA0NzY0NTU2ODg0OCwgLSA1MDUzLjEzNTc0MjE4NzUpOwogICAgICAgIGVuZAogICAgZW5kCiAgICBpZiBTZWEzIHRoZW4KICAgICAgICBpZiAoU2VsZWN0Qm9zcyA9PSAiU3RvbmUiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiU3RvbmUiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJTdG9uZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiUGlyYXRlUG9ydFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQyNSwwMDBcbjQwLDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDI4OS43NjcwNTkzMjYxNywgNDMuODE5MDExNjg4MjMyLCA1NTc5LjkzODQ3NjU2MjUpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDEwMjcuNjUxMjQ1MTE3MiwgOTIuNDA0MTc0ODA0Njg4LCA2NTc4Ljg1MzAyNzM0MzgpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiSHlkcmEgTGVhZGVyIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkh5ZHJhIExlYWRlciI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkh5ZHJhIExlYWRlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiVmVub21DcmV3UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDMwLDAwMFxuNTIsMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDU0NDUuOTU0MTAxNTYyNSwgNjAxLjYyOTQ1NTU2NjQxLCA3NTEuNDM3OTI3MjQ2MDkpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldyg1NTQzLjg2MzI4MTI1LCA2NjguOTczOTk5MDIzNDQsIDE5OS4wMzQxNzk2ODc1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIktpbG8gQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJLaWxvIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJLaWxvIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIk1hcmluZVRyZWVJc2xhbmQiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDM1LDAwMFxuNTYsMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDIxNzkuMzAxMDI1MzkwNiwgMjguNzMxMjM5MzE4ODQ4LCAtIDY3MzkuOTc0MTIxMDkzOCk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDI3NjQuMjIzMzg4NjcxOSwgNDMyLjQ2MTU0Nzg1MTU2LCAtIDcxNDQuNDU4MDA3ODEyNSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJDYXB0YWluIEVsZXBoYW50IikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkNhcHRhaW4gRWxlcGhhbnQiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJDYXB0YWluIEVsZXBoYW50IjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJEZWVwRm9yZXN0SXNsYW5kIjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQ0MCwwMDBcbjY3LDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDEzMjMyLjY4MjYxNzE4OCwgMzMyLjQwMzk2MTE4MTY0LCAtIDc2MjYuMDExNzE4NzUpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDEzMzc2Ljc1NzgxMjUsIDQzMy4yODY4OTU3NTE5NSwgLSA4MDcxLjM5MjU3ODEyNSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJCZWF1dGlmdWwgUGlyYXRlIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkJlYXV0aWZ1bCBQaXJhdGUiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJCZWF1dGlmdWwgUGlyYXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJEZWVwRm9yZXN0SXNsYW5kMiI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kNTAsMDAwXG43MCwwMDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSAxMjY4Mi4wOTY2Nzk2ODgsIDM5MC44ODY1MzU2NDQ1MywgLSA5OTAyLjEyNDAyMzQzNzUpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldyg1MjgzLjYwOTM3NSwgMjIuNTYyMjM0ODc4NTQsIC0gMTEwLjc4Mjg1MjE3Mjg1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkNha2UgUXVlZW4iKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiQ2FrZSBRdWVlbiI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkNha2UgUXVlZW4iOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkljZUNyZWFtSXNsYW5kUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDMwLDAwMFxuMTEyLDUwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDgxOS4zNzY3MDksIDY0LjkyNTk3OTYsIC0gMTA5NjcuMjgzMiwgLSAwLjc2NjA2MTY2NCwgMCwgMC42NDI3Njc2MDgsIDAsIDEsIDAsIC0gMC42NDI3Njc2MDgsIDAsIC0gMC43NjYwNjE2NjQpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDY3OC42NDg4MDQsIDM4MS4zNTM5NDMsIC0gMTExMTQuMjAxMiwgLSAwLjkwODY0MTgxNSwgMC4wMDE0OTI5NDMzOCwgMC40MTc1NzM3OCwgMC4wMDgzNzExNDkxOSwgMC45OTk4NTc4NDMsIDAuMDE0NjQwODkyOSwgLSAwLjQxNzQ5MjU2OCwgMC4wMTY3OTg4OTg2LCAtIDAuOTA4NTI0OTkpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiTG9uZ21hIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkxvbmdtYSI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkxvbmdtYSI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gMTAyMzguODc1OTc2NTYzLCAzODkuNzkxMjkwMjgzMiwgLSA5NTQ5Ljc5Mzk0NTMxMjUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiU291bCBSZWFwZXIiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiU291bCBSZWFwZXIiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJTb3VsIFJlYXBlciI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gOTUyNC43ODkwNjI1LCAzMTUuODA0MjkwNzcxNDgsIDY2NTUuNzE5MjM4MjgxMyk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJyaXBfaW5kcmEgVHJ1ZSBGb3JtIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gInJpcF9pbmRyYSBUcnVlIEZvcm0iOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJyaXBfaW5kcmEgVHJ1ZSBGb3JtIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSA1NDE1LjM5MjA4OTg0MzgsIDUwNS43NDEzMzMwMDc4MSwgLSAyODE0LjAxNjYwMTU2MjUpOwogICAgICAgIGVuZAogICAgZW5kCmVuZApmdW5jdGlvbiBNYXRlcmlhbE1vbigpCiAgICBpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIlJhZGlvYWN0aXZlIE1hdGVyaWFsIikgdGhlbgogICAgICAgIE1Nb24gPSAiRmFjdG9yeSBTdGFmZiI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoMjk1LCA3MywgLSA1Nik7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJNeXN0aWMgRHJvcGxldCIpIHRoZW4KICAgICAgICBNTW9uID0gIldhdGVyIEZpZ2h0ZXIiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gMzM4NSwgMjM5LCAtIDEwNTQyKTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIk1hZ21hIE9yZSIpIHRoZW4KICAgICAgICBpZiBTZWExIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJNaWxpdGFyeSBTcHkiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDU4MTUsIDg0LCA4ODIwKTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZWxzZWlmIFNlYTIgdGhlbgogICAgICAgICAgICBNTW9uID0gIk1hZ21hIE5pbmphIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSA1NDI4LCA3OCwgLSA1OTU5KTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZW5kCiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJBbmdlbCBXaW5ncyIpIHRoZW4KICAgICAgICBNTW9uID0gIkdvZCdzIEd1YXJkIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDQ2OTgsIDg0NSwgLSAxOTEyKTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KC0gNzg1OS4wOTgxNCwgNTU0NC4xOTA0MywgLSAzODEuNDc2MTk2KSkuTWFnbml0dWRlID49IDUwMDApIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA3ODU5LjA5ODE0LCA1NTQ0LjE5MDQzLCAtIDM4MS40NzYxOTYpKTsKICAgICAgICBlbmQKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIkxlYXRoZXIiKSB0aGVuCiAgICAgICAgaWYgU2VhMSB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiQnJ1dGUiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDExNDUsIDE1LCA0MzUwKTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZWxzZWlmIFNlYTIgdGhlbgogICAgICAgICAgICBNTW9uID0gIk1hcmluZSBDYXB0YWluIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSAyMDEwLjUwNTk4MTQ0NTMxMjUsIDczLjAwMTE1OTY2Nzk2ODc1LCAtIDMzMjYuNjIwODQ5NjA5Mzc1KTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZWxzZWlmIFNlYTMgdGhlbgogICAgICAgICAgICBNTW9uID0gIkp1bmdsZSBQaXJhdGUiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDExOTc1Ljc4NTE1NjI1LCAzMzEuNzczNDA2OTgyNDIxOSwgLSAxMDYyMC4wMzAyNzM0Mzc1KTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZW5kCiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJTY3JhcCBNZXRhbCIpIHRoZW4KICAgICAgICBpZiBTZWExIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJCcnV0ZSI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gMTE0NSwgMTUsIDQzNTApOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBlbHNlaWYgU2VhMiB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiU3dhbiBQaXJhdGUiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldyg4NzgsIDEyMiwgMTIzNSk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVsc2VpZiBTZWEzIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJKdW5nbGUgUGlyYXRlIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSAxMjEwNywgMzMyLCAtIDEwNTQ5KTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZW5kCiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJGaXNoIFRhaWwiKSB0aGVuCiAgICAgICAgaWYgU2VhMyB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiRmlzaG1hbiBSYWlkZXIiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDEwOTkzLCAzMzIsIC0gODk0MCk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVsc2VpZiBTZWExIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJGaXNobWFuIFdhcnJpb3IiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldyg2MTEyMywgMTksIDE1NjkpOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICAgICAgaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldyg2MTE2My44NTE1NjI1LCA1LjM0MjM0MjM3NjcwODk4NCwgMTgxOS43ODQxNzk2ODc1KSkuTWFnbml0dWRlID49IDE3MDAwKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg2MTE2My44NTE1NjI1LCA1LjM0MjM0MjM3NjcwODk4NCwgMTgxOS43ODQxNzk2ODc1KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiRGVtb25pYyBXaXNwIikgdGhlbgogICAgICAgIE1Nb24gPSAiRGVtb25pYyBTb3VsIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDk1MDcsIDE3MiwgNjE1OCk7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJWYW1waXJlIEZhbmciKSB0aGVuCiAgICAgICAgTU1vbiA9ICJWYW1waXJlIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDYwMzMsIDcsIC0gMTMxNyk7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJDb25qdXJlZCBDb2NvYSIpIHRoZW4KICAgICAgICBNTW9uID0gIkNob2NvbGF0ZSBCYXIgQmF0dGxlciI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoNjIwLjYzNDQ2MDQ0OTIxODgsIDc4LjkzNjQ0NzE0MzU1NDY5LCAtIDEyNTgxLjM2OTE0MDYyNSk7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJEcmFnb24gU2NhbGUiKSB0aGVuCiAgICAgICAgTU1vbiA9ICJEcmFnb24gQ3JldyBBcmNoZXIiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KDY4MjcuOTE0NTUwNzgxMjUsIDYwOS40MTI3MTk3MjY1NjI1LCAyNTIuMzUzODA1NTQxOTkyMik7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJHdW5wb3dkZXIiKSB0aGVuCiAgICAgICAgTU1vbiA9ICJQaXN0b2wgQmlsbGlvbmFpcmUiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gNDY5LCA3NCwgNTkwNCk7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJIeWRyYSBFbmZvcmNlciIpIHRoZW4KICAgICAgICBNTW9uID0gIkh5ZHJhIEVuZm9yY2VyIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldyg0NTgxLjUxNzU3ODEyNSwgMTAwMS41NTkwODIwMzEyNSwgNzA0LjkzNzg2NjIxMDkzNzUpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiVmVub21vdXMgQXNzYWlsYW50IikgdGhlbgogICAgICAgIE1Nb24gPSAiVmVub21vdXMgQXNzYWlsYW50IjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldyg0ODc5LjkyMDQxMDE1NjI1LCAxMDg5LjQ2MTQyNTc4MTI1LCAxMTA0LjAwODMwMDc4MTI1KTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIk1pbmkgVHVzayIpIHRoZW4KICAgICAgICBNTW9uID0gIk15dGhvbG9naWNhbCBQaXJhdGUiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KCk7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZUlzbGFuZEVTUCgpCiAgICBmb3IgdjQyNSwgdjQyNiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWydfV29ybGRPcmlnaW4nXS5Mb2NhdGlvbnM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIElzbGFuZEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjQyNi5OYW1lIH49ICJTZWEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY0MjY6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTMwID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDI2KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzAuTmFtZSA9ICJOYW1lRXNwIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzAuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzMC5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzMC5BZG9ybmVlID0gdjQyNjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzAuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTEzNiA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjExMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzNi5Gb250ID0gIkdvdGhhbUJvbGQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzNi5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzNi5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTM2LlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTM2LlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTM2LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzNi5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzNi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoOCwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NDI2WydOYW1lRXNwJ10uVGV4dExhYmVsLlRleHQgPSB2NDI2Lk5hbWUgLi4gIiAgIFxuIiAuLiByb3VuZCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDI2LlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0MjY6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICB2NDI2OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBpc25pbCh2MTk4KQogICAgcmV0dXJuIHYxOTggPT0gbmlsIDsKZW5kCmxvY2FsIGZ1bmN0aW9uIHYyMCh2MTk5KQogICAgcmV0dXJuIG1hdGguZmxvb3IodG9udW1iZXIodjE5OSkgKyAwLjUpOwplbmQKTnVtYmVyID0gbWF0aC5yYW5kb20oMSwgMTAwMDAwMCk7CmZ1bmN0aW9uIFVwZGF0ZVBsYXllckNoYW1zKCkKICAgIGZvciB2NDI3LCB2NDI4IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBub3QgaXNuaWwodjQyOC5DaGFyYWN0ZXIpIHRoZW4KICAgICAgICAgICAgICAgIGlmIEVTUFBsYXllciB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKG5vdCBpc25pbCh2NDI4LkNoYXJhY3Rlci5IZWFkKSBhbmQgbm90IHY0MjguQ2hhcmFjdGVyLkhlYWQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExNDYgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0MjguQ2hhcmFjdGVyLkhlYWQpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE0Ni5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTQ2LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNDYuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNDYuQWRvcm5lZSA9IHY0MjguQ2hhcmFjdGVyLkhlYWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTQ2LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExNTMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMTQ2KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNTMuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNTMuRm9udFNpemUgPSAiU2l6ZTEwIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNTMuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE1My5UZXh0ID0gdjQyOC5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDI4LkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTUzLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTUzLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTUzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE1My5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQyOC5UZWFtID09IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5UZWFtKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTE1My5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygwLCAwLCAyNTQpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTE1My5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygyNTUsIDAsIDApOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0MjguQ2hhcmFjdGVyLkhlYWRbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQyOC5OYW1lIC4uICIgfCAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDI4LkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlXG5IZWFsdGggOiAiIC4uIHYyMCgodjQyOC5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoICogMTAwKSAvIHY0MjguQ2hhcmFjdGVyLkh1bWFub2lkLk1heEhlYWx0aCkgLi4gIiUiIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiB2NDI4LkNoYXJhY3Rlci5IZWFkOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NDI4LkNoYXJhY3Rlci5IZWFkOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVDaGVzdENoYW1zKCkKICAgIGZvciB2NDI5LCB2NDMwIGluIHBhaXJzKGdhbWUuV29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2NDMwLk5hbWUsICJDaGVzdCIpIHRoZW4KICAgICAgICAgICAgICAgIGlmIENoZXN0RVNQIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2NDMwLk5hbWUsICJDaGVzdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY0MzA6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE0NzUgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0MzApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NzUuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NzUuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NzUuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDc1LkFkb3JuZWUgPSB2NDMwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NzUuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE0ODEgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxNDc1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDgxLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDgxLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDgxLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQzMC5OYW1lID09ICJDaGVzdDEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEwOSwgMTA5LCAxMDkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDgxLlRleHQgPSAiQ2hlc3QgMSIgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzAuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0MzAuTmFtZSA9PSAiQ2hlc3QyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDgxLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxNzMsIDE1OCwgMjEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDgxLlRleHQgPSAiQ2hlc3QgMiIgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzAuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0MzAuTmFtZSA9PSAiQ2hlc3QzIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDgxLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4NSwgMjU1LCAyNTUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDgxLlRleHQgPSAiQ2hlc3QgMyIgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzAuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NDMwWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0MzAuTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDMwLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIHY0MzA6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIHY0MzA6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZURldmlsQ2hhbXMoKQogICAgZm9yIHY0MzEsIHY0MzIgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIERldmlsRnJ1aXRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodjQzMi5OYW1lLCAiRnJ1aXQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY0MzIuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExNjQgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0MzIuSGFuZGxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNjQuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE2NC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTY0LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTY0LkFkb3JuZWUgPSB2NDMyLkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNjQuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTE3MSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjExNjQpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE3MS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE3MS5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE3MS5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTcxLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTcxLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTcxLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE3MS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICB2MTE3MS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTcxLlRleHQgPSB2NDMyLk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzIuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NDMyLkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDMyLk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzMi5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQzMi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjQzMi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVGbG93ZXJDaGFtcygpCiAgICBmb3IgdjQzMywgdjQzNCBpbiBwYWlycyhnYW1lLldvcmtzcGFjZTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgKCh2NDM0Lk5hbWUgPT0gIkZsb3dlcjIiKSBvciAodjQzNC5OYW1lID09ICJGbG93ZXIxIikpIHRoZW4KICAgICAgICAgICAgICAgIGlmIEZsb3dlckVTUCB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY0MzQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTE4MyA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQzNCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTgzLk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODMuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE4My5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE4My5BZG9ybmVlID0gdjQzNDsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODMuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTE4OSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjExODMpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE4OS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE4OS5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE4OS5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE4OS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICB2MTE4OS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0MzQuTmFtZSA9PSAiRmxvd2VyMSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LlRleHQgPSAiQmx1ZSBGbG93ZXIiIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDM0LlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTE4OS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMjU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NDM0Lk5hbWUgPT0gIkZsb3dlcjIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTE4OS5UZXh0ID0gIlJlZCBGbG93ZXIiIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDM0LlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTE4OS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NDM0WyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0MzQuTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDM0LlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgdjQzNDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjQzNDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlUmVhbEZydWl0Q2hhbXMoKQogICAgZm9yIHY0MzUsIHY0MzYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuQXBwbGVTcGF3bmVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjQzNjpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIGlmIFJlYWxGcnVpdEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgdjQzNi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5MDcgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0MzYuSGFuZGxlKTsKICAgICAgICAgICAgICAgICAgICB2OTA3Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICB2OTA3LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTA3LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgdjkwNy5BZG9ybmVlID0gdjQzNi5IYW5kbGU7CiAgICAgICAgICAgICAgICAgICAgdjkwNy5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjkxNCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjkwNyk7CiAgICAgICAgICAgICAgICAgICAgdjkxNC5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgIHY5MTQuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICB2OTE0LlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB2OTE0LlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjkxNC5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgIHY5MTQuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgdjkxNC5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgIHY5MTQuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjkxNC5UZXh0ID0gdjQzNi5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDM2LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHY0MzYuSGFuZGxlWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0MzYuTmFtZSAuLiAiICIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzYuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0MzYuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIHY0MzYuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGZvciB2NDM3LCB2NDM4IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLlBpbmVhcHBsZVNwYXduZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2NDM4OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgaWYgUmVhbEZydWl0RVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2NDM4LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjkyNiA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQzOC5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgIHY5MjYuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgIHY5MjYuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHY5MjYuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICB2OTI2LkFkb3JuZWUgPSB2NDM4LkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2OTI2LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTMzID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2OTI2KTsKICAgICAgICAgICAgICAgICAgICB2OTMzLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgdjkzMy5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgIHY5MzMuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHY5MzMuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTMzLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgdjkzMy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICB2OTMzLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgdjkzMy5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAxNzQsIDApOwogICAgICAgICAgICAgICAgICAgIHY5MzMuVGV4dCA9IHY0MzguTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzOC5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2NDM4LkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDM4Lk5hbWUgLi4gIiAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDM4LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDM4LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NDM4LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBmb3IgdjQzOSwgdjQ0MCBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5CYW5hbmFTcGF3bmVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjQ0MDpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIGlmIFJlYWxGcnVpdEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgdjQ0MC5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5NDUgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NDAuSGFuZGxlKTsKICAgICAgICAgICAgICAgICAgICB2OTQ1Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICB2OTQ1LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTQ1LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgdjk0NS5BZG9ybmVlID0gdjQ0MC5IYW5kbGU7CiAgICAgICAgICAgICAgICAgICAgdjk0NS5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjk1MiA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjk0NSk7CiAgICAgICAgICAgICAgICAgICAgdjk1Mi5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgIHY5NTIuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICB2OTUyLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB2OTUyLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjk1Mi5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgIHY5NTIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgdjk1Mi5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgIHY5NTIuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1MSwgMjU1LCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTUyLlRleHQgPSB2NDQwLk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDAuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjQ0MC5IYW5kbGVbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQ0MC5OYW1lIC4uICIgIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ0MC5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQ0MC5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjQ0MC5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlSXNsYW5kRVNQKCkKICAgIGZvciB2NDQxLCB2NDQyIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbJ19Xb3JsZE9yaWdpbiddLkxvY2F0aW9uczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgSXNsYW5kRVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmICh2NDQyLk5hbWUgfj0gIlNlYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQ0MjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyMDAgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NDIpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwMC5OYW1lID0gIk5hbWVFc3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwMC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjAwLlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjAwLkFkb3JuZWUgPSB2NDQyOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwMC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMjA2ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTIwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjA2LkZvbnQgPSAiR290aGFtQm9sZCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjA2LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjA2LlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDYuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDYuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDYuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjA2LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjA2LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig3LCAyMzYsIDI0MCk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NDQyWydOYW1lRXNwJ10uVGV4dExhYmVsLlRleHQgPSB2NDQyLk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ0Mi5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDQyOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgdjQ0MjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gaXNuaWwodjIwMCkKICAgIHJldHVybiB2MjAwID09IG5pbCA7CmVuZApsb2NhbCBmdW5jdGlvbiB2MjAodjIwMSkKICAgIHJldHVybiBtYXRoLmZsb29yKHRvbnVtYmVyKHYyMDEpICsgMC41KTsKZW5kCk51bWJlciA9IG1hdGgucmFuZG9tKDEsIDEwMDAwMDApOwpmdW5jdGlvbiBVcGRhdGVQbGF5ZXJDaGFtcygpCiAgICBmb3IgdjQ0MywgdjQ0NCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgbm90IGlzbmlsKHY0NDQuQ2hhcmFjdGVyKSB0aGVuCiAgICAgICAgICAgICAgICBpZiBFU1BQbGF5ZXIgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIChub3QgaXNuaWwodjQ0NC5DaGFyYWN0ZXIuSGVhZCkgYW5kIG5vdCB2NDQ0LkNoYXJhY3Rlci5IZWFkOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMjE2ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDQ0LkNoYXJhY3Rlci5IZWFkKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMTYuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIxNi5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjE2LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjE2LkFkb3JuZWUgPSB2NDQ0LkNoYXJhY3Rlci5IZWFkOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIxNi5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMjIzID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTIxNik7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjIzLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjIzLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjIzLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMjMuVGV4dCA9IHY0NDQuTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ0NC5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIyMy5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIyMy5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIyMy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMjMuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0NDQuVGVhbSA9PSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuVGVhbSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEyMjMuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMCwgMjU1LCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEyMjMuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMjU1LCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NDQ0LkNoYXJhY3Rlci5IZWFkWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0NDQuTmFtZSAuLiAiIHwgIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ0NC5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZVxuSGVhbHRoIDogIiAuLiB2MjAoKHY0NDQuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCAqIDEwMCkgLyB2NDQ0LkNoYXJhY3Rlci5IdW1hbm9pZC5NYXhIZWFsdGgpIC4uICIlIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgdjQ0NC5DaGFyYWN0ZXIuSGVhZDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjQ0NC5DaGFyYWN0ZXIuSGVhZDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlQ2hlc3RDaGFtcygpCiAgICBmb3IgdjQ0NSwgdjQ0NiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodjQ0Ni5OYW1lLCAiQ2hlc3QiKSB0aGVuCiAgICAgICAgICAgICAgICBpZiBDaGVzdEVTUCB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodjQ0Ni5OYW1lLCAiQ2hlc3QiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDQ2OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNDk3ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDQ2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDk3Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDk3LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDk3LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ5Ny5BZG9ybmVlID0gdjQ0NjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDk3LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNTAzID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTQ5Nyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUwMy5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUwMy5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUwMy5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0NDYuTmFtZSA9PSAiQ2hlc3QxIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxMDksIDEwOSwgMTA5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUwMy5UZXh0ID0gIkNoZXN0IDEiIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQ2LlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NDQ2Lk5hbWUgPT0gIkNoZXN0MiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUwMy5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTczLCAxNTgsIDIxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUwMy5UZXh0ID0gIkNoZXN0IDIiIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQ2LlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NDQ2Lk5hbWUgPT0gIkNoZXN0MyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUwMy5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoODUsIDI1NSwgMjU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUwMy5UZXh0ID0gIkNoZXN0IDMiIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQ2LlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjQ0NlsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDQ2Lk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ0Ni5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiB2NDQ2OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NDQ2OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVEZXZpbENoYW1zKCkKICAgIGZvciB2NDQ3LCB2NDQ4IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBEZXZpbEZydWl0RVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHY0NDguTmFtZSwgIkZydWl0IikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDQ4LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMjM0ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDQ4LkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjM0Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMzQuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIzNC5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIzNC5BZG9ybmVlID0gdjQ0OC5IYW5kbGU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjM0LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyNDEgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMjM0KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNDEuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNDEuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNDEuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI0MS5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI0MS5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI0MS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNDEuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNDEuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI0MS5UZXh0ID0gdjQ0OC5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQ4LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQ0OC5IYW5kbGVbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQ0OC5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDguSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0NDguSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIHY0NDguSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlRmxvd2VyQ2hhbXMoKQogICAgZm9yIHY0NDksIHY0NTAgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmICgodjQ1MC5OYW1lID09ICJGbG93ZXIyIikgb3IgKHY0NTAuTmFtZSA9PSAiRmxvd2VyMSIpKSB0aGVuCiAgICAgICAgICAgICAgICBpZiBGbG93ZXJFU1AgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDUwOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyNTMgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NTApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1My5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjUzLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTMuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTMuQWRvcm5lZSA9IHY0NTA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjUzLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyNTkgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMjUzKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTkuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTkuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTkuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTkuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTkuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NDUwLk5hbWUgPT0gIkZsb3dlcjEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5UZXh0ID0gIkJsdWUgRmxvd2VyIiAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ1MC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTkuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDI1NSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQ1MC5OYW1lID09ICJGbG93ZXIyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTkuVGV4dCA9ICJSZWQgRmxvd2VyIiAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ1MC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTkuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQ1MFsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDUwLk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ1MC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIHY0NTA6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIHY0NTA6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZVJlYWxGcnVpdENoYW1zKCkKICAgIGZvciB2NDUxLCB2NDUyIGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkFwcGxlU3Bhd25lcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY0NTI6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICBpZiBSZWFsRnJ1aXRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IHY0NTIuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTY0ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDUyLkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgdjk2NC5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgdjk2NC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjk2NC5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgIHY5NjQuQWRvcm5lZSA9IHY0NTIuSGFuZGxlOwogICAgICAgICAgICAgICAgICAgIHY5NjQuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5NzEgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHY5NjQpOwogICAgICAgICAgICAgICAgICAgIHY5NzEuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICB2OTcxLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgdjk3MS5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdjk3MS5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHY5NzEuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICB2OTcxLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgIHY5NzEuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICB2OTcxLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApOwogICAgICAgICAgICAgICAgICAgIHY5NzEuVGV4dCA9IHY0NTIuTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ1Mi5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2NDUyLkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDUyLk5hbWUgLi4gIiAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDUyLkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDUyLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NDUyLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBmb3IgdjQ1MywgdjQ1NCBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5QaW5lYXBwbGVTcGF3bmVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjQ1NDpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIGlmIFJlYWxGcnVpdEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgdjQ1NC5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5ODMgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NTQuSGFuZGxlKTsKICAgICAgICAgICAgICAgICAgICB2OTgzLk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICB2OTgzLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTgzLlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgdjk4My5BZG9ybmVlID0gdjQ1NC5IYW5kbGU7CiAgICAgICAgICAgICAgICAgICAgdjk4My5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjk5MCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjk4Myk7CiAgICAgICAgICAgICAgICAgICAgdjk5MC5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgIHY5OTAuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICB2OTkwLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB2OTkwLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjk5MC5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgIHY5OTAuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgdjk5MC5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgIHY5OTAuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMTc0LCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTkwLlRleHQgPSB2NDU0Lk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NTQuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjQ1NC5IYW5kbGVbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQ1NC5OYW1lIC4uICIgIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ1NC5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQ1NC5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjQ1NC5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgZm9yIHY0NTUsIHY0NTYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuQmFuYW5hU3Bhd25lcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY0NTY6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICBpZiBSZWFsRnJ1aXRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IHY0NTYuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTAwMiA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ1Ni5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgIHYxMDAyLk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICB2MTAwMi5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwMDIuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICB2MTAwMi5BZG9ybmVlID0gdjQ1Ni5IYW5kbGU7CiAgICAgICAgICAgICAgICAgICAgdjEwMDIuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMDA5ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTAwMik7CiAgICAgICAgICAgICAgICAgICAgdjEwMDkuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICB2MTAwOS5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgIHYxMDA5LlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB2MTAwOS5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMDA5LlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgdjEwMDkuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgdjEwMDkuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICB2MTAwOS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUxLCAyNTUsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMDA5LlRleHQgPSB2NDU2Lk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NTYuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjQ1Ni5IYW5kbGVbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQ1Ni5OYW1lIC4uICIgIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ1Ni5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQ1Ni5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjQ1Ni5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBNb2JFU1AgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY4MjIsIHY4MjMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjgyMzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY4MjM6RmluZEZpcnN0Q2hpbGQoIk1vYkVhcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzcyID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzczID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzcyLlBhcmVudCA9IHY4MjM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3Mi5aSW5kZXhCZWhhdmlvciA9IEVudW0uWkluZGV4QmVoYXZpb3IuU2libGluZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzcyLkFjdGl2ZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3Mi5OYW1lID0gIk1vYkVhcCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3Mi5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3Mi5MaWdodEluZmx1ZW5jZSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3Mi5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzIuU3R1ZHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAyLjUsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzMuUGFyZW50ID0gdjEzNzI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3My5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3My5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzczLlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3My5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3My5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoNywgMjM2LCAyNDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzMuVGV4dC5TaXplID0gMzU7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTAyMSA9IG1hdGguZmxvb3IoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHY4MjMuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjgyMy5Nb2JFYXAuVGV4dExhYmVsLlRleHQgPSB2ODIzLk5hbWUgLi4gIi0iIC4uIHYxMDIxIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBmb3IgdjgyNCwgdjgyNSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODI1OkZpbmRGaXJzdENoaWxkKCJNb2JFYXAiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHY4MjUuTW9iRWFwOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgU2VhRVNQIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2ODI2LCB2ODI3IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuU2VhQmVhc3RzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjgyNzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY4Mjc6RmluZEZpcnN0Q2hpbGQoIlNlYWVzcHMiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTM5MSA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTM5MiA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5MS5QYXJlbnQgPSB2ODI3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTEuWkluZGV4QmVoYXZpb3IgPSBFbnVtLlpJbmRleEJlaGF2aW9yLlNpYmxpbmc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5MS5BY3RpdmUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTEuTmFtZSA9ICJTZWFlc3BzIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkxLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkxLkxpZ2h0SW5mbHVlbmNlID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkxLlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5MS5TdHVkc09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDIuNSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5Mi5QYXJlbnQgPSB2MTM5MTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkyLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkyLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTIuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkyLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkyLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig3LCAyMzYsIDI0MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5Mi5UZXh0LlNpemUgPSAzNTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMDIzID0gbWF0aC5mbG9vcigoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjgyNy5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUpOwogICAgICAgICAgICAgICAgICAgICAgICB2ODI3LlNlYWVzcHMuVGV4dExhYmVsLlRleHQgPSB2ODI3Lk5hbWUgLi4gIi0iIC4uIHYxMDIzIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBmb3IgdjgyOCwgdjgyOSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLlNlYUJlYXN0czpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHY4Mjk6RmluZEZpcnN0Q2hpbGQoIlNlYWVzcHMiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHY4MjkuU2VhZXNwczpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIE5wY0VTUCB0aGVuCiAgICAgICAgICAgICAgICBmb3IgdjgzMCwgdjgzMSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk5QQ3M6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODMxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjgzMTpGaW5kRmlyc3RDaGlsZCgiTnBjRXNwZXMiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTQxMCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTQxMSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMC5QYXJlbnQgPSB2ODMxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTAuWkluZGV4QmVoYXZpb3IgPSBFbnVtLlpJbmRleEJlaGF2aW9yLlNpYmxpbmc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMC5BY3RpdmUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTAuTmFtZSA9ICJOcGNFc3BlcyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMC5MaWdodEluZmx1ZW5jZSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMC5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTAuU3R1ZHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAyLjUsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTEuUGFyZW50ID0gdjE0MTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDExLlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMS5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoNywgMjM2LCAyNDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTEuVGV4dC5TaXplID0gMzU7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTAyNSA9IG1hdGguZmxvb3IoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHY4MzEuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjgzMS5OcGNFc3Blcy5UZXh0TGFiZWwuVGV4dCA9IHY4MzEuTmFtZSAuLiAiLSIgLi4gdjEwMjUgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGZvciB2ODMyLCB2ODMzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTlBDczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHY4MzM6RmluZEZpcnN0Q2hpbGQoIk5wY0VzcGVzIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2ODMzLk5wY0VzcGVzOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmZ1bmN0aW9uIGlzbmlsKHYyMDIpCiAgICByZXR1cm4gdjIwMiA9PSBuaWwgOwplbmQKbG9jYWwgZnVuY3Rpb24gdjIwKHYyMDMpCiAgICByZXR1cm4gbWF0aC5mbG9vcih0b251bWJlcih2MjAzKSArIDAuNSk7CmVuZApOdW1iZXIgPSBtYXRoLnJhbmRvbSgxLCAxMDAwMDAwKTsKZnVuY3Rpb24gVXBkYXRlSXNsYW5kTWlyYWdlRVNQKCkKICAgIGZvciB2NDU3LCB2NDU4IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbJ19Xb3JsZE9yaWdpbiddLkxvY2F0aW9uczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgTWlyYWdlSXNsYW5kRVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmICh2NDU4Lk5hbWUgPT0gIk1pcmFnZSBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY0NTg6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMjcwID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDU4KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzAuTmFtZSA9ICJOYW1lRXNwIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzAuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI3MC5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI3MC5BZG9ybmVlID0gdjQ1ODsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzAuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTI3NiA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjEyNzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI3Ni5Gb250ID0gIkNvZGUiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI3Ni5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI3Ni5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjc2LlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjc2LlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjc2LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI3Ni5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICB2MTI3Ni5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoODAsIDI0NSwgMjQ1KTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0NThbJ05hbWVFc3AnXS5UZXh0TGFiZWwuVGV4dCA9IHY0NTguTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDU4LlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIE0iIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQ1ODpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgIHY0NTg6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZUF1cmFFU1AoKQogICAgZm9yIHY0NTksIHY0NjAgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5OUENzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBBdXJhRVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmICh2NDYwLk5hbWUgPT0gIk1hc3RlciBvZiBFbmhhbmNlbWVudCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQ2MDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyODYgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NjApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI4Ni5OYW1lID0gIk5hbWVFc3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI4Ni5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjg2LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjg2LkFkb3JuZWUgPSB2NDYwOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI4Ni5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMjkyID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTI4Nik7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjkyLkZvbnQgPSAiQ29kZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjkyLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjkyLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyOTIuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyOTIuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyOTIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjkyLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjkyLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgMjQ1LCAyNDUpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQ2MFsnTmFtZUVzcCddLlRleHRMYWJlbC5UZXh0ID0gdjQ2MC5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NjAuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgTSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDYwOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgdjQ2MDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlTFNERVNQKCkKICAgIGZvciB2NDYxLCB2NDYyIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTlBDczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgTEFERVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmICh2NDYyLk5hbWUgPT0gIkxlZ2VuZGFyeSBTd29yZCBEZWFsZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY0NjI6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzAyID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDYyKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDIuTmFtZSA9ICJOYW1lRXNwIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDIuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMwMi5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMwMi5BZG9ybmVlID0gdjQ2MjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDIuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTMwOCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjEzMDIpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMwOC5Gb250ID0gIkNvZGUiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMwOC5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMwOC5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzA4LlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzA4LlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzA4LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMwOC5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICB2MTMwOC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoODAsIDI0NSwgMjQ1KTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0NjJbJ05hbWVFc3AnXS5UZXh0TGFiZWwuVGV4dCA9IHY0NjIuTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDYyLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIE0iIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQ2MjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgIHY0NjI6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZUdlYUVTUCgpCiAgICBmb3IgdjQ2MywgdjQ2NCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5NeXN0aWNJc2xhbmQ6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIEdlYXJFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY0NjQuTmFtZSA9PSAiTWVzaFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY0NjQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzE4ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDY0KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMTguTmFtZSA9ICJOYW1lRXNwIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMTguRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMxOC5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMxOC5BZG9ybmVlID0gdjQ2NDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMTguQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTMyNCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjEzMTgpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMyNC5Gb250ID0gIkNvZGUiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMyNC5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMyNC5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzI0LlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzI0LlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzI0LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMyNC5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICB2MTMyNC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoODAsIDI0NSwgMjQ1KTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0NjRbJ05hbWVFc3AnXS5UZXh0TGFiZWwuVGV4dCA9IHY0NjQuTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDY0LlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIE0iIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQ2NDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgIHY0NjQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFR3ZWVuMih2MjA0KQogICAgbG9jYWwgdjIwNSA9ICh2MjA0LlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGU7CiAgICBsb2NhbCB2MjA2ID0gMzUwOwogICAgaWYgKHYyMDUgPj0gMzUwKSB0aGVuCiAgICAgICAgdjIwNiA9IDM1MDsKICAgIGVuZAogICAgbG9jYWwgdjIwNyA9IFR3ZWVuSW5mby5uZXcodjIwNSAvIHYyMDYsIEVudW0uRWFzaW5nU3R5bGUuTGluZWFyKTsKICAgIGxvY2FsIHYyMDggPSBnYW1lOkdldFNlcnZpY2UoIlR3ZWVuU2VydmljZSIpOkNyZWF0ZShnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQsIHYyMDcsIHsKICAgICAgICBDRnJhbWUgPSB2MjA0CiAgICB9KTsKICAgIHYyMDg6UGxheSgpOwogICAgaWYgX0cuQ2FuY2VsVHdlZW4yIHRoZW4KICAgICAgICB2MjA4OkNhbmNlbCgpOwogICAgZW5kCiAgICBfRy5DbGlwMiA9IHRydWU7CiAgICB3YWl0KHYyMDUgLyB2MjA2KTsKICAgIF9HLkNsaXAyID0gZmFsc2U7CmVuZApmdW5jdGlvbiBCVFBaKHYyMDkpCiAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gdjIwOTsKICAgIHRhc2sud2FpdCgpOwogICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHYyMDk7CmVuZApUd2VlblNwZWVkID0gMzUwOwpmdW5jdGlvbiBUd2Vlbih2MjExKQogICAgbG9jYWwgdjIxMiA9ICh2MjExLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGU7CiAgICBsb2NhbCB2MjEzID0gVHdlZW5TcGVlZDsKICAgIGlmICh2MjEyID49IDM1MCkgdGhlbgogICAgICAgIHYyMTMgPSBUd2VlblNwZWVkOwogICAgZW5kCiAgICBsb2NhbCB2MjE0ID0gVHdlZW5JbmZvLm5ldyh2MjEyIC8gdjIxMywgRW51bS5FYXNpbmdTdHlsZS5MaW5lYXIpOwogICAgbG9jYWwgdjIxNSA9IGdhbWU6R2V0U2VydmljZSgiVHdlZW5TZXJ2aWNlIik6Q3JlYXRlKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCwgdjIxNCwgewogICAgICAgIENGcmFtZSA9IHYyMTEKICAgIH0pOwogICAgdjIxNTpQbGF5KCk7CiAgICBpZiBfRy5TdG9wVHdlZW4gdGhlbgogICAgICAgIHYyMTU6Q2FuY2VsKCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIENhbmNlbFR3ZWVuKHYyMTYpCiAgICBpZiBub3QgdjIxNiB0aGVuCiAgICAgICAgX0cuU3RvcFR3ZWVuID0gdHJ1ZTsKICAgICAgICB3YWl0KCk7CiAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICB3YWl0KCk7CiAgICAgICAgX0cuU3RvcFR3ZWVuID0gZmFsc2U7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIEVxdWlwVG9vbCh2MjE3KQogICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHYyMTcpIHRoZW4KICAgICAgICBsb2NhbCB2NTcwID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHYyMTcpOwogICAgICAgIHdhaXQoKTsKICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbCh2NTcwKTsKICAgIGVuZAplbmQKc3Bhd24oZnVuY3Rpb24oKQogICAgbG9jYWwgdjIxOCA9IGdldHJhd21ldGF0YWJsZShnYW1lKTsKICAgIGxvY2FsIHYyMTkgPSB2MjE4Ll9fbmFtZWNhbGw7CiAgICBzZXRyZWFkb25seSh2MjE4LCBmYWxzZSk7CiAgICB2MjE4Ll9fbmFtZWNhbGwgPSBuZXdjY2xvc3VyZShmdW5jdGlvbiguLi4pCiAgICAgICAgbG9jYWwgdjQ2NSA9IGdldG5hbWVjYWxsbWV0aG9kKCk7CiAgICAgICAgbG9jYWwgdjQ2NiA9IHsKICAgICAgICAgICAgLi4uCiAgICAgICAgfTsKICAgICAgICBpZiAodG9zdHJpbmcodjQ2NSkgPT0gIkZpcmVTZXJ2ZXIiKSB0aGVuCiAgICAgICAgICAgIGlmICh0b3N0cmluZyh2NDY2WzFdKSA9PSAiUmVtb3RlRXZlbnQiKSB0aGVuCiAgICAgICAgICAgICAgICBpZiAoKHRvc3RyaW5nKHY0NjZbMl0pIH49ICJ0cnVlIikgYW5kICh0b3N0cmluZyh2NDY2WzJdKSB+PSAiZmFsc2UiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIF9HLlVzZVNraWxsIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUodjQ2NlsyXSkgPT0gInZlY3RvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY0NjZbMl0gPSBQb3NpdGlvblNraWxsTWFzdGVyeURldmlsRnJ1aXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY0NjZbMl0gPSBDRnJhbWUubmV3KFBvc2l0aW9uU2tpbGxNYXN0ZXJ5RGV2aWxGcnVpdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdjIxOSh1bnBhY2sodjQ2NikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIHJldHVybiB2MjE5KC4uLik7CiAgICBlbmQpOwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgKF9HLkF1dG9Fdm9SYWNlIG9yIF9HLkNhc3RsZVJhaWQgb3IgX0cuQ29sbGVjdEF6dXJlIG9yIF9HLlR3ZWVuVG9LaXRzdW5lIG9yIF9HLkdob3N0U2hpcCBvciBfRy5TaGlwIG9yIF9HLkF1dG9fSG9seV9Ub3JjaCBvciBfRy5UZWxlcG9ydFBseSBvciBfRy5BdXRvX1NlYTMgb3IgX0cuQXV0b19TZWEyIG9yIF9HLlR3ZWVuZnJ1aXQgb3IgX0cuQXV0b0Zpc2hDcmV3IG9yIF9HLkF1dG9fU2FiZXIgb3IgX0cuQXV0b1NoYXJrIG9yIF9HLkF1dG9fV2FyZGVuIG9yIF9HLkF1dG9fUmFpbmJvd0hha2kgb3IgQXV0b0Zhcm1SYWNlIG9yIF9HLkF1dG9RdWVzdFJhY2Ugb3IgQXV0b19MYXcgb3IgQXV0b1R1c2hpdGEgb3IgX0cuQXV0b0hvbHlUb3JjaCBvciBfRy5BdXRvVGVycm9yc2hhcmsgb3IgX0cuZmFybXBpcmFueWEgb3IgX0cuQXV0b19NdXNrZXRlZXJIYXQgb3IgX0cuQXV0b19PYnNlcnZhdGlvblYyIG9yIF9HLkF1dG9OZWFyIG9yIF9HLkF1dG9fUG9sZVYxIG9yIF9HLkF1dG9fQnVkZHkgb3IgX0cuRWN0b3BsYXNtIG9yIEF1dG9Fdm9SYWNlIG9yIEF1dG9CYXJ0aWxvIG9yIF9HLkF1dG9fQ2FudmFuZGVyIG9yIF9HLkF1dG9MZXZlbCBvciBfRy5BdXRvX0R1YWxLYXRhbmEgb3IgQXV0b19RdWVzdF9ZYW1hXzMgb3IgQXV0b19RdWVzdF9ZYW1hXzIgb3IgQXV0b19RdWVzdF9ZYW1hXzEgb3IgQXV0b19RdWVzdF9UdXNoaXRhXzEgb3IgQXV0b19RdWVzdF9UdXNoaXRhXzIgb3IgQXV0b19RdWVzdF9UdXNoaXRhXzMgb3IgX0cuQ2xpcDIgb3IgX0cuQXV0b19SZWdva3Ugb3IgX0cuQXV0b0JvbmUgb3IgX0cuQXV0b0JvbmVOb1F1ZXN0IG9yIF9HLkF1dG9Cb3NzIG9yIEF1dG9GYXJtTWFzRGV2aWxGcnVpdCBvciBBdXRvSGFsbG93U3ljdGhlIG9yIEF1dG9UdXNoaXRhIG9yIF9HLkNha2VQcmluY2Ugb3IgX0cuQXV0b19Ta3VsbEd1aXRhciBvciBfRy5BdXRvRmFybVN3YW4gb3IgX0cuRG91Z2hLaW5nIG9yIF9HLkF1dG9FbGl0ZW9yIG9yIEF1dG9OZXh0SXNsYW5kIG9yIE11c2tldGVlciBvciBfRy5BdXRvTWF0ZXJpYWwgb3IgQXV0b0Zhcm1SYWNlUXVlc3Qgb3IgX0cuRmFjdG9yeSBvciBfRy5BdXRvX1NhdyBvciBfRy5BdXRvRnJvemVuRGltZW5zaW9uIG9yIF9HLkF1dG9LaWxsVHJpYWwgb3IgX0cuQXV0b1VwZ3JhZGUgb3IgX0cuVHdlZW5Ub0Zyb3plbkRpbWVuc2lvbikgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0OkZpbmRGaXJzdENoaWxkKCJCb2R5Q2xpcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2ODg3ID0gSW5zdGFuY2UubmV3KCJCb2R5VmVsb2NpdHkiKTsKICAgICAgICAgICAgICAgICAgICB2ODg3Lk5hbWUgPSAiQm9keUNsaXAiOwogICAgICAgICAgICAgICAgICAgIHY4ODcuUGFyZW50ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQ7CiAgICAgICAgICAgICAgICAgICAgdjg4Ny5NYXhGb3JjZSA9IFZlY3RvcjMubmV3KDEwMDAwMCwgMTAwMDAwLCAxMDAwMDApOwogICAgICAgICAgICAgICAgICAgIHY4ODcuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLCAwLCAwKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydDpGaW5kRmlyc3RDaGlsZCgiQm9keUNsaXAiKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLlN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIChfRy5BdXRvRXZvUmFjZSBvciBfRy5BdXRvX1JhaW5ib3dIYWtpIG9yIF9HLkF1dG9fU2t1bGxHdWl0YXIgb3IgX0cuQ2FzdGxlUmFpZCBvciBfRy5Db2xsZWN0QXp1cmUgb3IgX0cuVHdlZW5Ub0tpdHN1bmUgb3IgX0cuQXV0b19TZWEzIG9yIF9HLkF1dG9fU2VhMiBvciBfRy5HaG9zdFNoaXAgb3IgX0cuU2hpcCBvciBfRy5BdXRvX0hvbHlfVG9yY2ggb3IgX0cuVGVsZXBvcnRQbHkgb3IgX0cuVHdlZW5mcnVpdCBvciBfRy5BdXRvX1NhYmVyIG9yIF9HLkF1dG9fUG9sZVYxIG9yIF9HLkF1dG9fTXVza2V0ZWVySGF0IG9yIF9HLkF1dG9GaXNoQ3JldyBvciBfRy5BdXRvU2hhcmsgb3IgQXV0b0Zhcm1SYWNlIG9yIF9HLkF1dG9RdWVzdFJhY2Ugb3IgX0cuQXV0b19XYXJkZW4gb3IgQXV0b19MYXcgb3IgX0cuQXV0b19EdWFsS2F0YW5hIG9yIEF1dG9fUXVlc3RfVHVzaGl0YV8xIG9yIEF1dG9fUXVlc3RfVHVzaGl0YV8yIG9yIEF1dG9fUXVlc3RfVHVzaGl0YV8zIG9yIEF1dG9UdXNoaXRhIG9yIF9HLkF1dG9Ib2x5VG9yY2ggb3IgX0cuQXV0b19CdWRkeSBvciBfRy5BdXRvVGVycm9yc2hhcmsgb3IgX0cuZmFybXBpcmFueWEgb3IgQXV0b19RdWVzdF9ZYW1hXzMgb3IgX0cuQXV0b19PYnNlcnZhdGlvblYyIG9yIEF1dG9fUXVlc3RfWWFtYV8yIG9yIEF1dG9fUXVlc3RfWWFtYV8xIG9yIF9HLkF1dG9OZWFyIG9yIF9HLkVjdG9wbGFzbSBvciBBdXRvRXZvUmFjZSBvciBfRy5BdXRvS2lsbFRyaWFsIG9yIEF1dG9CYXJ0aWxvIG9yIF9HLkF1dG9fUmVnb2t1IG9yIF9HLkF1dG9MZXZlbCBvciBfRy5DbGlwMiBvciBfRy5BdXRvQm9uZSBvciBfRy5BdXRvX0NhbnZhbmRlciBvciBfRy5BdXRvQm9uZU5vUXVlc3Qgb3IgX0cuQXV0b0Jvc3Mgb3IgX0cuQXV0b19TYXcgb3IgQXV0b0Zhcm1NYXNEZXZpbEZydWl0IG9yIEF1dG9IYWxsb3dTeWN0aGUgb3IgQXV0b1R1c2hpdGEgb3IgX0cuQ2FrZVByaW5jZSBvciBfRy5Eb3VnaEtpbmcgb3IgX0cuQXV0b0Zhcm1Td2FuIG9yIF9HLkF1dG9FbGl0ZW9yIG9yIEF1dG9OZXh0SXNsYW5kIG9yIE11c2tldGVlciBvciBfRy5BdXRvTWF0ZXJpYWwgb3IgX0cuRmFjdG9yeSBvciBfRy5BdXRvRnJvemVuRGltZW5zaW9uIG9yIEF1dG9GYXJtUmFjZVF1ZXN0IG9yIF9HLkF1dG9VcGdyYWRlIG9yIF9HLlR3ZWVuVG9Gcm96ZW5EaW1lbnNpb24pIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2ODM0LCB2ODM1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHY4MzU6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjgzNS5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZCk7CmVuZCk7CnRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU3R1biIpIHRoZW4KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlN0dW4uQ2hhbmdlZDpjb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU3R1biIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlN0dW4uVmFsdWUgPSAwOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpmdW5jdGlvbiBDaGVja01hdGVyaWFsKHYyMjEpCiAgICBmb3IgdjQ2NywgdjQ2OCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJnZXRJbnZlbnRvcnkiKSkgZG8KICAgICAgICBpZiAodHlwZSh2NDY4KSA9PSAidGFibGUiKSB0aGVuCiAgICAgICAgICAgIGlmICh2NDY4LlR5cGUgPT0gIk1hdGVyaWFsIikgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY0NjguTmFtZSA9PSB2MjIxKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHY0NjguQ291bnQ7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIHJldHVybiAwOwplbmQKZnVuY3Rpb24gR2V0V2VhcG9uSW52ZW50b3J5KHYyMjIpCiAgICBmb3IgdjQ2OSwgdjQ3MCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJnZXRJbnZlbnRvcnkiKSkgZG8KICAgICAgICBpZiAodHlwZSh2NDcwKSA9PSAidGFibGUiKSB0aGVuCiAgICAgICAgICAgIGlmICh2NDcwLlR5cGUgPT0gIlN3b3JkIikgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY0NzAuTmFtZSA9PSB2MjIyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIHJldHVybiBmYWxzZTsKZW5kCmxvY2FsIHYyMSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjsKZnVuY3Rpb24gRmluZEVuZW1pZXNJblJhbmdlKHYyMjMsIHYyMjQpCiAgICBsb2NhbCB2MjI1ID0gKHYyMS5DaGFyYWN0ZXIgb3IgdjIxLkNoYXJhY3RlckFkZGVkOldhaXQoKSk6R2V0UGl2b3QoKS5Qb3NpdGlvbjsKICAgIGxvY2FsIHYyMjYgPSBuaWw7CiAgICBmb3IgdjQ3MSwgdjQ3MiBpbiBpcGFpcnModjIyNCkgZG8KICAgICAgICBpZiAobm90IHY0NzI6R2V0QXR0cmlidXRlKCJJc0JvYXQiKSBhbmQgdjQ3MjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikgYW5kICh2NDcyLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY2NzEgPSB2NDcyOkZpbmRGaXJzdENoaWxkKCJIZWFkIik7CiAgICAgICAgICAgIGlmICh2NjcxIGFuZCAoKHYyMjUgLSB2NjcxLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNjApKSB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjQ3MiB+PSB2MjEuQ2hhcmFjdGVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHYyMjMsIHsKICAgICAgICAgICAgICAgICAgICAgICAgdjQ3MiwKICAgICAgICAgICAgICAgICAgICAgICAgdjY3MQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHYyMjYgPSB2NjcxOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBmb3IgdjQ3MywgdjQ3NCBpbiBpcGFpcnMoZ2FtZS5QbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICBpZiAodjQ3NC5DaGFyYWN0ZXIgYW5kICh2NDc0IH49IHYyMSkpIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjY3MiA9IHY0NzQuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIZWFkIik7CiAgICAgICAgICAgIGlmICh2NjcyIGFuZCAoKHYyMjUgLSB2NjcyLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNjApKSB0aGVuCiAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQodjIyMywgewogICAgICAgICAgICAgICAgICAgIHY0NzQuQ2hhcmFjdGVyLAogICAgICAgICAgICAgICAgICAgIHY2NzIKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdjIyNiA9IHY2NzI7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICByZXR1cm4gdjIyNjsKZW5kCmZ1bmN0aW9uIEdldEVxdWlwcGVkVG9vbCgpCiAgICBsb2NhbCB2MjI3ID0gdjIxLkNoYXJhY3RlcjsKICAgIGlmIG5vdCB2MjI3IHRoZW4KICAgICAgICByZXR1cm4gbmlsOwogICAgZW5kCiAgICBmb3IgdjQ3NSwgdjQ3NiBpbiBpcGFpcnModjIyNzpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY0NzY6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICByZXR1cm4gdjQ3NjsKICAgICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIG5pbDsKZW5kCmZ1bmN0aW9uIEF0dGFja05vQ29vbERvd24oKQogICAgbG9jYWwgdjIyOCA9IHt9OwogICAgbG9jYWwgdjIyOSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpOwogICAgbG9jYWwgdjIzMCA9IEZpbmRFbmVtaWVzSW5SYW5nZSh2MjI4LCB2MjI5KTsKICAgIGlmIG5vdCB2MjMwIHRoZW4KICAgICAgICByZXR1cm47CiAgICBlbmQKICAgIGxvY2FsIHYyMzEgPSBHZXRFcXVpcHBlZFRvb2woKTsKICAgIGlmIG5vdCB2MjMxIHRoZW4KICAgICAgICByZXR1cm47CiAgICBlbmQKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB2NDc3ID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOwogICAgICAgIGxvY2FsIHY0NzggPSB2NDc3OldhaXRGb3JDaGlsZCgiTW9kdWxlcyIpOldhaXRGb3JDaGlsZCgiTmV0Iik6V2FpdEZvckNoaWxkKCJSRS9SZWdpc3RlckF0dGFjayIpOwogICAgICAgIGxvY2FsIHY0NzkgPSB2NDc3OldhaXRGb3JDaGlsZCgiTW9kdWxlcyIpOldhaXRGb3JDaGlsZCgiTmV0Iik6V2FpdEZvckNoaWxkKCJSRS9SZWdpc3RlckhpdCIpOwogICAgICAgIGlmICgjIHYyMjggPiAwKSB0aGVuCiAgICAgICAgICAgIHY0Nzg6RmlyZVNlcnZlcigxZS05KTsKICAgICAgICAgICAgdjQ3OTpGaXJlU2VydmVyKHYyMzAsIHYyMjgpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgdGFzay53YWl0KDFlLTkpOwogICAgICAgIGVuZAogICAgZW5kKTsKZW5kClR5cGUgPSAxOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiAoVHlwZSA9PSAxKSB0aGVuCiAgICAgICAgICAgIFBvcyA9IENGcmFtZS5uZXcoMCwgNDAsIDApOwogICAgICAgIGVsc2VpZiAoVHlwZSA9PSAyKSB0aGVuCiAgICAgICAgICAgIFBvcyA9IENGcmFtZS5uZXcoLSA0MCwgNDAsIDApOwogICAgICAgIGVsc2VpZiAoVHlwZSA9PSAzKSB0aGVuCiAgICAgICAgICAgIFBvcyA9IENGcmFtZS5uZXcoNDAsIDQwLCAwKTsKICAgICAgICBlbHNlaWYgKFR5cGUgPT0gNCkgdGhlbgogICAgICAgICAgICBQb3MgPSBDRnJhbWUubmV3KDAsIDQwLCA0MCk7CiAgICAgICAgZWxzZWlmIChUeXBlID09IDUpIHRoZW4KICAgICAgICAgICAgUG9zID0gQ0ZyYW1lLm5ldygwLCA0MCwgLSA0MCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgVHlwZSA9IDE7CiAgICAgICAgd2FpdCgwLjIpOwogICAgICAgIFR5cGUgPSAyOwogICAgICAgIHdhaXQoMC4yKTsKICAgICAgICBUeXBlID0gMzsKICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgVHlwZSA9IDQ7CiAgICAgICAgd2FpdCgwLjIpOwogICAgICAgIFR5cGUgPSA1OwogICAgICAgIHdhaXQoMC4yKTsKICAgIGVuZAplbmQpOwpmdW5jdGlvbiBBdXRvSGFraSgpCiAgICBpZiBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIYXNCdXNvIikgdGhlbgogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1c28iKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gdG8odjIzMikKICAgIHJlcGVhdAogICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNSk7CiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHYyMzI7CiAgICAgICAgdGFzay53YWl0KCk7CiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHYyMzI7CiAgICB1bnRpbCAodjIzMi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDIwMDAKZW5kCmZ1bmN0aW9uIHRvKHYyMzMpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgaWYgKCgodjIzMy5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID49IDIwMDApIGFuZCBub3QgQXV0b19SYWlkIGFuZCAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICBpZiAoTmFtZU1vbiA9PSAiRmlzaG1hblF1ZXN0IikgdGhlbgogICAgICAgICAgICAgICAgVHdlZW4oZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg2MTE2My44NTE1NjI1LCAxMS42Nzk2ODc1LCAxODE5Ljc4NDE3OTY4NzUpKTsKICAgICAgICAgICAgZWxzZWlmIChNb24gPT0gIkdvZCdzIEd1YXJkIikgdGhlbgogICAgICAgICAgICAgICAgVHdlZW4oZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDQ2MDcuODIyNzUsIDg3Mi41NDI0OCwgLSAxNjY3LjU1Njg4KSk7CiAgICAgICAgICAgIGVsc2VpZiAoTmFtZU1vbiA9PSAiU2t5RXhwMVF1ZXN0IikgdGhlbgogICAgICAgICAgICAgICAgVHdlZW4oZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDc4OTQuNjE3Njc1NzgxMywgNTU0Ny4xNDE2MDE1NjI1LCAtIDM4MC4yOTExOTg3MzA0NykpOwogICAgICAgICAgICBlbHNlaWYgKE5hbWVNb24gPT0gIlNoaXBRdWVzdDEiKSB0aGVuCiAgICAgICAgICAgICAgICBUd2VlbihnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDkyMy4yMTI1MjQ0MTQwNiwgMTI2Ljk3NjAwNTU1NDIsIDMyODUyLjgzMjAzMTI1KSk7CiAgICAgICAgICAgIGVsc2VpZiAoTmFtZU1vbiA9PSAiU2hpcFF1ZXN0MiIpIHRoZW4KICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoOTIzLjIxMjUyNDQxNDA2LCAxMjYuOTc2MDA1NTU0MiwgMzI4NTIuODMyMDMxMjUpKTsKICAgICAgICAgICAgZWxzZWlmIChOYW1lTW9uID09ICJGcm9zdFF1ZXN0IikgdGhlbgogICAgICAgICAgICAgICAgVHdlZW4oZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDY1MDguNTU4MTA1NDY4OCwgODkuMDM0OTk2MDMyNzE1LCAtIDEzMi44Mzk1Mzg1NzQyMikpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSB2MjMzOwogICAgICAgICAgICAgICAgICAgIHdhaXQoMC4wNSk7CiAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gdjIzMzsKICAgICAgICAgICAgICAgIHVudGlsICgodjIzMy5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMjUwMCkgYW5kIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCA+IDApCiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kCmxvY2FsIHYyMiA9IEluc3RhbmNlLm5ldygiU2NyZWVuR3VpIik7CmxvY2FsIHYyMyA9IEluc3RhbmNlLm5ldygiSW1hZ2VCdXR0b24iKTsKbG9jYWwgdjI0ID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpOwpsb2NhbCB2MjUgPSBJbnN0YW5jZS5uZXcoIlBhcnRpY2xlRW1pdHRlciIpOwpsb2NhbCB2MjYgPSBnYW1lOkdldFNlcnZpY2UoIlR3ZWVuU2VydmljZSIpOwp2MjIuUGFyZW50ID0gZ2FtZS5Db3JlR3VpOwp2MjIuWkluZGV4QmVoYXZpb3IgPSBFbnVtLlpJbmRleEJlaGF2aW9yLlNpYmxpbmc7CnYyMy5QYXJlbnQgPSB2MjI7CnYyMy5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMCk7CnYyMy5Cb3JkZXJTaXplUGl4ZWwgPSAwOwp2MjMuUG9zaXRpb24gPSBVRGltMi5uZXcoMC4xMjA4MzMzMzcgLSAwLjEsIDAsIDAuMDk1Mjg5MDgxMyArIDAuMDEsIDApOwp2MjMuU2l6ZSA9IFVEaW0yLm5ldygwLCA1MCwgMCwgNTApOwp2MjMuRHJhZ2dhYmxlID0gdHJ1ZTsKdjIzLkltYWdlID0gImh0dHA6Ly93d3cucm9ibG94LmNvbS9hc3NldC8/aWQ9OTAzNzY3NzI0MDY4MTciOwp2MjQuUGFyZW50ID0gdjIzOwp2MjQuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgMTIpOwp2MjUuUGFyZW50ID0gdjIzOwp2MjUuTGlnaHRFbWlzc2lvbiA9IDE7CnYyNS5TaXplID0gTnVtYmVyU2VxdWVuY2UubmV3KHsKICAgIE51bWJlclNlcXVlbmNlS2V5cG9pbnQubmV3KDAsIDAuMSksCiAgICBOdW1iZXJTZXF1ZW5jZUtleXBvaW50Lm5ldygxLCAwKQp9KTsKdjI1LkxpZmV0aW1lID0gTnVtYmVyUmFuZ2UubmV3KDAuNSwgMSk7CnYyNS5SYXRlID0gMDsKdjI1LlNwZWVkID0gTnVtYmVyUmFuZ2UubmV3KDUsIDEwKTsKdjI1LkNvbG9yID0gQ29sb3JTZXF1ZW5jZS5uZXcoQ29sb3IzLmZyb21SR0IoMjU1LCA4NSwgMjU1KSwgQ29sb3IzLmZyb21SR0IoODUsIDI1NSwgMjU1KSk7CmxvY2FsIHY0NyA9IHYyNjpDcmVhdGUodjIzLCBUd2VlbkluZm8ubmV3KDAuNSwgRW51bS5FYXNpbmdTdHlsZS5RdWFkLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpLCB7CiAgICBSb3RhdGlvbiA9IDM2MAp9KTsKdjIzLk1vdXNlQnV0dG9uMURvd246Q29ubmVjdChmdW5jdGlvbigpCiAgICB2MjUuUmF0ZSA9IDEwMDsKICAgIHRhc2suZGVsYXkoMSwgZnVuY3Rpb24oKQogICAgICAgIHYyNS5SYXRlID0gMDsKICAgIGVuZCk7CiAgICB2NDc6UGxheSgpOwogICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIEVudW0uS2V5Q29kZS5FbmQsIGZhbHNlLCBnYW1lKTsKICAgIHY0Ny5Db21wbGV0ZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgdjIzLlJvdGF0aW9uID0gMDsKICAgIGVuZCk7CiAgICBsb2NhbCB2MjM1ID0gdjI2OkNyZWF0ZSh2MjMsIFR3ZWVuSW5mby5uZXcoMC4yLCBFbnVtLkVhc2luZ1N0eWxlLkJvdW5jZSwgRW51bS5FYXNpbmdEaXJlY3Rpb24uT3V0KSwgewogICAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgNjAsIDAsIDYwKQogICAgfSk7CiAgICB2MjM1OlBsYXkoKTsKICAgIHYyMzUuQ29tcGxldGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHY0ODMgPSB2MjY6Q3JlYXRlKHYyMywgVHdlZW5JbmZvLm5ldygwLjIsIEVudW0uRWFzaW5nU3R5bGUuQm91bmNlLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpLCB7CiAgICAgICAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgNTAsIDAsIDUwKQogICAgICAgIH0pOwogICAgICAgIHY0ODM6UGxheSgpOwogICAgZW5kKTsKZW5kKTsKaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLkVmZmVjdC5Db250YWluZXI6RmluZEZpcnN0Q2hpbGQoIkRlYXRoIikgdGhlbgogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLkVmZmVjdC5Db250YWluZXIuRGVhdGg6RGVzdHJveSgpOwplbmQKaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLkVmZmVjdC5Db250YWluZXI6RmluZEZpcnN0Q2hpbGQoIlJlc3Bhd24iKSB0aGVuCiAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuRWZmZWN0LkNvbnRhaW5lci5SZXNwYXduOkRlc3Ryb3koKTsKZW5kCnYxNi5Ib21lOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJZb3V0dWJlIiwKICAgIERlc2NyaXB0aW9uID0gIlThuqFpIMSQw6J5IiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIHNldGNsaXBib2FyZCgiaHR0cHM6Ly93d3cueW91dHViZS5jb20vQFB1SW9zRHpzbzF2biIpOwogICAgZW5kCn0pOwpfRy5GYXN0QXR0YWNrU3RyaXhfTW9kZSA9ICJTdXBlciBGYXN0IEF0dGFjayI7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkZhc3RBdHRhY2tTdHJpeF9Nb2RlIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgKF9HLkZhc3RBdHRhY2tTdHJpeF9Nb2RlID09ICJTdXBlciBGYXN0IEF0dGFjayIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBfRy5GYXN0X0RlbGF5ID0gMWUtOTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY0OCA9IHYxNi5NYWluOkFkZERyb3Bkb3duKCJEcm9wZG93blNlbGVjdFdlYXBvbiIsIHsKICAgIFRpdGxlID0gIlbFqSBLaMOtIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZXMgPSB7CiAgICAgICAgIk1lbGVlIiwKICAgICAgICAiU3dvcmQiLAogICAgICAgICJCbG94IEZydWl0cyIKICAgIH0sCiAgICBNdWx0aSA9IGZhbHNlLAogICAgRGVmYXVsdCA9IDEKfSk7CnY0ODpTZXRWYWx1ZSgiTWVsZWUiKTsKdjQ4Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjM2KQogICAgQ2hvb3NlV2VhcG9uID0gdjIzNjsKZW5kKTsKdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIChDaG9vc2VXZWFwb24gPT0gIk1lbGVlIikgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY4MzYsIHY4MzcgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHY4MzcuVG9vbFRpcCA9PSAiTWVsZWUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCh0b3N0cmluZyh2ODM3Lk5hbWUpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWxlY3RXZWFwb24gPSB2ODM3Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiAoQ2hvb3NlV2VhcG9uID09ICJTd29yZCIpIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2MTAyOCwgdjEwMjkgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDI5LlRvb2xUaXAgPT0gIlN3b3JkIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQodG9zdHJpbmcodjEwMjkuTmFtZSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdFdlYXBvbiA9IHYxMDI5Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiAoQ2hvb3NlV2VhcG9uID09ICJCbG94IEZydWl0IikgdGhlbgogICAgICAgICAgICAgICAgZm9yIHYxNDMwLCB2MTQzMSBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiAodjE0MzEuVG9vbFRpcCA9PSAiQmxveCBGcnVpdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHRvc3RyaW5nKHYxNDMxLk5hbWUpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWxlY3RXZWFwb24gPSB2MTQzMS5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHY0OSA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlTGV2ZWwiLCB7CiAgICBUaXRsZSA9ICJDw6B5IEPhuqVwIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY0OTpPbkNoYW5nZWQoZnVuY3Rpb24odjIzNykKICAgIF9HLkF1dG9MZXZlbCA9IHYyMzc7CiAgICBpZiAodjIzNyA9PSBmYWxzZSkgdGhlbgogICAgICAgIHdhaXQoKTsKICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgIHdhaXQoKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlTGV2ZWw6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9MZXZlbCB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIENoZWNrTGV2ZWwoKTsKICAgICAgICAgICAgICAgIGlmIChub3Qgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgTmFtZU1vbikgb3IgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gZmFsc2UpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWJhbmRvblF1ZXN0Iik7CiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lUSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKChDRnJhbWVRLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA1KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0YXJ0UXVlc3QiLCBOYW1lUXVlc3QsIFF1ZXN0THYpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIChzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCBOYW1lTW9uKSBvciAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSB0cnVlKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTQzMiwgdjE0MzMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQzMzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjE0MzM6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxNDMzLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0MzMuTmFtZSA9PSBNcykgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDMzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzMuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDMzLkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzMuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzMuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzMuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTQzMy5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNDMzLk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9MZXZlbCBvciBub3QgdjE0MzMuUGFyZW50IG9yICh2MTQzMy5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2MTQzMy5OYW1lKSBvciAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBmb3IgdjE0MzQsIHYxNDM1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbJ19Xb3JsZE9yaWdpbiddLkVuZW15U3Bhd25zOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHYxNDM1Lk5hbWUsIE5hbWVNb24pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjE0MzUuUG9zaXRpb24pLk1hZ25pdHVkZSA+PSAxMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDM1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY1MCA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlTW9iQXVyYSIsIHsKICAgIFRpdGxlID0gIsSQ4bqlbSBRdcOhaSBH4bqnbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NTA6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyMzgpCiAgICBfRy5BdXRvTmVhciA9IHYyMzg7CiAgICBpZiAodjIzOCA9PSBmYWxzZSkgdGhlbgogICAgICAgIHdhaXQoKTsKICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgIHdhaXQoKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlTW9iQXVyYTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9OZWFyIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgZm9yIHY4MzgsIHY4MzkgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmICh2ODM5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2ODM5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2ODM5Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY4MzkuTmFtZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHY4Mzk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKS5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDUwMDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2ODM5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjgzOS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjgzOS5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4MzkuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjgzOS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODM5Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjgzOS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHY4MzkuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b05lYXIgb3Igbm90IHY4MzkuUGFyZW50IG9yICh2ODM5Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2ODM5Lk5hbWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY1MSA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlQ2FzdGxlUmFpZCIsIHsKICAgIFRpdGxlID0gIsSQ4bqlbSBI4bqjaSBU4bq3YyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NTE6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyMzkpCiAgICBfRy5DYXN0bGVSYWlkID0gdjIzOTsKZW5kKTsKdjE3LlRvZ2dsZUNhc3RsZVJhaWQ6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5DYXN0bGVSYWlkIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgbG9jYWwgdjc2NCA9IENGcmFtZS5uZXcoLSA1NDk2LjE3NDMyLCAzMTMuNzY4OTIxLCAtIDI4NDEuNTMwMjcsIDAuOTI0ODk0NTEyLCA3LjM3MDU4ZS05LCAwLjM4MDIyMzc1MSwgMy41ODgxMDJlLTgsIDEsIC0gMS4wNjY2NTQ0NmUtNywgLSAwLjM4MDIyMzc1MSwgMS4xMjI5NzExZS03LCAwLjkyNDg5NDUxMik7CiAgICAgICAgICAgICAgICBpZiAoKENGcmFtZS5uZXcoLSA1NTM5LjMxMTUyMzQzNzUsIDMxMy44MDA1MzcxMDkzNzUsIC0gMjk3Mi4zNzIzMTQ0NTMxMjUpLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNTAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDMwLCB2MTAzMSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9HLkNhc3RsZVJhaWQgYW5kIHYxMDMxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYxMDMxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCAodjEwMzEuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjEwMzEuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMjAwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzMS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzEuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDMxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAodjEwMzEuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTAzMS5QYXJlbnQgb3Igbm90IF9HLkNhc3RsZVJhaWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBUd2Vlbih2NzY0KTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY1MiA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlSGFraUZvcnRyZXNzIiwgewogICAgVGl0bGUgPSAiQuG6rXQgSGFraSBNw6B1IFBow6FvIMSQw6BpIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY1MjpPbkNoYW5nZWQoZnVuY3Rpb24odjI0MCkKICAgIF9HLkVuYWJsZUhha2lGb3J0cmVzcyA9IHYyNDA7CmVuZCk7CnYxNy5Ub2dnbGVIYWtpRm9ydHJlc3M6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCBmdW5jdGlvbiB2NTModjI0MSwgdjI0MikKICAgIGxvY2FsIHYyNDMgPSB7CiAgICAgICAgWzFdID0gewogICAgICAgICAgICBTdG9yYWdlTmFtZSA9IHYyNDEsCiAgICAgICAgICAgIFR5cGUgPSAiQXVyYVNraW4iLAogICAgICAgICAgICBDb250ZXh0ID0gIkVxdWlwIgogICAgICAgIH0KICAgIH07CiAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuTW9kdWxlcy5OZXQ6RmluZEZpcnN0Q2hpbGQoIlJGL0ZydWl0Q3VzdG9taXplclJGIik6SW52b2tlU2VydmVyKHVucGFjayh2MjQzKSk7CiAgICBUd2VlbjIodjI0Mik7CmVuZApsb2NhbCBmdW5jdGlvbiB2NTQodjI0NCwgdjI0NSkKICAgIGxvY2FsIHYyNDYgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOwogICAgaWYgKG5vdCB2MjQ2IG9yIG5vdCB2MjQ2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikpIHRoZW4KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICBlbmQKICAgIGxvY2FsIHYyNDcgPSB2MjQ2Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb247CiAgICByZXR1cm4gKHYyNDcgLSB2MjQ0KS5NYWduaXR1ZGUgPCB2MjQ1IDsKZW5kCnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRydWUgZG8KICAgICAgICBpZiBfRy5FbmFibGVIYWtpRm9ydHJlc3MgdGhlbgogICAgICAgICAgICB2NTMoIlNub3cgV2hpdGUiLCBWZWN0b3IzLm5ldygtIDQ5NzEuNzE4MjYxNzE4NzUsIDMzNS45NTgyMjE0MzU1NDY5LCAtIDM3MjAuMDU5NTcwMzEyNSkpOwogICAgICAgICAgICB3aGlsZSBub3QgdjU0KFZlY3RvcjMubmV3KC0gNDk3MS43MTgyNjE3MTg3NSwgMzM1Ljk1ODIyMTQzNTU0NjksIC0gMzcyMC4wNTk1NzAzMTI1KSwgMSkgZG8KICAgICAgICAgICAgICAgIHdhaXQoMC4xKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgdjUzKCJQdXJlIFJlZCIsIFZlY3RvcjMubmV3KC0gNTQxNC45MjA0MTAxNTYyNSwgMzE0LjI1ODIwOTIyODUxNTYsIC0gMjIxMi4yMDE2NjAxNTYyNSkpOwogICAgICAgICAgICB3aGlsZSBub3QgdjU0KFZlY3RvcjMubmV3KC0gNTQxNC45MjA0MTAxNTYyNSwgMzE0LjI1ODIwOTIyODUxNTYsIC0gMjIxMi4yMDE2NjAxNTYyNSksIDEpIGRvCiAgICAgICAgICAgICAgICB3YWl0KDAuMSk7CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgIHY1MygiV2ludGVyIFNreSIsIFZlY3RvcjMubmV3KC0gNTQyMC4yNjMxODM1OTM3NSwgMTA4OS4zNTgyNzYzNjcxODc1LCAtIDI2NjYuODE5MzM1OTM3NSkpOwogICAgICAgICAgICB3aGlsZSBub3QgdjU0KFZlY3RvcjMubmV3KC0gNTQyMC4yNjMxODM1OTM3NSwgMTA4OS4zNTgyNzYzNjcxODc1LCAtIDI2NjYuODE5MzM1OTM3NSksIDEpIGRvCiAgICAgICAgICAgICAgICB3YWl0KDAuMSk7CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgIF9HLkVuYWJsZUhha2lGb3J0cmVzcyA9IGZhbHNlOwogICAgICAgIGVuZAogICAgICAgIHdhaXQoMC41KTsKICAgIGVuZAplbmQpOwpsb2NhbCB2NTUgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZUNvbGxlY3RDaGVzdCIsIHsKICAgIFRpdGxlID0gIkzhu6VtIFLGsMahbmciLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjU1Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjQ4KQogICAgX0cuQXV0b0NvbGxlY3RDaGVzdCA9IHYyNDg7CmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9Db2xsZWN0Q2hlc3QgdGhlbgogICAgICAgICAgICBsb2NhbCB2NjczID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik7CiAgICAgICAgICAgIGxvY2FsIHY2NzQgPSB2NjczLkxvY2FsUGxheWVyOwogICAgICAgICAgICBsb2NhbCB2Njc1ID0gdjY3NC5DaGFyYWN0ZXIgb3IgdjY3NC5DaGFyYWN0ZXJBZGRlZDpXYWl0KCkgOwogICAgICAgICAgICBsb2NhbCB2Njc2ID0gdjY3NTpHZXRQaXZvdCgpLlBvc2l0aW9uOwogICAgICAgICAgICBsb2NhbCB2Njc3ID0gZ2FtZTpHZXRTZXJ2aWNlKCJDb2xsZWN0aW9uU2VydmljZSIpOwogICAgICAgICAgICBsb2NhbCB2Njc4ID0gdjY3NzpHZXRUYWdnZWQoIl9DaGVzdFRhZ2dlZCIpOwogICAgICAgICAgICBsb2NhbCB2Njc5LCB2NjgwID0gbWF0aC5odWdlOwogICAgICAgICAgICBmb3Igdjc2NSA9IDEsICMgdjY3OCBkbwogICAgICAgICAgICAgICAgbG9jYWwgdjc2NiA9IHY2Nzhbdjc2NV07CiAgICAgICAgICAgICAgICBsb2NhbCB2NzY3ID0gKHY3NjY6R2V0UGl2b3QoKS5Qb3NpdGlvbiAtIHY2NzYpLk1hZ25pdHVkZTsKICAgICAgICAgICAgICAgIGlmIChub3Qgdjc2NjpHZXRBdHRyaWJ1dGUoIklzRGlzYWJsZWQiKSBhbmQgKHY3NjcgPCB2Njc5KSkgdGhlbgogICAgICAgICAgICAgICAgICAgIHY2NzksIHY2ODAgPSB2NzY3LCB2NzY2OwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBpZiB2NjgwIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4NDAgPSB2NjgwOkdldFBpdm90KCkuUG9zaXRpb247CiAgICAgICAgICAgICAgICBsb2NhbCB2ODQxID0gQ0ZyYW1lLm5ldyh2ODQwKTsKICAgICAgICAgICAgICAgIFR3ZWVuMih2ODQxKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjU2ID0gdjE2Lk1haW46QWRkU2VjdGlvbigiVGjDtG5nIFRo4bqhbyIpOwpsb2NhbCB2NTcgPSB2MTYuTWFpbjpBZGREcm9wZG93bigiRHJvcGRvd25NYXN0ZXJ5IiwgewogICAgVGl0bGUgPSAiQ8OgeSBUaMO0bmcgVGjhuqFvIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZXMgPSB7CiAgICAgICAgIk5lYXIgTW9icyIKICAgIH0sCiAgICBNdWx0aSA9IGZhbHNlLAogICAgRGVmYXVsdCA9IDEKfSk7CnY1NzpTZXRWYWx1ZShUeXBlTWFzdGVyeSk7CnY1NzpPbkNoYW5nZWQoZnVuY3Rpb24odjI0OSkKICAgIFR5cGVNYXN0ZXJ5ID0gdjI0OTsKZW5kKTsKbG9jYWwgdjU4ID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVNYXN0ZXJ5RnJ1aXQiLCB7CiAgICBUaXRsZSA9ICJDw6B5IFRyw6FpIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY1ODpPbkNoYW5nZWQoZnVuY3Rpb24odjI1MCkKICAgIEF1dG9GYXJtTWFzRGV2aWxGcnVpdCA9IHYyNTA7CmVuZCk7CnYxNy5Ub2dnbGVNYXN0ZXJ5RnJ1aXQ6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2NTkgPSB2MTYuTWFpbjpBZGRTbGlkZXIoIlNsaWRlckhlYWx0IiwgewogICAgVGl0bGUgPSAiTcOhdSBRdcOhaSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IDIwLAogICAgTWluID0gMCwKICAgIE1heCA9IDEwMCwKICAgIFJvdW5kaW5nID0gMSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odjI1MSkKICAgICAgICBLaWxsUGVyY2VudCA9IHYyNTE7CiAgICBlbmQKfSk7CnY1OTpPbkNoYW5nZWQoZnVuY3Rpb24odjI1MikKICAgIEtpbGxQZXJjZW50ID0gdjI1MjsKZW5kKTsKdjU5OlNldFZhbHVlKDIwKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBpZiBfRy5Vc2VTa2lsbCB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIF9HLlVzZVNraWxsIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwMzIsIHYxMDMzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxMDMzLk5hbWUgPT0gTW9uRmFybSkgYW5kIHYxMDMzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTAzMzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjEwMzMuSHVtYW5vaWQuSGVhbHRoIDw9ICgodjEwMzMuSHVtYW5vaWQuTWF4SGVhbHRoICogS2lsbFBlcmNlbnQpIC8gMTAwKSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EYXRhLkRldmlsRnJ1aXQuVmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDMzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3NpdGlvblNraWxsTWFzdGVyeURldmlsRnJ1aXQgPSB2MTAzMy5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuRGF0YS5EZXZpbEZydWl0LlZhbHVlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuRGF0YS5EZXZpbEZydWl0LlZhbHVlKS5Nb3VzZVBvcy5WYWx1ZSA9IFBvc2l0aW9uU2tpbGxNYXN0ZXJ5RGV2aWxGcnVpdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE2MDYgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkRhdGEuRGV2aWxGcnVpdC5WYWx1ZSkuTGV2ZWwuVmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTa2lsbFogYW5kICh2MTYwNiA+PSAxKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJaIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiWiIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTa2lsbFggYW5kICh2MTYwNiA+PSAyKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJYIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiWCIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTa2lsbEMgYW5kICh2MTYwNiA+PSAzKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJDIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiQyIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTa2lsbFYgYW5kICh2MTYwNiA+PSA0KSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJWIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiViIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTa2lsbEYgYW5kICh2MTYwNiA+PSA1KSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJGIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiRiIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgQXV0b0Zhcm1NYXNEZXZpbEZydWl0IG9yIG5vdCBfRy5Vc2VTa2lsbCBvciAodjEwMzMuSHVtYW5vaWQuSGVhbHRoID09IDApCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KDAuMSkgZG8KICAgICAgICBpZiAoQXV0b0Zhcm1NYXNEZXZpbEZydWl0IGFuZCAoVHlwZU1hc3RlcnkgPT0gIk5lYXIgTW9icyIpKSB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGZvciB2ODQyLCB2ODQzIGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiAodjg0My5OYW1lIGFuZCB2ODQzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2ODQzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2ODQzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA1MDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ODQzLkh1bWFub2lkLkhlYWx0aCA8PSAoKHY4NDMuSHVtYW5vaWQuTWF4SGVhbHRoICogS2lsbFBlcmNlbnQpIC8gMTAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfRy5Vc2VTa2lsbCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfRy5Vc2VTa2lsbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2ODQzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg0My5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg0My5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NDMuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg0My5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODQzLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjg0My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHY4NDMuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IEF1dG9GYXJtTWFzRGV2aWxGcnVpdCBvciAobm90IE1hc3RlcnlUeXBlID09ICJOZWFyIE1vYnMiKSBvciBub3Qgdjg0My5QYXJlbnQgb3IgKHY4NDMuSHVtYW5vaWQuSGVhbHRoID09IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX0cuVXNlU2tpbGwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwppZiBTZWEzIHRoZW4KICAgIGxvY2FsIHY0ODQgPSB2MTYuTWFpbjpBZGRTZWN0aW9uKCJYxrDGoW5nIik7CiAgICBsb2NhbCB2NDg1ID0gdjE2Lk1haW46QWRkUGFyYWdyYXBoKHsKICAgICAgICBUaXRsZSA9ICJYxrDGoW5nIFRy4bqhbmcgVGjDoWkiLAogICAgICAgIENvbnRlbnQgPSAiIgogICAgfSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgICAgIGxvY2FsIHY3NjggPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCb25lcyIsICJDaGVjayIpOwogICAgICAgICAgICAgICAgdjQ4NTpTZXREZXNjKCJNw6B5IEPDszogIiAuLiB0b3N0cmluZyh2NzY4KSAuLiAiIFjGsMahbmciKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZCk7CiAgICBsb2NhbCB2NDg2ID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVCb25lIiwgewogICAgICAgIFRpdGxlID0gIkPDoHkgWMawxqFuZyIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjQ4NjpPbkNoYW5nZWQoZnVuY3Rpb24odjU3MSkKICAgICAgICBfRy5BdXRvQm9uZSA9IHY1NzE7CiAgICAgICAgaWYgKHY1NzEgPT0gZmFsc2UpIHRoZW4KICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUJvbmU6U2V0VmFsdWUoZmFsc2UpOwogICAgbG9jYWwgdjQ4NyA9IENGcmFtZS5uZXcoLSA5NTE1Ljc1LCAxNzQuODUyMTcyODUxNTYyNSwgNjA3OS40MDYyNSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9Cb25lIHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2ODk0ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dDsKICAgICAgICAgICAgICAgICAgICBpZiBub3Qgc3RyaW5nLmZpbmQodjg5NCwgIkRlbW9uaWMgU291bCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWJhbmRvblF1ZXN0Iik7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gZmFsc2UpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjQ4Nyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjQ4Ny5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMykgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RhcnRRdWVzdCIsICJIYXVudGVkUXVlc3QyIiwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSB0cnVlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlJlYm9ybiBTa2VsZXRvbiIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiTGl2aW5nIFpvbWJpZSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRGVtb25pYyBTb3VsIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJQb3Nlc3NlZCBNdW1teSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE2NjEsIHYxNjYyIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTY2MjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2MTY2MjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgKHYxNjYyLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE2NjIuTmFtZSA9PSAiUmVib3JuIFNrZWxldG9uIikgb3IgKHYxNjYyLk5hbWUgPT0gIkxpdmluZyBab21iaWUiKSBvciAodjE2NjIuTmFtZSA9PSAiRGVtb25pYyBTb3VsIikgb3IgKHYxNjYyLk5hbWUgPT0gIlBvc2Vzc2VkIE11bW15IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJEZW1vbmljIFNvdWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE2NjIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Mi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjIuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Mi5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Mi5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Mi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNjYyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE2NjIuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b0JvbmUgb3IgKHYxNjYyLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE2NjIuUGFyZW50IG9yIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFiYW5kb25RdWVzdCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY0ODggPSBDRnJhbWUubmV3KC0gOTUxNS43NSwgMTc0Ljg1MjE3Mjg1MTU2MjUsIDYwNzkuNDA2MjUpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvQm9uZU5vUXVlc3QgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY0ODgpOwogICAgICAgICAgICAgICAgICAgIGlmICgodjQ4OC5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMykgdGhlbgogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlJlYm9ybiBTa2VsZXRvbiIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiTGl2aW5nIFpvbWJpZSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRGVtb25pYyBTb3VsIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJQb3Nlc3NlZCBNdW1teSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQzNiwgdjE0MzcgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0Mzc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdjE0Mzc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kICh2MTQzNy5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE0MzcuTmFtZSA9PSAiUmVib3JuIFNrZWxldG9uIikgb3IgKHYxNDM3Lk5hbWUgPT0gIkxpdmluZyBab21iaWUiKSBvciAodjE0MzcuTmFtZSA9PSAiRGVtb25pYyBTb3VsIikgb3IgKHYxNDM3Lk5hbWUgPT0gIlBvc2Vzc2VkIE11bW15IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0MzcuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzcuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzNy5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzNy5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzcuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDM3Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNDM3Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNDM3Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvQm9uZU5vUXVlc3Qgb3IgKHYxNDM3Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE0MzcuUGFyZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICB2MTYuTWFpbjpBZGRCdXR0b24oewogICAgICAgIFRpdGxlID0gIkPhuqd1IE5ndXnhu4duIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgICAgICBsb2NhbCB2NTcyID0gewogICAgICAgICAgICAgICAgWzFdID0gImdyYXZlc3RvbmVFdmVudCIsCiAgICAgICAgICAgICAgICBbMl0gPSAxCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY1NzIpKTsKICAgICAgICBlbmQKICAgIH0pOwogICAgdjE2Lk1haW46QWRkQnV0dG9uKHsKICAgICAgICBUaXRsZSA9ICJUaOG7rSBW4bqtbiBNYXkiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIGxvY2FsIHY1NzMgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiZ3JhdmVzdG9uZUV2ZW50IiwKICAgICAgICAgICAgICAgIFsyXSA9IDIKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjU3MykpOwogICAgICAgIGVuZAogICAgfSk7CiAgICBsb2NhbCB2NDg5ID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVSYW5kb21Cb25lIiwgewogICAgICAgIFRpdGxlID0gIlJhbmRvbSBYxrDGoW5nIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NDg5Ok9uQ2hhbmdlZChmdW5jdGlvbih2NTc0KQogICAgICAgIF9HLkF1dG9SYW5kb21Cb25lID0gdjU3NDsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlUmFuZG9tQm9uZTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9SYW5kb21Cb25lIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4NDQgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkJvbmVzIiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiQnV5IiwKICAgICAgICAgICAgICAgICAgICBbM10gPSAxLAogICAgICAgICAgICAgICAgICAgIFs0XSA9IDEKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODQ0KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kCmlmIFNlYTMgdGhlbgogICAgbG9jYWwgdjQ5MCA9IHYxNi5NYWluOkFkZFNlY3Rpb24oIlTGsCBM4buHbmggQsOhbmgiKTsKICAgIGxvY2FsIHY0OTEgPSB2MTYuTWFpbjpBZGRQYXJhZ3JhcGgoewogICAgICAgIFRpdGxlID0gIlRy4bqhbmcgVGjDoWkgTsOzIFJhIiwKICAgICAgICBDb250ZW50ID0gIiIKICAgIH0pOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiAoc3RyaW5nLmxlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDYWtlUHJpbmNlU3Bhd25lciIpKSA9PSA4OCkgdGhlbgogICAgICAgICAgICAgICAgICAgIHY0OTE6U2V0RGVzYygiQ8OybjogIiAuLiBzdHJpbmcuc3ViKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNha2VQcmluY2VTcGF3bmVyIiksIDM5LCA0MSkgLi4gIiIpOwogICAgICAgICAgICAgICAgZWxzZWlmIChzdHJpbmcubGVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNha2VQcmluY2VTcGF3bmVyIikpID09IDg3KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjQ5MTpTZXREZXNjKCJDw7JuOiAiIC4uIHN0cmluZy5zdWIoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2FrZVByaW5jZVNwYXduZXIiKSwgMzksIDQwKSAuLiAiIik7CiAgICAgICAgICAgICAgICBlbHNlaWYgKHN0cmluZy5sZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2FrZVByaW5jZVNwYXduZXIiKSkgPT0gODYpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NDkxOlNldERlc2MoIkPDsm46ICIgLi4gc3RyaW5nLnN1YihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDYWtlUHJpbmNlU3Bhd25lciIpLCAzOSwgMzkpIC4uICIgIik7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjQ5MTpTZXREZXNjKCJUxrAgTOG7h25oIELDoW5oIDog4pyF77iPIik7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NDkyID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVDYWtlIiwgewogICAgICAgIFRpdGxlID0gIkPDoHkgVMawIEzhu4duaCBCw6FuaCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgbG9jYWwgdjQ5MyA9IHRydWU7CiAgICB2NDkyOk9uQ2hhbmdlZChmdW5jdGlvbih2NTc1KQogICAgICAgIF9HLkNha2VQcmluY2UgPSB2NTc1OwogICAgICAgIGlmIHY1NzUgdGhlbgogICAgICAgICAgICBpZiB2NDkzIHRoZW4KICAgICAgICAgICAgICAgIHY0OTMgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4OTUgPSBDRnJhbWUubmV3KC0gMjAwMy45MzI4NjEzMjgxMjUsIDM4MC40ODI0NTIzOTI1NzgxLCAtIDEyNTYxLjAxODU1NDY4NzUpOwogICAgICAgICAgICAgICAgVHdlZW4odjg5NSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2UKICAgICAgICAgICAgdjQ5MyA9IHRydWU7CiAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgd2FpdCgpOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVDYWtlOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQ2FrZVByaW5jZSB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDYWtlIFByaW5jZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDM4LCB2MTQzOSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQzOS5OYW1lID09ICJDYWtlIFByaW5jZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0Mzk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNDM5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTQzOS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDM5Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzkuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDM5Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0MzkuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQ2FrZVByaW5jZSBvciBub3QgdjE0MzkuUGFyZW50IG9yICh2MTQzOS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJDYWtlIFByaW5jZSBbTHYuIDIzMDBdIFtSYWlkIEJvc3NdIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkNha2UgUHJpbmNlIFtMdi4gMjMwMF0gW1JhaWQgQm9zc10iKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkNha2VMb2FmLkJpZ01pcnJvci5PdGhlci5UcmFuc3BhcmVuY3kgPT0gMSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDb29raWUgQ3JhZnRlciIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBHdWFyZCIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQmFraW5nIFN0YWZmIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJIZWFkIEJha2VyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTc1NCwgdjE3NTUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTc1NS5OYW1lID09ICJDb29raWUgQ3JhZnRlciIpIG9yICh2MTc1NS5OYW1lID09ICJDYWtlIEd1YXJkIikgb3IgKHYxNzU1Lk5hbWUgPT0gIkJha2luZyBTdGFmZiIpIG9yICh2MTc1NS5OYW1lID09ICJIZWFkIEJha2VyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNzU1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTc1NTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE3NTUuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc1NS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc1NS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzU1LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzU1Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTc1NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE3NTUuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTc1NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkNha2VQcmluY2Ugb3Igbm90IHYxNzU1LlBhcmVudCBvciAodjE3NTUuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5DYWtlTG9hZi5CaWdNaXJyb3IuT3RoZXIuVHJhbnNwYXJlbmN5ID09IDApIG9yIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBQcmluY2UgW0x2LiAyMzAwXSBbUmFpZCBCb3NzXSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBQcmluY2UgW0x2LiAyMzAwXSBbUmFpZCBCb3NzXSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY0OTQgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZURvdWdoS2luZyIsIHsKICAgICAgICBUaXRsZSA9ICLEkOG6pW0gVnVhIELhu5l0IiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NDk0Ok9uQ2hhbmdlZChmdW5jdGlvbih2NTc2KQogICAgICAgIF9HLkRvdWdoS2luZyA9IHY1NzY7CiAgICAgICAgaWYgKHY1NzYgPT0gZmFsc2UpIHRoZW4KICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZURvdWdoS2luZzpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkRvdWdoS2luZyB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEb3VnaCBLaW5nIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NDAsIHYxNDQxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDQxLk5hbWUgPT0gIkRvdWdoIEtpbmciKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDQxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTQ0MTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE0NDEuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0MS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQxLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0MS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDQxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkRvdWdoS2luZyBvciBub3QgdjE0NDEuUGFyZW50IG9yICh2MTQ0MS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY0OTUgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZVNwYXduQ2FrZSIsIHsKICAgICAgICBUaXRsZSA9ICJUcmnhu4d1IEjhu5NpIFTGsCBM4buHbmggQsOhbmgiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IHRydWUKICAgIH0pOwogICAgdjQ5NTpPbkNoYW5nZWQoZnVuY3Rpb24odjU3NykKICAgICAgICBfRy5TcGF3bkNha2VQcmluY2UgPSB2NTc3OwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVTcGF3bkNha2U6U2V0VmFsdWUodHJ1ZSk7CmVuZApzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5TcGF3bkNha2VQcmluY2UgdGhlbgogICAgICAgICAgICBsb2NhbCB2NjgxID0gewogICAgICAgICAgICAgICAgWzFdID0gIkNha2VQcmluY2VTcGF3bmVyIiwKICAgICAgICAgICAgICAgIFsyXSA9IHRydWUKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjY4MSkpOwogICAgICAgICAgICBsb2NhbCB2NjgxID0gewogICAgICAgICAgICAgICAgWzFdID0gIkNha2VQcmluY2VTcGF3bmVyIgogICAgICAgICAgICB9OwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NjgxKSk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKaWYgU2VhMiB0aGVuCiAgICBsb2NhbCB2NDk2ID0gdjE2Lk1haW46QWRkU2VjdGlvbigiRWN0b3BsYXNtIEZhcm0iKTsKICAgIGxvY2FsIHY0OTcgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZVZhdENoYXRLaURpIiwgewogICAgICAgIFRpdGxlID0gIkF1dG8gRmFybSBFY3RvcGxhc20iLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY0OTc6T25DaGFuZ2VkKGZ1bmN0aW9uKHY1NzgpCiAgICAgICAgX0cuRWN0b3BsYXNtID0gdjU3ODsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlVmF0Q2hhdEtpRGk6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBfRy5FY3RvcGxhc20gdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNoaXAgRGVja2hhbmQiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNoaXAgRW5naW5lZXIiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNoaXAgU3Rld2FyZCIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU2hpcCBPZmZpY2VyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDQyLCB2MTQ0MyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE0NDMuTmFtZSA9PSAiU2hpcCBTdGV3YXJkIikgb3IgKHYxNDQzLk5hbWUgPT0gIlNoaXAgRW5naW5lZXIiKSBvciAodjE0NDMuTmFtZSA9PSAiU2hpcCBEZWNraGFuZCIpIG9yICgodjE0NDMuTmFtZSA9PSAiU2hpcCBPZmZpY2VyIikgYW5kIHYxNDQzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ0My5IdW1hbm9pZC5IZWFsdGggPiAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDQzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQzLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDMuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDMuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQzLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0My5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTQ0My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTQ0My5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoX0cuRWN0b3BsYXNtID09IGZhbHNlKSBvciBub3QgdjE0NDMuUGFyZW50IG9yICh2MTQ0My5IdW1hbm9pZC5IZWFsdGggPT0gMCkgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2MTQ0My5OYW1lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzMzQgPSAoVmVjdG9yMy5uZXcoOTA0LjQwNzIyNjU2MjUsIDE4MS4wNTc2NzgyMjI2NiwgMzMzNDEuMzg2NzE4NzUpIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTMzNCA+IDIwMDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg5MjMuMjEyNTI0NDE0MDYsIDEyNi45NzYwMDU1NTQyLCAzMjg1Mi44MzIwMzEyNSkpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg5MDQuNDA3MjI2NTYyNSwgMTgxLjA1NzY3ODIyMjY2LCAzMzM0MS4zODY3MTg3NSkpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQKbG9jYWwgdjYwID0gdjE2Lk1haW46QWRkU2VjdGlvbigiVHLDuW0iKTsKaWYgU2VhMSB0aGVuCiAgICB0YWJsZUJvc3MgPSB7CiAgICAgICAgIlRoZSBHb3JpbGxhIEtpbmciLAogICAgICAgICJCb2JieSIsCiAgICAgICAgIllldGkiLAogICAgICAgICJNb2IgTGVhZGVyIiwKICAgICAgICAiVmljZSBBZG1pcmFsIiwKICAgICAgICAiV2FyZGVuIiwKICAgICAgICAiQ2hpZWYgV2FyZGVuIiwKICAgICAgICAiU3dhbiIsCiAgICAgICAgIk1hZ21hIEFkbWlyYWwiLAogICAgICAgICJGaXNobWFuIExvcmQiLAogICAgICAgICJXeXNwZXIiLAogICAgICAgICJUaHVuZGVyIEdvZCIsCiAgICAgICAgIkN5Ym9yZyIsCiAgICAgICAgIlNhYmVyIEV4cGVydCIKICAgIH07CmVsc2VpZiBTZWEyIHRoZW4KICAgIHRhYmxlQm9zcyA9IHsKICAgICAgICAiRGlhbW9uZCIsCiAgICAgICAgIkplcmVteSIsCiAgICAgICAgIkZhaml0YSIsCiAgICAgICAgIkRvbiBTd2FuIiwKICAgICAgICAiU21va2UgQWRtaXJhbCIsCiAgICAgICAgIkN1cnNlZCBDYXB0YWluIiwKICAgICAgICAiRGFya2JlYXJkIiwKICAgICAgICAiT3JkZXIiLAogICAgICAgICJBd2FrZW5lZCBJY2UgQWRtaXJhbCIsCiAgICAgICAgIlRpZGUgS2VlcGVyIgogICAgfTsKZWxzZWlmIFNlYTMgdGhlbgogICAgdGFibGVCb3NzID0gewogICAgICAgICJTdG9uZSIsCiAgICAgICAgIkh5ZHJhIExlYWRlciIsCiAgICAgICAgIktpbG8gQWRtaXJhbCIsCiAgICAgICAgIkNhcHRhaW4gRWxlcGhhbnQiLAogICAgICAgICJCZWF1dGlmdWwgUGlyYXRlIiwKICAgICAgICAicmlwX2luZHJhIFRydWUgRm9ybSIsCiAgICAgICAgIkxvbmdtYSIsCiAgICAgICAgIlNvdWwgUmVhcGVyIiwKICAgICAgICAiQ2FrZSBRdWVlbiIKICAgIH07CmVuZApsb2NhbCB2NjEgPSB2MTYuTWFpbjpBZGREcm9wZG93bigiRHJvcGRvd25Cb3NzIiwgewogICAgVGl0bGUgPSAiQ2jhu41uIFRyw7ltIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZXMgPSB0YWJsZUJvc3MsCiAgICBNdWx0aSA9IGZhbHNlLAogICAgRGVmYXVsdCA9IDEKfSk7CnY2MTpTZXRWYWx1ZShfRy5TZWxlY3RCb3NzKTsKdjYxOk9uQ2hhbmdlZChmdW5jdGlvbih2MjUzKQogICAgX0cuU2VsZWN0Qm9zcyA9IHYyNTM7CmVuZCk7CmxvY2FsIHY2MiA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b0Zhcm1Cb3NzIiwgewogICAgVGl0bGUgPSAixJDhuqVtIFRyw7ltIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY2MjpPbkNoYW5nZWQoZnVuY3Rpb24odjI1NCkKICAgIF9HLkF1dG9Cb3NzID0gdjI1NDsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9GYXJtQm9zczpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9Cb3NzIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKF9HLlNlbGVjdEJvc3MpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwMzQsIHYxMDM1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwMzUuTmFtZSA9PSBfRy5TZWxlY3RCb3NzKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwMzU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMDM1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTAzNS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzNS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzUuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzUuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDM1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIsICJTaW11bGF0aW9uUmFkaXVzIiwgbWF0aC5odWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b0Jvc3Mgb3Igbm90IHYxMDM1LlBhcmVudCBvciAodjEwMzUuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKF9HLlNlbGVjdEJvc3MpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoX0cuU2VsZWN0Qm9zcykuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDUsIDEwLCA3KSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NjMgPSB2MTYuTWFpbjpBZGRTZWN0aW9uKCJOZ3V5w6puIExp4buHdSIpOwppZiBTZWExIHRoZW4KICAgIE1hdGVyaWFsTGlzdCA9IHsKICAgICAgICAiU2NyYXAgTWV0YWwiLAogICAgICAgICJMZWF0aGVyIiwKICAgICAgICAiQW5nZWwgV2luZ3MiLAogICAgICAgICJNYWdtYSBPcmUiLAogICAgICAgICJGaXNoIFRhaWwiCiAgICB9OwplbHNlaWYgU2VhMiB0aGVuCiAgICBNYXRlcmlhbExpc3QgPSB7CiAgICAgICAgIlNjcmFwIE1ldGFsIiwKICAgICAgICAiTGVhdGhlciIsCiAgICAgICAgIlJhZGlvYWN0aXZlIE1hdGVyaWFsIiwKICAgICAgICAiTXlzdGljIERyb3BsZXQiLAogICAgICAgICJNYWdtYSBPcmUiLAogICAgICAgICJWYW1waXJlIEZhbmciCiAgICB9OwplbHNlaWYgU2VhMyB0aGVuCiAgICBNYXRlcmlhbExpc3QgPSB7CiAgICAgICAgIlNjcmFwIE1ldGFsIiwKICAgICAgICAiTGVhdGhlciIsCiAgICAgICAgIkRlbW9uaWMgV2lzcCIsCiAgICAgICAgIkNvbmp1cmVkIENvY29hIiwKICAgICAgICAiRHJhZ29uIFNjYWxlIiwKICAgICAgICAiR3VucG93ZGVyIiwKICAgICAgICAiRmlzaCBUYWlsIiwKICAgICAgICAiTWluaSBUdXNrIiwKICAgICAgICAiSHlkcmEgRW5mb3JjZXIiLAogICAgICAgICJWZW5vbW91cyBBc3NhaWxhbnQiCiAgICB9OwplbmQKbG9jYWwgdjY0ID0gdjE2Lk1haW46QWRkRHJvcGRvd24oIkRyb3Bkb3duTWF0ZXJpYWwiLCB7CiAgICBUaXRsZSA9ICJDaOG7jW4gTmd1ecOqbiBMaeG7h3UiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIFZhbHVlcyA9IE1hdGVyaWFsTGlzdCwKICAgIE11bHRpID0gZmFsc2UsCiAgICBEZWZhdWx0ID0gMQp9KTsKdjY0OlNldFZhbHVlKFNlbGVjdE1hdGVyaWFsKTsKdjY0Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjU1KQogICAgU2VsZWN0TWF0ZXJpYWwgPSB2MjU1OwplbmQpOwpsb2NhbCB2NjUgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZU1hdGVyaWFsIiwgewogICAgVGl0bGUgPSAiQ8OgeSBOZ3V5w6puIExp4buHdSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NjU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNTYpCiAgICBfRy5BdXRvTWF0ZXJpYWwgPSB2MjU2OwogICAgaWYgKHYyNTYgPT0gZmFsc2UpIHRoZW4KICAgICAgICB3YWl0KCk7CiAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICB3YWl0KCk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZU1hdGVyaWFsOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvTWF0ZXJpYWwgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBNYXRlcmlhbE1vbihTZWxlY3RNYXRlcmlhbCk7CiAgICAgICAgICAgICAgICBUd2VlbihNUG9zKTsKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZChNTW9uKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDM2LCB2MTAzNyBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTAzNzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjEwMzc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxMDM3Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwMzcuTmFtZSA9PSBNTW9uKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwMzcuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzNy5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzcuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzNy5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzNy5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzNy5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxMDM3Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjEwMzcuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b01hdGVyaWFsIG9yIG5vdCB2MTAzNy5QYXJlbnQgb3IgKHYxMDM3Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDM4LCB2MTAzOSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWydfV29ybGRPcmlnaW4nXS5FbmVteVNwYXduczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2MTAzOS5OYW1lLCBNb24pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjEwMzkuUG9zaXRpb24pLk1hZ25pdHVkZSA+PSAxMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDM5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmlmIFNlYTMgdGhlbgogICAgbG9jYWwgdjQ5OCA9IHYxNi5TZWE6QWRkU2VjdGlvbigixJDhuqNvIEPDoW8iKTsKICAgIGxvY2FsIHY0OTkgPSB2MTYuU2VhOkFkZFBhcmFncmFwaCh7CiAgICAgICAgVGl0bGUgPSAiVHLhuqFuZyBUaMOhaSDEkOG6o28gQ8OhbyIsCiAgICAgICAgQ29udGVudCA9ICIiCiAgICB9KTsKICAgIGZ1bmN0aW9uIFVwZGF0ZUtpdHN1bmUoKQogICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJLaXRzdW5lSXNsYW5kIikgdGhlbgogICAgICAgICAgICB2NDk5OlNldERlc2MoIsSQ4bqjbyBDw6FvIDog4pyF77iPIik7CiAgICAgICAgZWxzZQogICAgICAgICAgICB2NDk5OlNldERlc2MoIsSQ4bqjbyBDw6FvIDog4p2M77iPIik7CiAgICAgICAgZW5kCiAgICBlbmQKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICAgICAgVXBkYXRlS2l0c3VuZSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kKTsKICAgIGxvY2FsIHY1MDAgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlRXNwS2l0c3VuZSIsIHsKICAgICAgICBUaXRsZSA9ICLEkOG7i25oIFbhu4sgxJDhuqNvIEPDoW8iLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MDA6T25DaGFuZ2VkKGZ1bmN0aW9uKHY1NzkpCiAgICAgICAgS2l0c3VuZUlzbGFuZEVzcCA9IHY1Nzk7CiAgICAgICAgd2hpbGUgS2l0c3VuZUlzbGFuZEVzcCBkbwogICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgIFVwZGF0ZUlzbGFuZEtpc3VuZUVTUCgpOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVFc3BLaXRzdW5lOlNldFZhbHVlKGZhbHNlKTsKICAgIGZ1bmN0aW9uIFVwZGF0ZUlzbGFuZEtpc3VuZUVTUCgpCiAgICAgICAgZm9yIHY2ODIsIHY2ODMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uTG9jYXRpb25zOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIEtpdHN1bmVJc2xhbmRFc3AgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmICh2NjgzLk5hbWUgPT0gIktpdHN1bmUgSXNsYW5kIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjY4MzpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNTE4ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NjgzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTE4Lk5hbWUgPSAiTmFtZUVzcCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUxOC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUxOC5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MTguQWRvcm5lZSA9IHY2ODM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUxOC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTUyNCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjE1MTgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MjQuRm9udCA9ICJDb2RlIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTI0LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUyNC5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUyNC5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MjQuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTI0LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MjQuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTI0LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgMjQ1LCAyNDUpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NjgzWydOYW1lRXNwJ10uVGV4dExhYmVsLlRleHQgPSB2NjgzLk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjY4My5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBNIiA7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIHY2ODM6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjY4MzpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCiAgICBsb2NhbCB2NTAxID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVRQS2l0c3VuZSIsIHsKICAgICAgICBUaXRsZSA9ICJCYXkgVsO0IMSQ4bqjbyBDw6FvIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTAxOk9uQ2hhbmdlZChmdW5jdGlvbih2NTgwKQogICAgICAgIF9HLlR3ZWVuVG9LaXRzdW5lID0gdjU4MDsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlVFBLaXRzdW5lOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB2NTgxOwogICAgICAgIHdoaWxlIG5vdCB2NTgxIGRvCiAgICAgICAgICAgIHY1ODEgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiS2l0c3VuZUlzbGFuZCIpOwogICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgZW5kCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLlR3ZWVuVG9LaXRzdW5lIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4NDUgPSB2NTgxOkZpbmRGaXJzdENoaWxkKCJTaHJpbmVBY3RpdmUiKTsKICAgICAgICAgICAgICAgIGlmIHY4NDUgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTMzNSwgdjEzMzYgaW4gcGFpcnModjg0NTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEzMzY6SXNBKCJCYXNlUGFydCIpIGFuZCB2MTMzNi5OYW1lOmZpbmQoIk5lb25TaHJpbmVQYXJ0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMzM2LkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MDIgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlQ29sbGVjdEF6dXJlIiwgewogICAgICAgIFRpdGxlID0gIkzhu6VtIExpbmggSOG7k24gWGFuaCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUwMjpPbkNoYW5nZWQoZnVuY3Rpb24odjU4MikKICAgICAgICBfRy5Db2xsZWN0QXp1cmUgPSB2NTgyOwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVDb2xsZWN0QXp1cmU6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5Db2xsZWN0QXp1cmUgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6RmluZEZpcnN0Q2hpbGQoIkF0dGFjaGVkQXp1cmVFbWJlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpXYWl0Rm9yQ2hpbGQoIkVtYmVyVGVtcGxhdGUiKTpGaW5kRmlyc3RDaGlsZCgiUGFydCIpLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZAp2MTYuU2VhOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICLEkOG7lWkgTGluaCBI4buTbiBYYW5oIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6V2FpdEZvckNoaWxkKCJNb2R1bGVzIik6V2FpdEZvckNoaWxkKCJOZXQiKTpXYWl0Rm9yQ2hpbGQoIlJGL0tpdHN1bmVTdGF0dWVQcmF5Iik6SW52b2tlU2VydmVyKCk7CiAgICBlbmQKfSk7CmlmIFNlYTMgdGhlbgogICAgbG9jYWwgdjUwMyA9IHYxNi5TZWE6QWRkU2VjdGlvbigiQmnhu4NuIik7CiAgICBsb2NhbCB2NTA0ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik7CiAgICBsb2NhbCB2NTA1ID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIik7CiAgICBsb2NhbCB2NTA2ID0gZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik7CiAgICBsb2NhbCB2NTA3ID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTsKICAgIGxvY2FsIHY1MDggPSAzNTA7CiAgICBsb2NhbCB2NTA5ID0gdjE2LlNlYTpBZGRTbGlkZXIoIlNsaWRlclNwZWVkQm9hdCIsIHsKICAgICAgICBUaXRsZSA9ICJU4buRYyDEkOG7mSBUaHV54buBbiIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gdjUwOCwKICAgICAgICBNaW4gPSAwLAogICAgICAgIE1heCA9IDM1MCwKICAgICAgICBSb3VuZGluZyA9IDEsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2NTgzKQogICAgICAgICAgICB2NTA4ID0gdjU4MzsKICAgICAgICBlbmQKICAgIH0pOwogICAgdjUwOTpTZXRWYWx1ZSh2NTA4KTsKICAgIGxvY2FsIHY1MTAgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiQXV0b0ZpbmRQcmVoaXN0b3JpYyIsIHsKICAgICAgICBUaXRsZSA9ICJUw6xtIMSQ4bqjbyBEdW5nIE5oYW0iLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHYxNy5BdXRvRmluZFByZWhpc3RvcmljOlNldFZhbHVlKGZhbHNlKTsKICAgIHY1MTA6T25DaGFuZ2VkKGZ1bmN0aW9uKHY1ODQpCiAgICAgICAgX0cuQXV0b0ZpbmRQcmVoaXN0b3JpYyA9IHY1ODQ7CiAgICBlbmQpOwogICAgbG9jYWwgdjUxMSA9IHt9OwogICAgbG9jYWwgdjUxMiA9IGZhbHNlOwogICAgbG9jYWwgdjUxMyA9IGZhbHNlOwogICAgdjUwNS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGlmIG5vdCBfRy5BdXRvRmluZFByZWhpc3RvcmljIHRoZW4KICAgICAgICAgICAgdjUxMyA9IGZhbHNlOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjU4NSA9IHY1MDQuTG9jYWxQbGF5ZXI7CiAgICAgICAgbG9jYWwgdjU4NiA9IHY1ODUuQ2hhcmFjdGVyOwogICAgICAgIGlmIChub3QgdjU4NiBvciBub3QgdjU4NjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSkgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgZnVuY3Rpb24gdjU4NygpCiAgICAgICAgICAgIGlmIHY1MTIgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdjUxMiA9IHRydWU7CiAgICAgICAgICAgIGZvciB2NzY5LCB2NzcwIGluIHBhaXJzKHY1MTEpIGRvCiAgICAgICAgICAgICAgICBpZiAodjc3MCBhbmQgdjc3MC5QYXJlbnQgYW5kICh2NzcwLk5hbWUgPT0gIlZlaGljbGVTZWF0IikgYW5kIG5vdCB2NzcwLk9jY3VwYW50KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4yKHY3NzAuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdjUxMiA9IGZhbHNlOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY1ODggPSB2NTg2Lkh1bWFub2lkOwogICAgICAgIGxvY2FsIHY1ODkgPSBmYWxzZTsKICAgICAgICBsb2NhbCB2NTkwID0gbmlsOwogICAgICAgIGZvciB2Njg0LCB2Njg1IGluIHBhaXJzKHY1MDcuQm9hdHM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgbG9jYWwgdjY4NiA9IHY2ODU6RmluZEZpcnN0Q2hpbGQoIlZlaGljbGVTZWF0Iik7CiAgICAgICAgICAgIGlmICh2Njg2IGFuZCAodjY4Ni5PY2N1cGFudCA9PSB2NTg4KSkgdGhlbgogICAgICAgICAgICAgICAgdjU4OSA9IHRydWU7CiAgICAgICAgICAgICAgICB2NTkwID0gdjY4NjsKICAgICAgICAgICAgICAgIHY1MTFbdjY4NS5OYW1lXSA9IHY2ODY7CiAgICAgICAgICAgIGVsc2VpZiAodjY4NiBhbmQgKHY2ODYuT2NjdXBhbnQgPT0gbmlsKSkgdGhlbgogICAgICAgICAgICAgICAgdjU4NygpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBpZiBub3QgdjU4OSB0aGVuCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICB2NTkwLk1heFNwZWVkID0gdjUwODsKICAgICAgICB2NTkwLkNGcmFtZSA9IENGcmFtZS5uZXcoVmVjdG9yMy5uZXcodjU5MC5Qb3NpdGlvbi5YLCB2NTkwLlBvc2l0aW9uLlksIHY1OTAuUG9zaXRpb24uWikpICogdjU5MC5DRnJhbWUuUm90YXRpb24gOwogICAgICAgIHY1MDY6U2VuZEtleUV2ZW50KHRydWUsICJXIiwgZmFsc2UsIGdhbWUpOwogICAgICAgIGZvciB2Njg3LCB2Njg4IGluIHBhaXJzKHY1MDcuQm9hdHM6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgdjY4ODpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgdjY4OC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGZvciB2Njg5LCB2NjkwIGluIHBhaXJzKHY1ODY6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgdjY5MDpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgdjY5MC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY1OTMgPSB7CiAgICAgICAgICAgICJTaGlwd3JlY2tJc2xhbmQiLAogICAgICAgICAgICAiU2FuZElzbGFuZCIsCiAgICAgICAgICAgICJUcmVlSXNsYW5kIiwKICAgICAgICAgICAgIlRpbnlJc2xhbmQiLAogICAgICAgICAgICAiTXlzdGljSXNsYW5kIiwKICAgICAgICAgICAgIktpdHN1bmVJc2xhbmQiLAogICAgICAgICAgICAiRnJvemVuRGltZW5zaW9uIgogICAgICAgIH07CiAgICAgICAgZm9yIHY2OTEsIHY2OTIgaW4gaXBhaXJzKHY1OTMpIGRvCiAgICAgICAgICAgIGxvY2FsIHY2OTMgPSB2NTA3Lk1hcDpGaW5kRmlyc3RDaGlsZCh2NjkyKTsKICAgICAgICAgICAgaWYgKHY2OTMgYW5kIHY2OTM6SXNBKCJNb2RlbCIpKSB0aGVuCiAgICAgICAgICAgICAgICB2NjkzOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjU5NCA9IHY1MDcuTWFwOkZpbmRGaXJzdENoaWxkKCJQcmVoaXN0b3JpY0lzbGFuZCIpOwogICAgICAgIGlmIHY1OTQgdGhlbgogICAgICAgICAgICB2NTA2OlNlbmRLZXlFdmVudChmYWxzZSwgIlciLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgIF9HLkF1dG9GaW5kUHJlaGlzdG9yaWMgPSBmYWxzZTsKICAgICAgICAgICAgaWYgbm90IHY1MTMgdGhlbgogICAgICAgICAgICAgICAgdjE0Ok5vdGlmeSh7CiAgICAgICAgICAgICAgICAgICAgVGl0bGUgPSAiTWluIEdhbWluZyIsCiAgICAgICAgICAgICAgICAgICAgQ29udGVudCA9ICLEkOG6o28gRHVuZyBOaGFtIFTDrG0gVGjhuqV5IiwKICAgICAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDEwCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHY1MTMgPSB0cnVlOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MTQgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiQXV0b0ZpbmRNaXJhZ2UiLCB7CiAgICAgICAgVGl0bGUgPSAiVMOsbSDEkOG6o28gQsOtIOG6qG4iLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHYxNy5BdXRvRmluZE1pcmFnZTpTZXRWYWx1ZShmYWxzZSk7CiAgICB2NTE0Ok9uQ2hhbmdlZChmdW5jdGlvbih2NTk1KQogICAgICAgIF9HLkF1dG9GaW5kTWlyYWdlID0gdjU5NTsKICAgIGVuZCk7CiAgICBsb2NhbCB2NTExID0ge307CiAgICBsb2NhbCB2NTEyID0gZmFsc2U7CiAgICBsb2NhbCB2NTEzID0gZmFsc2U7CiAgICB2NTA1LlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgbm90IF9HLkF1dG9GaW5kTWlyYWdlIHRoZW4KICAgICAgICAgICAgdjUxMyA9IGZhbHNlOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjU5NiA9IHY1MDQuTG9jYWxQbGF5ZXI7CiAgICAgICAgbG9jYWwgdjU5NyA9IHY1OTYuQ2hhcmFjdGVyOwogICAgICAgIGlmIChub3QgdjU5NyBvciBub3QgdjU5NzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSkgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgZnVuY3Rpb24gdjU5OCgpCiAgICAgICAgICAgIGlmIHY1MTIgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdjUxMiA9IHRydWU7CiAgICAgICAgICAgIGZvciB2NzcxLCB2NzcyIGluIHBhaXJzKHY1MTEpIGRvCiAgICAgICAgICAgICAgICBpZiAodjc3MiBhbmQgdjc3Mi5QYXJlbnQgYW5kICh2NzcyLk5hbWUgPT0gIlZlaGljbGVTZWF0IikgYW5kIG5vdCB2NzcyLk9jY3VwYW50KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4yKHY3NzIuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdjUxMiA9IGZhbHNlOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY1OTkgPSB2NTk3Lkh1bWFub2lkOwogICAgICAgIGxvY2FsIHY2MDAgPSBmYWxzZTsKICAgICAgICBsb2NhbCB2NjAxID0gbmlsOwogICAgICAgIGZvciB2Njk0LCB2Njk1IGluIHBhaXJzKHY1MDcuQm9hdHM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgbG9jYWwgdjY5NiA9IHY2OTU6RmluZEZpcnN0Q2hpbGQoIlZlaGljbGVTZWF0Iik7CiAgICAgICAgICAgIGlmICh2Njk2IGFuZCAodjY5Ni5PY2N1cGFudCA9PSB2NTk5KSkgdGhlbgogICAgICAgICAgICAgICAgdjYwMCA9IHRydWU7CiAgICAgICAgICAgICAgICB2NjAxID0gdjY5NjsKICAgICAgICAgICAgICAgIHY1MTFbdjY5NS5OYW1lXSA9IHY2OTY7CiAgICAgICAgICAgIGVsc2VpZiAodjY5NiBhbmQgKHY2OTYuT2NjdXBhbnQgPT0gbmlsKSkgdGhlbgogICAgICAgICAgICAgICAgdjU5OCgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBpZiBub3QgdjYwMCB0aGVuCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICB2NjAxLk1heFNwZWVkID0gdjUwODsKICAgICAgICB2NjAxLkNGcmFtZSA9IENGcmFtZS5uZXcoVmVjdG9yMy5uZXcodjYwMS5Qb3NpdGlvbi5YLCB2NjAxLlBvc2l0aW9uLlksIHY2MDEuUG9zaXRpb24uWikpICogdjYwMS5DRnJhbWUuUm90YXRpb24gOwogICAgICAgIHY1MDY6U2VuZEtleUV2ZW50KHRydWUsICJXIiwgZmFsc2UsIGdhbWUpOwogICAgICAgIGZvciB2Njk3LCB2Njk4IGluIHBhaXJzKHY1MDcuQm9hdHM6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgdjY5ODpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgdjY5OC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGZvciB2Njk5LCB2NzAwIGluIHBhaXJzKHY1OTc6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgdjcwMDpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgdjcwMC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY2MDQgPSB7CiAgICAgICAgICAgICJTaGlwd3JlY2tJc2xhbmQiLAogICAgICAgICAgICAiU2FuZElzbGFuZCIsCiAgICAgICAgICAgICJUcmVlSXNsYW5kIiwKICAgICAgICAgICAgIlRpbnlJc2xhbmQiLAogICAgICAgICAgICAiUHJlaGlzdG9yaWNJc2xhbmQiLAogICAgICAgICAgICAiS2l0c3VuZUlzbGFuZCIsCiAgICAgICAgICAgICJGcm96ZW5EaW1lbnNpb24iCiAgICAgICAgfTsKICAgICAgICBmb3IgdjcwMSwgdjcwMiBpbiBpcGFpcnModjYwNCkgZG8KICAgICAgICAgICAgbG9jYWwgdjcwMyA9IHY1MDcuTWFwOkZpbmRGaXJzdENoaWxkKHY3MDIpOwogICAgICAgICAgICBpZiAodjcwMyBhbmQgdjcwMzpJc0EoIk1vZGVsIikpIHRoZW4KICAgICAgICAgICAgICAgIHY3MDM6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NjA1ID0gdjUwNy5NYXA6RmluZEZpcnN0Q2hpbGQoIk15c3RpY0lzbGFuZCIpOwogICAgICAgIGlmIHY2MDUgdGhlbgogICAgICAgICAgICB2NTA2OlNlbmRLZXlFdmVudChmYWxzZSwgIlciLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgIF9HLkF1dG9GaW5kTWlyYWdlID0gZmFsc2U7CiAgICAgICAgICAgIGlmIG5vdCB2NTEzIHRoZW4KICAgICAgICAgICAgICAgIHYxNDpOb3RpZnkoewogICAgICAgICAgICAgICAgICAgIFRpdGxlID0gIk1pbiBHYW1pbmciLAogICAgICAgICAgICAgICAgICAgIENvbnRlbnQgPSAixJDhuqNvIELDrSDhuqhuIFTDrG0gVGjhuqV5IiwKICAgICAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDEwCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHY1MTMgPSB0cnVlOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MTUgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiQXV0b0ZpbmRGcm96ZW4iLCB7CiAgICAgICAgVGl0bGUgPSAiVMOsbSDEkOG6o28gTGV2aWF0aGFuIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICJD4bqnbiA1IE5nxrDhu51pIEtow7RuZyBJZGsiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2MTcuQXV0b0ZpbmRGcm96ZW46U2V0VmFsdWUoZmFsc2UpOwogICAgdjUxNTpPbkNoYW5nZWQoZnVuY3Rpb24odjYwNikKICAgICAgICBfRy5BdXRvRmluZEZyb3plbiA9IHY2MDY7CiAgICBlbmQpOwogICAgbG9jYWwgdjUxMSA9IHt9OwogICAgbG9jYWwgdjUxMiA9IGZhbHNlOwogICAgbG9jYWwgdjUxMyA9IGZhbHNlOwogICAgdjUwNS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGlmIG5vdCBfRy5BdXRvRmluZEZyb3plbiB0aGVuCiAgICAgICAgICAgIHY1MTMgPSBmYWxzZTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY2MDcgPSB2NTA0LkxvY2FsUGxheWVyOwogICAgICAgIGxvY2FsIHY2MDggPSB2NjA3LkNoYXJhY3RlcjsKICAgICAgICBpZiAobm90IHY2MDggb3Igbm90IHY2MDg6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikpIHRoZW4KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIGZ1bmN0aW9uIHY2MDkoKQogICAgICAgICAgICBpZiB2NTEyIHRoZW4KICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHY1MTIgPSB0cnVlOwogICAgICAgICAgICBmb3Igdjc3Mywgdjc3NCBpbiBwYWlycyh2NTExKSBkbwogICAgICAgICAgICAgICAgaWYgKHY3NzQgYW5kIHY3NzQuUGFyZW50IGFuZCAodjc3NC5OYW1lID09ICJWZWhpY2xlU2VhdCIpIGFuZCBub3Qgdjc3NC5PY2N1cGFudCkgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuMih2Nzc0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHY1MTIgPSBmYWxzZTsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NjEwID0gdjYwOC5IdW1hbm9pZDsKICAgICAgICBsb2NhbCB2NjExID0gZmFsc2U7CiAgICAgICAgbG9jYWwgdjYxMiA9IG5pbDsKICAgICAgICBmb3IgdjcwNCwgdjcwNSBpbiBwYWlycyh2NTA3LkJvYXRzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGxvY2FsIHY3MDYgPSB2NzA1OkZpbmRGaXJzdENoaWxkKCJWZWhpY2xlU2VhdCIpOwogICAgICAgICAgICBpZiAodjcwNiBhbmQgKHY3MDYuT2NjdXBhbnQgPT0gdjYxMCkpIHRoZW4KICAgICAgICAgICAgICAgIHY2MTEgPSB0cnVlOwogICAgICAgICAgICAgICAgdjYxMiA9IHY3MDY7CiAgICAgICAgICAgICAgICB2NTExW3Y3MDUuTmFtZV0gPSB2NzA2OwogICAgICAgICAgICBlbHNlaWYgKHY3MDYgYW5kICh2NzA2Lk9jY3VwYW50ID09IG5pbCkpIHRoZW4KICAgICAgICAgICAgICAgIHY2MDkoKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgaWYgbm90IHY2MTEgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgdjYxMi5NYXhTcGVlZCA9IHY1MDg7CiAgICAgICAgdjYxMi5DRnJhbWUgPSBDRnJhbWUubmV3KFZlY3RvcjMubmV3KHY2MTIuUG9zaXRpb24uWCwgdjYxMi5Qb3NpdGlvbi5ZLCB2NjEyLlBvc2l0aW9uLlopKSAqIHY2MTIuQ0ZyYW1lLlJvdGF0aW9uIDsKICAgICAgICB2NTA2OlNlbmRLZXlFdmVudCh0cnVlLCAiVyIsIGZhbHNlLCBnYW1lKTsKICAgICAgICBmb3IgdjcwNywgdjcwOCBpbiBwYWlycyh2NTA3LkJvYXRzOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgIGlmIHY3MDg6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgIHY3MDguQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBmb3IgdjcwOSwgdjcxMCBpbiBwYWlycyh2NjA4OkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgIGlmIHY3MTA6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgIHY3MTAuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NjE1ID0gewogICAgICAgICAgICAiU2hpcHdyZWNrSXNsYW5kIiwKICAgICAgICAgICAgIlNhbmRJc2xhbmQiLAogICAgICAgICAgICAiVHJlZUlzbGFuZCIsCiAgICAgICAgICAgICJUaW55SXNsYW5kIiwKICAgICAgICAgICAgIk15c3RpY0lzbGFuZCIsCiAgICAgICAgICAgICJLaXRzdW5lSXNsYW5kIiwKICAgICAgICAgICAgIlByZWhpc3RvcmljSXNsYW5kIgogICAgICAgIH07CiAgICAgICAgZm9yIHY3MTEsIHY3MTIgaW4gaXBhaXJzKHY2MTUpIGRvCiAgICAgICAgICAgIGxvY2FsIHY3MTMgPSB2NTA3Lk1hcDpGaW5kRmlyc3RDaGlsZCh2NzEyKTsKICAgICAgICAgICAgaWYgKHY3MTMgYW5kIHY3MTM6SXNBKCJNb2RlbCIpKSB0aGVuCiAgICAgICAgICAgICAgICB2NzEzOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYxNiA9IHY1MDcuTWFwOkZpbmRGaXJzdENoaWxkKCJGcm96ZW5EaW1lbnNpb24iKTsKICAgICAgICBpZiB2NjE2IHRoZW4KICAgICAgICAgICAgdjUwNjpTZW5kS2V5RXZlbnQoZmFsc2UsICJXIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICBfRy5BdXRvRmluZEZyb3plbiA9IGZhbHNlOwogICAgICAgICAgICBpZiBub3QgdjUxMyB0aGVuCiAgICAgICAgICAgICAgICB2MTQ6Tm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICBUaXRsZSA9ICJNaW4gR2FtaW5nIiwKICAgICAgICAgICAgICAgICAgICBDb250ZW50ID0gIsSQ4bqjbyBMZXZpYXRoYW4gVMOsbSBUaOG6pXkiLAogICAgICAgICAgICAgICAgICAgIER1cmF0aW9uID0gMTAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdjUxMyA9IHRydWU7CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUxNiA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJBdXRvQ29tZVRpa2kiLCB7CiAgICAgICAgVGl0bGUgPSAiTMOhaSBUaHV54buBbiBW4buBIMSQ4bqjbyBUaWtpIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTE2Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjE3KQogICAgICAgIF9HLkF1dG9Db21lVGlraSA9IHY2MTc7CiAgICBlbmQpOwogICAgdjUwNS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGlmIG5vdCBfRy5BdXRvQ29tZVRpa2kgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYxOCA9IHY1MDQuTG9jYWxQbGF5ZXI7CiAgICAgICAgbG9jYWwgdjYxOSA9IHY2MTguQ2hhcmFjdGVyOwogICAgICAgIGlmIChub3QgdjYxOSBvciBub3QgdjYxOTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSkgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYyMCA9IHY2MTkuSHVtYW5vaWQ7CiAgICAgICAgbG9jYWwgdjYyMSA9IG5pbDsKICAgICAgICBmb3IgdjcxNCwgdjcxNSBpbiBwYWlycyh2NTA3LkJvYXRzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGxvY2FsIHY3MTYgPSB2NzE1OkZpbmRGaXJzdENoaWxkKCJWZWhpY2xlU2VhdCIpOwogICAgICAgICAgICBpZiAodjcxNiBhbmQgKHY3MTYuT2NjdXBhbnQgPT0gdjYyMCkpIHRoZW4KICAgICAgICAgICAgICAgIHY2MjEgPSB2NzE2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGlmIHY2MjEgdGhlbgogICAgICAgICAgICB2NjIxLk1heFNwZWVkID0gdjUwODsKICAgICAgICAgICAgbG9jYWwgdjc3NiA9IENGcmFtZS5uZXcoLSAxNjIxNy43NTY4MzU5Mzc1LCA5LjEyNjc2MTQzNjQ2MjQwMiwgNDQ2LjA2NTM2ODY1MjM0Mzc1KTsKICAgICAgICAgICAgbG9jYWwgdjc3NyA9IHY2MjEuUG9zaXRpb247CiAgICAgICAgICAgIGxvY2FsIHY3NzggPSB2Nzc2LlBvc2l0aW9uOwogICAgICAgICAgICBsb2NhbCB2Nzc5ID0gKHY3NzggLSB2Nzc3KS51bml0OwogICAgICAgICAgICBsb2NhbCB2NzgwID0gdjc3OSAqIHY2MjEuTWF4U3BlZWQgKiB2NTA1LlJlbmRlclN0ZXBwZWQ6V2FpdCgpIDsKICAgICAgICAgICAgdjYyMS5DRnJhbWUgPSB2NjIxLkNGcmFtZSArIHY3ODAgOwogICAgICAgICAgICBsb2NhbCB2NzgyID0gQ0ZyYW1lLm5ldyh2Nzc3LCB2Nzc4KTsKICAgICAgICAgICAgdjYyMS5DRnJhbWUgPSBDRnJhbWUubmV3KHY2MjEuUG9zaXRpb24sIHY3NzgpOwogICAgICAgICAgICBpZiAoKHY2MjEuUG9zaXRpb24gLSB2Nzc4KS5tYWduaXR1ZGUgPCAxMjApIHRoZW4KICAgICAgICAgICAgICAgIF9HLkF1dG9Db21lVGlraSA9IGZhbHNlOwogICAgICAgICAgICAgICAgdjUwNjpTZW5kS2V5RXZlbnQoZmFsc2UsICJXIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTE3ID0gdjE2LlNlYTpBZGRUb2dnbGUoIkF1dG9Db21lSHlkcmEiLCB7CiAgICAgICAgVGl0bGUgPSAiTMOhaSBUaHV54buBbiBW4buBIMSQ4bqjbyBIeWRyYSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUxNzpPbkNoYW5nZWQoZnVuY3Rpb24odjYyMikKICAgICAgICBfRy5BdXRvQ29tZUh5ZHJhID0gdjYyMjsKICAgIGVuZCk7CiAgICB2NTA1LlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgbm90IF9HLkF1dG9Db21lSHlkcmEgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYyMyA9IHY1MDQuTG9jYWxQbGF5ZXI7CiAgICAgICAgbG9jYWwgdjYyNCA9IHY2MjMuQ2hhcmFjdGVyOwogICAgICAgIGlmIChub3QgdjYyNCBvciBub3QgdjYyNDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSkgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYyNSA9IHY2MjQuSHVtYW5vaWQ7CiAgICAgICAgbG9jYWwgdjYyNiA9IG5pbDsKICAgICAgICBmb3IgdjcxNywgdjcxOCBpbiBwYWlycyh2NTA3LkJvYXRzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGxvY2FsIHY3MTkgPSB2NzE4OkZpbmRGaXJzdENoaWxkKCJWZWhpY2xlU2VhdCIpOwogICAgICAgICAgICBpZiAodjcxOSBhbmQgKHY3MTkuT2NjdXBhbnQgPT0gdjYyNSkpIHRoZW4KICAgICAgICAgICAgICAgIHY2MjYgPSB2NzE5OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGlmIHY2MjYgdGhlbgogICAgICAgICAgICB2NjI2Lk1heFNwZWVkID0gdjUwODsKICAgICAgICAgICAgbG9jYWwgdjc4NCA9IENGcmFtZS5uZXcoNTE5My45Mzc1LCAtIDAuMDQ2OTAyODk0OTczNzU0ODgsIDE2MzEuNTc4MzY5MTQwNjI1KTsKICAgICAgICAgICAgbG9jYWwgdjc4NSA9IHY2MjYuUG9zaXRpb247CiAgICAgICAgICAgIGxvY2FsIHY3ODYgPSB2Nzg0LlBvc2l0aW9uOwogICAgICAgICAgICBsb2NhbCB2Nzg3ID0gKHY3ODYgLSB2Nzg1KS51bml0OwogICAgICAgICAgICBsb2NhbCB2Nzg4ID0gdjc4NyAqIHY2MjYuTWF4U3BlZWQgKiB2NTA1LlJlbmRlclN0ZXBwZWQ6V2FpdCgpIDsKICAgICAgICAgICAgdjYyNi5DRnJhbWUgPSB2NjI2LkNGcmFtZSArIHY3ODggOwogICAgICAgICAgICBsb2NhbCB2NzkwID0gQ0ZyYW1lLm5ldyh2Nzg1LCB2Nzg2KTsKICAgICAgICAgICAgdjYyNi5DRnJhbWUgPSBDRnJhbWUubmV3KHY2MjYuUG9zaXRpb24sIHY3ODYpOwogICAgICAgICAgICBpZiAoKHY2MjYuUG9zaXRpb24gLSB2Nzg2KS5tYWduaXR1ZGUgPCAxMjApIHRoZW4KICAgICAgICAgICAgICAgIF9HLkF1dG9Db21lSHlkcmEgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHY1MDY6U2VuZEtleUV2ZW50KGZhbHNlLCAiVyIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgdjE2LlNlYTpBZGRCdXR0b24oewogICAgICAgIFRpdGxlID0gIkJheSDEkOG6v24gS2h1IFbhu7FjIFPEg24iLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTY5MTcuMTU0Mjk2ODc1LCA3Ljc1NzU5NjAxNTkzMDE3NiwgNTExLjgyMDMxMjUpKTsKICAgICAgICBlbmQKICAgIH0pOwogICAgbG9jYWwgdjUxMSA9IHt9OwogICAgbG9jYWwgdjUxOCA9IHsKICAgICAgICAiQmVhc3QgSHVudGVyIiwKICAgICAgICAiU2xlaWdoIiwKICAgICAgICAiTWlyYWNsZSIsCiAgICAgICAgIlRoZSBTZW50aW5lbCIsCiAgICAgICAgIkd1YXJkaWFuIiwKICAgICAgICAiTGFudGVybiIsCiAgICAgICAgIkRpbmdoeSIsCiAgICAgICAgIlBpcmF0ZVNsb29wIiwKICAgICAgICAiUGlyYXRlQnJpZ2FkZSIsCiAgICAgICAgIlBpcmF0ZUdyYW5kQnJpZ2FkZSIsCiAgICAgICAgIk1hcmluZUdyYW5kQnJpZ2FkZSIsCiAgICAgICAgIk1hcmluZUJyaWdhZGUiLAogICAgICAgICJNYXJpbmVTbG9vcCIKICAgIH07CiAgICBsb2NhbCB2NTE5ID0gdjE2LlNlYTpBZGREcm9wZG93bigiRHJvcGRvd25Cb2F0IiwgewogICAgICAgIFRpdGxlID0gIkNo4buNbiBUaHV54buBbiIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBWYWx1ZXMgPSB2NTE4LAogICAgICAgIE11bHRpID0gZmFsc2UsCiAgICAgICAgRGVmYXVsdCA9IDEKICAgIH0pOwogICAgdjUxOTpTZXRWYWx1ZShzZWxlY3RlZEJvYXQpOwogICAgdjUxOTpPbkNoYW5nZWQoZnVuY3Rpb24odjYyNykKICAgICAgICBzZWxlY3RlZEJvYXQgPSB2NjI3OwogICAgZW5kKTsKICAgIGxvY2FsIGZ1bmN0aW9uIHY1MjAodjYyOCkKICAgICAgICBsb2NhbCB2NjI5ID0gewogICAgICAgICAgICBbMV0gPSAiQnV5Qm9hdCIsCiAgICAgICAgICAgIFsyXSA9IHY2MjgKICAgICAgICB9OwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY2MjkpKTsKICAgICAgICB0YXNrLmRlbGF5KDIsIGZ1bmN0aW9uKCkKICAgICAgICAgICAgZm9yIHY3OTEsIHY3OTIgaW4gcGFpcnModjUwNy5Cb2F0czpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgaWYgKHY3OTI6SXNBKCJNb2RlbCIpIGFuZCAodjc5Mi5OYW1lID09IHY2MjgpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjg5NiA9IHY3OTI6RmluZEZpcnN0Q2hpbGQoIlZlaGljbGVTZWF0Iik7CiAgICAgICAgICAgICAgICAgICAgaWYgKHY4OTYgYW5kIG5vdCB2ODk2Lk9jY3VwYW50KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHY1MTFbdjYyOF0gPSB2ODk2OwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKICAgIGxvY2FsIGZ1bmN0aW9uIHY1MjEoKQogICAgICAgIGZvciB2NzIwLCB2NzIxIGluIHBhaXJzKHY1MTEpIGRvCiAgICAgICAgICAgIGlmICh2NzIxIGFuZCB2NzIxLlBhcmVudCBhbmQgKHY3MjEuTmFtZSA9PSAiVmVoaWNsZVNlYXQiKSBhbmQgbm90IHY3MjEuT2NjdXBhbnQpIHRoZW4KICAgICAgICAgICAgICAgIFR3ZWVuMih2NzIxLkNGcmFtZSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGZvciB2NzIyLCB2NzIzIGluIHBhaXJzKHY1MTEpIGRvCiAgICAgICAgICAgIGlmICh2NzIzIGFuZCB2NzIzLlBhcmVudCBhbmQgKHY3MjMuTmFtZSA9PSAiVmVoaWNsZVNlYXQiKSBhbmQgbm90IHY3MjMuT2NjdXBhbnQpIHRoZW4KICAgICAgICAgICAgICAgIHY1MTFbdjcyMl0gPSB2NzIzOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICB2MTYuU2VhOkFkZEJ1dHRvbih7CiAgICAgICAgVGl0bGUgPSAiTXVhIFRodXnhu4FuIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgICAgICB2NTIwKHNlbGVjdGVkQm9hdCk7CiAgICAgICAgZW5kCiAgICB9KTsKICAgIHYxNi5TZWE6QWRkQnV0dG9uKHsKICAgICAgICBUaXRsZSA9ICJCYXkgxJDhur9uIFRodXnhu4FuIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICJEdXkgTmjhuqV0IFRodXnhu4FuIELhuqFuIE11YSDhu54gQ2jhu5cgQ2jhu41uIiwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgdjUyMSgpOwogICAgICAgIGVuZAogICAgfSk7CiAgICBsb2NhbCB2NTIyID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVRlcnJvcnNoYXJrIiwgewogICAgICAgIFRpdGxlID0gIsSQ4bqlbSBDw6EgTeG6rXAiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MjI6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MzApCiAgICAgICAgX0cuQXV0b1RlcnJvcnNoYXJrID0gdjYzMDsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlVGVycm9yc2hhcms6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvVGVycm9yc2hhcmsgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiVGVycm9yc2hhcmsiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ0NCwgdjE0NDUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NDUuTmFtZSA9PSAiVGVycm9yc2hhcmsiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDQ1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTQ0NTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE0NDUuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0NS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDUuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQ0NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvVGVycm9yc2hhcmsgb3Igbm90IHYxNDQ1LlBhcmVudCBvciAodjE0NDUuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVGVycm9yc2hhcmsiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVGVycm9yc2hhcmsiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTIzID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVBpcmFuaGEiLCB7CiAgICAgICAgVGl0bGUgPSAixJDhuqVtIFBpcmFuaGEiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MjM6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MzEpCiAgICAgICAgX0cuZmFybXBpcmFueWEgPSB2NjMxOwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVQaXJhbmhhOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuZmFybXBpcmFueWEgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiUGlyYW5oYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDQ2LCB2MTQ0NyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ0Ny5OYW1lID09ICJQaXJhbmhhIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ0NzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjE0NDc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxNDQ3Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQ3Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDcuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQ3Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NDcuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuZmFybXBpcmFueWEgb3Igbm90IHYxNDQ3LlBhcmVudCBvciAodjE0NDcuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiUGlyYW5oYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJQaXJhbmhhIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUyNCA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVTaGFyayIsIHsKICAgICAgICBUaXRsZSA9ICLEkOG6pW0gQ8OhIENvbiIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUyNDpPbkNoYW5nZWQoZnVuY3Rpb24odjYzMikKICAgICAgICBfRy5BdXRvU2hhcmsgPSB2NjMyOwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVTaGFyazpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9TaGFyayB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJTaGFyayIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDQ4LCB2MTQ0OSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ0OS5OYW1lID09ICJTaGFyayIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NDk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNDQ5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTQ0OS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0OS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQ5Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0OS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDQ5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuU2l0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvU2hhcmsgb3Igbm90IHYxNDQ5LlBhcmVudCBvciAodjE0NDkuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkJvYXRzLlBpcmF0ZUdyYW5kQnJpZ2FkZS5WZWhpY2xlU2VhdC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDEsIDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJUZXJyb3JzaGFyayIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVGVycm9yc2hhcmsiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MjUgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlRmlzaENyZXciLCB7CiAgICAgICAgVGl0bGUgPSAixJDhuqVtIFTDoHUgQ8OhIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTI1Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjMzKQogICAgICAgIF9HLkF1dG9GaXNoQ3JldyA9IHY2MzM7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUZpc2hDcmV3OlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b0Zpc2hDcmV3IHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkZpc2ggQ3JldyBNZW1iZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ1MCwgdjE0NTEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NTEuTmFtZSA9PSAiRmlzaCBDcmV3IE1lbWJlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NTE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNDUxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTQ1MS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ1MS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDUxLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ1MS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDUxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuU2l0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvRmlzaENyZXcgb3Igbm90IHYxNDUxLlBhcmVudCBvciAodjE0NTEuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkJvYXRzLlBpcmF0ZUdyYW5kQnJpZ2FkZS5WZWhpY2xlU2VhdC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDEsIDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJGaXNoIENyZXcgTWVtYmVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJGaXNoIENyZXcgTWVtYmVyIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTI2ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVNoaXAiLCB7CiAgICAgICAgVGl0bGUgPSAixJDhuqVtIFTDoHUiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MjY6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MzQpCiAgICAgICAgX0cuU2hpcCA9IHY2MzQ7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZVNoaXA6U2V0VmFsdWUoZmFsc2UpOwogICAgZnVuY3Rpb24gQ2hlY2tQaXJhdGVCb2F0KCkKICAgICAgICBsb2NhbCB2NjM1ID0gewogICAgICAgICAgICAiUGlyYXRlR3JhbmRCcmlnYWRlIiwKICAgICAgICAgICAgIlBpcmF0ZUJyaWdhZGUiCiAgICAgICAgfTsKICAgICAgICBmb3IgdjcyNCwgdjcyNSBpbiBuZXh0LCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSBkbwogICAgICAgICAgICBpZiAodGFibGUuZmluZCh2NjM1LCB2NzI1Lk5hbWUpIGFuZCB2NzI1OkZpbmRGaXJzdENoaWxkKCJIZWFsdGgiKSBhbmQgKHY3MjUuSGVhbHRoLlZhbHVlID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgIHJldHVybiB2NzI1OwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5TaGlwIHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBpZiBDaGVja1BpcmF0ZUJvYXQoKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAzMiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMzIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzMzggPSBDaGVja1BpcmF0ZUJvYXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGF3bihUd2Vlbih2MTMzOC5FbmdpbmUuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAtIDIwLCAwKSksIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgQWltQm90U2tpbGxQb3NpdGlvbiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIC0gNSwgMCkgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgU2tpbGxhaW1ib3QgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b1NraWxsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCB2MTMzOCBvciBub3QgdjEzMzguUGFyZW50IG9yICh2MTMzOC5IZWFsdGguVmFsdWUgPD0gMCkgb3Igbm90IENoZWNrUGlyYXRlQm9hdCgpCiAgICAgICAgICAgICAgICAgICAgICAgIFNraWxsYWltYm90ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b1NraWxsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTI3ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZUdob3N0U2hpcCIsIHsKICAgICAgICBUaXRsZSA9ICLEkOG6pW0gVMOgdSBNYSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUyNzpPbkNoYW5nZWQoZnVuY3Rpb24odjYzNikKICAgICAgICBfRy5HaG9zdFNoaXAgPSB2NjM2OwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVHaG9zdFNoaXA6U2V0VmFsdWUoZmFsc2UpOwogICAgZnVuY3Rpb24gQ2hlY2tQaXJhdGVCb2F0KCkKICAgICAgICBsb2NhbCB2NjM3ID0gewogICAgICAgICAgICAiRmlzaEJvYXQiCiAgICAgICAgfTsKICAgICAgICBmb3IgdjcyNiwgdjcyNyBpbiBuZXh0LCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSBkbwogICAgICAgICAgICBpZiAodGFibGUuZmluZCh2NjM3LCB2NzI3Lk5hbWUpIGFuZCB2NzI3OkZpbmRGaXJzdENoaWxkKCJIZWFsdGgiKSBhbmQgKHY3MjcuSGVhbHRoLlZhbHVlID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgIHJldHVybiB2NzI3OwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBfRy5iamlyRmlzaEJvYXQgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIENoZWNrUGlyYXRlQm9hdCgpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDMyLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAzMiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTMzOSA9IENoZWNrUGlyYXRlQm9hdCgpOwogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYXduKFR3ZWVuKHYxMzM5LkVuZ2luZS5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIC0gMjAsIDApLCAxKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvU2tpbGwgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgU2tpbGxhaW1ib3QgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgQWltQm90U2tpbGxQb3NpdGlvbiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIC0gNSwgMCkgOwogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCB2MTMzOS5QYXJlbnQgb3IgKHYxMzM5LkhlYWx0aC5WYWx1ZSA8PSAwKSBvciBub3QgQ2hlY2tQaXJhdGVCb2F0KCkKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b1NraWxsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIFNraWxsYWltYm90ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLmJqaXJGaXNoQm9hdCB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgQ2hlY2tQaXJhdGVCb2F0KCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxVc2VyIik6Q2FwdHVyZUNvbnRyb2xsZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsVXNlciIpOkJ1dHRvbjFEb3duKFZlY3RvcjIubmV3KDEyODAsIDY3MikpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NTIsIHYxNDUzIGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjE0NTM6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ1My5Ub29sVGlwID09ICJNZWxlZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodjE0NTMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiQyIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NTQsIHYxNDU1IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjE0NTU6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ1NS5Ub29sVGlwID09ICJCbG94IEZydWl0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbCh2MTQ1NSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIlYiLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiViIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ1NiwgdjE0NTcgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2MTQ1NzpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDU3LlRvb2xUaXAgPT0gIlN3b3JkIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbCh2MTQ1Nyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NTgsIHYxNDU5IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjE0NTk6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ1OS5Ub29sVGlwID09ICJHdW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6RXF1aXBUb29sKHYxNDU5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUyOCA9IHYxNi5NYWluOkFkZFNlY3Rpb24oIkVsaXRlIik7CiAgICBsb2NhbCB2NTI5ID0gdjE2Lk1haW46QWRkUGFyYWdyYXBoKHsKICAgICAgICBUaXRsZSA9ICJUcuG6oW5nIFRow6FpIEVsaXRlIiwKICAgICAgICBDb250ZW50ID0gIiIKICAgIH0pOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEaWFibG8iKSBvciBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkRlYW5kcmUiKSBvciBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEaWFibG8iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkRlYW5kcmUiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NTI5OlNldERlc2MoIkVsaXRlIEJvc3M6IOKche+4jyB8IEtpbGxlZDogICIgLi4gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiRWxpdGVIdW50ZXIiLCAiUHJvZ3Jlc3MiKSk7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjUyOTpTZXREZXNjKCJFbGl0ZSBCb3NzOiDinYzvuI8gfCBLaWxsZWQ6ICIgLi4gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiRWxpdGVIdW50ZXIiLCAiUHJvZ3Jlc3MiKSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTMwID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVFbGl0ZSIsIHsKICAgICAgICBUaXRsZSA9ICLEkOG6pW0gRWxpdGUiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MzA6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MzgpCiAgICAgICAgX0cuQXV0b0VsaXRlID0gdjYzODsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlRWxpdGU6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9FbGl0ZSB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiRWxpdGVIdW50ZXIiKTsKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSB0cnVlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiRGlhYmxvIikgb3Igc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIkRlYW5kcmUiKSBvciBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiVXJiYW4iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEZWFuZHJlIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJVcmJhbiIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNjYzLCB2MTY2NCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNjY0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTY2NDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE2NjQuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE2NjQuTmFtZSA9PSAiRGlhYmxvIikgb3IgKHYxNjY0Lk5hbWUgPT0gIkRlYW5kcmUiKSBvciAodjE2NjQuTmFtZSA9PSAiVXJiYW4iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbjIodjE2NjQuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2NC5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2NC5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjQuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9FbGl0ZSA9PSBmYWxzZSkgb3IgKHYxNjY0Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE2NjQuUGFyZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEaWFibG8iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4yKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEZWFuZHJlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuMihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkRlYW5kcmUiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuMihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJFbGl0ZUh1bnRlciIpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQKaWYgU2VhMyB0aGVuCiAgICBsb2NhbCB2NTMxID0gdjE2LlNlYTpBZGRTZWN0aW9uKCLEkOG6o28gQsOtIOG6qG4iKTsKICAgIGxvY2FsIHY1MzIgPSB2MTYuU2VhOkFkZFBhcmFncmFwaCh7CiAgICAgICAgVGl0bGUgPSAiVHLhuqFuZyBUaMOhaSIsCiAgICAgICAgQ29udGVudCA9ICIiCiAgICB9KTsKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGxvY2FsIHY3OTMgPSBnYW1lOkdldFNlcnZpY2UoIkxpZ2h0aW5nIikuU2t5Lk1vb25UZXh0dXJlSWQ7CiAgICAgICAgICAgICAgICBpZiAodjc5MyA9PSAiaHR0cDovL3d3dy5yb2Jsb3guY29tL2Fzc2V0Lz9pZD05NzA5MTQ5NDMxIikgdGhlbgogICAgICAgICAgICAgICAgICAgIEZ1bGxNb29uU3RhdHVzID0gIjEwMCUiOwogICAgICAgICAgICAgICAgZWxzZWlmICh2NzkzID09ICJodHRwOi8vd3d3LnJvYmxveC5jb20vYXNzZXQvP2lkPTk3MDkxNDkwNTIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgRnVsbE1vb25TdGF0dXMgPSAiNzUlIjsKICAgICAgICAgICAgICAgIGVsc2VpZiAodjc5MyA9PSAiaHR0cDovL3d3dy5yb2Jsb3guY29tL2Fzc2V0Lz9pZD05NzA5MTQzNzMzIikgdGhlbgogICAgICAgICAgICAgICAgICAgIEZ1bGxNb29uU3RhdHVzID0gIjUwJSI7CiAgICAgICAgICAgICAgICBlbHNlaWYgKHY3OTMgPT0gImh0dHA6Ly93d3cucm9ibG94LmNvbS9hc3NldC8/aWQ9OTcwOTE1MDQwMSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBGdWxsTW9vblN0YXR1cyA9ICIyNSUiOwogICAgICAgICAgICAgICAgZWxzZWlmICh2NzkzID09ICJodHRwOi8vd3d3LnJvYmxveC5jb20vYXNzZXQvP2lkPTk3MDkxNDk2ODAiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgRnVsbE1vb25TdGF0dXMgPSAiMTUlIjsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBGdWxsTW9vblN0YXR1cyA9ICIwJSI7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lLldvcmtzcGFjZS5NYXA6RmluZEZpcnN0Q2hpbGQoIk15c3RpY0lzbGFuZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBNaXJhZ2VTdGF0dXMgPSAi4pyF77iPIjsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBNaXJhZ2VTdGF0dXMgPSAi4p2M77iPIjsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICAgICAgdjUzMjpTZXREZXNjKCLEkOG6o28gQsOtIOG6qG46ICIgLi4gTWlyYWdlU3RhdHVzIC4uICIgfCBUcsSDbmcgVHLDsm46ICIgLi4gRnVsbE1vb25TdGF0dXMpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kKTsKICAgIHYxNi5TZWE6QWRkQnV0dG9uKHsKICAgICAgICBUaXRsZSA9ICJCYXkgxJDhur9uIENo4buXIENhbyIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgVHdlZW5Ub0hpZ2hlc3RQb2ludCgpOwogICAgICAgIGVuZAogICAgfSk7CiAgICBmdW5jdGlvbiBUd2VlblRvSGlnaGVzdFBvaW50KCkKICAgICAgICBsb2NhbCB2NjM5ID0gZ2V0SGlnaGVzdFBvaW50KCk7CiAgICAgICAgaWYgdjYzOSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMih2NjM5LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMjExLjg4LCAwKSk7CiAgICAgICAgZW5kCiAgICBlbmQKICAgIGZ1bmN0aW9uIGdldEhpZ2hlc3RQb2ludCgpCiAgICAgICAgaWYgbm90IGdhbWUuV29ya3NwYWNlLk1hcDpGaW5kRmlyc3RDaGlsZCgiTXlzdGljSXNsYW5kIikgdGhlbgogICAgICAgICAgICByZXR1cm4gbmlsOwogICAgICAgIGVuZAogICAgICAgIGZvciB2NzI4LCB2NzI5IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLk15c3RpY0lzbGFuZDpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiB2NzI5OklzQSgiTWVzaFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjcyOS5NZXNoSWQgPT0gInJieGFzc2V0aWQ6Ly82NzQ1MDM3Nzk2IikgdGhlbgogICAgICAgICAgICAgICAgICAgIHJldHVybiB2NzI5OwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZApsb2NhbCB2NjYgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlVHBBZHZhbmNlZCIsIHsKICAgIFRpdGxlID0gIkJheSDEkOG6v24gQWR2YW5jZWQgRnJ1aXQgRGVhbGVyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY2NjpPbkNoYW5nZWQoZnVuY3Rpb24odjI1NykKICAgIF9HLkF1dG9UcEFkdmFuY2VkID0gdjI1NzsKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b1RwQWR2YW5jZWQgdGhlbgogICAgICAgICAgICBsb2NhbCB2NzMwID0gZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5OUENzOkZpbmRGaXJzdENoaWxkKCJBZHZhbmNlZCBGcnVpdCBEZWFsZXIiKTsKICAgICAgICAgICAgaWYgKHY3MzAgYW5kIHY3MzA6SXNBKCJNb2RlbCIpKSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2ODU2ID0gdjczMC5QcmltYXJ5UGFydCBhbmQgdjczMC5QcmltYXJ5UGFydC5Qb3NpdGlvbiA7CiAgICAgICAgICAgICAgICBpZiB2ODU2IHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyh2ODU2KSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjY3ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVR3ZWVuR2VhciIsIHsKICAgIFRpdGxlID0gIkJheSDEkOG6v24gQsOhbmggUsSDbmciLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjY3Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjU4KQogICAgX0cuVHdlZW5Ub0dlYXIgPSB2MjU4OwplbmQpOwp2MTcuVG9nZ2xlVHdlZW5HZWFyOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5Ud2VlblRvR2VhciB0aGVuCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiTXlzdGljSXNsYW5kIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTA0MCwgdjEwNDEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuTXlzdGljSXNsYW5kOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYxMDQxOklzQSgiTWVzaFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNDEuTWF0ZXJpYWwgPT0gRW51bS5NYXRlcmlhbC5OZW9uKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4yKHYxMDQxLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpsb2NhbCB2NjggPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlbG9ja21vb24iLCB7CiAgICBUaXRsZSA9ICJOaMOsbiBUcsSDbmcgVsOgIETDuW5nIFThu5ljIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY2ODpPbkNoYW5nZWQoZnVuY3Rpb24odjI1OSkKICAgIF9HLkF1dG9Mb2NrTW9vbiA9IHYyNTk7CmVuZCk7CnYxNy5Ub2dnbGVsb2NrbW9vbjpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b0xvY2tNb29uIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY3OTQgPSBnYW1lLkxpZ2h0aW5nOkdldE1vb25EaXJlY3Rpb24oKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY3OTUgPSBnYW1lLldvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNGcmFtZS5wICsgKHY3OTQgKiAxMDApIDsKICAgICAgICAgICAgICAgIGdhbWUuV29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ0ZyYW1lID0gQ0ZyYW1lLmxvb2tBdChnYW1lLldvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNGcmFtZS5wLCB2Nzk1KTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9Mb2NrTW9vbiB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRTpGaXJlU2VydmVyKCJBY3RpdmF0ZUFiaWxpdHkiKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2NjkgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1NhYmVyIiwgewogICAgVGl0bGUgPSAiU2FiZXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjY5Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjYwKQogICAgX0cuQXV0b19TYWJlciA9IHYyNjA7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvU2FiZXI6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgIGlmIChfRy5BdXRvX1NhYmVyIGFuZCAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWUgPj0gMjAwKSkgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLkZpbmFsLlBhcnQuVHJhbnNwYXJlbmN5ID09IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLlF1ZXN0UGxhdGVzLkRvb3IuVHJhbnNwYXJlbmN5ID09IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChDRnJhbWUubmV3KC0gMTYxMi41NTg4NCwgMzYuOTc3NDEzMiwgMTQ4LjcxOTU0MywgMC4zNzA5MTI3OSwgMy4wNzE3MTVlLTksIC0gMC45Mjg2Njc3MjQsIDMuOTcwOTk1ZS04LCAxLCAxLjkxNjc5MzVlLTgsIDAuOTI4NjY3NzI0LCAtIDQuMzk4Njk4ZS04LCAwLjM3MDkxMjc5KS5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDEwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLlF1ZXN0UGxhdGVzLlBsYXRlMS5CdXR0b24uQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5KdW5nbGUuUXVlc3RQbGF0ZXMuUGxhdGUyLkJ1dHRvbi5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkp1bmdsZS5RdWVzdFBsYXRlcy5QbGF0ZTMuQnV0dG9uLkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLlF1ZXN0UGxhdGVzLlBsYXRlNC5CdXR0b24uQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5KdW5nbGUuUXVlc3RQbGF0ZXMuUGxhdGU1LkJ1dHRvbi5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTYxMi41NTg4NCwgMzYuOTc3NDEzMiwgMTQ4LjcxOTU0MywgMC4zNzA5MTI3OSwgMy4wNzE3MTVlLTksIC0gMC45Mjg2Njc3MjQsIDMuOTcwOTk1ZS04LCAxLCAxLjkxNjc5MzVlLTgsIDAuOTI4NjY3NzI0LCAtIDQuMzk4Njk4ZS04LCAwLjM3MDkxMjc5KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuRGVzZXJ0LkJ1cm4uUGFydC5UcmFuc3BhcmVuY3kgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlRvcmNoIikgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiVG9yY2giKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJUb3JjaCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygxMTE0LjYxNDc1LCA1LjA0Njc5NzI4LCA0MzUwLjIyODAzLCAtIDAuNjQ4NDY2NTg3LCAtIDEuMjg3OTkwOWUtOSwgMC43NjEyNDMxMDUsIC0gNS43MDY1MjllLTEwLCAxLCAxLjIwNTg0NTRlLTksIC0gMC43NjEyNDMxMDUsIDMuNDc1NDQ4OGUtMTAsIC0gMC42NDg0NjY1ODcpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDE2MTAuMDA3NTcsIDExLjUwNDk4NTgsIDE2NC4wMDE1ODcsIDAuOTg0ODA3NTUxLCAtIDAuMTY3NzIyMjg1LCAtIDAuMDQ0OTgxODE0OSwgMC4xNzM2NDk0MywgMC45NTEyNDQyMzUsIDAuMjU0OTEyMTk4LCAwLjAwMDAzNDIzNzI4LCAtIDAuMjU4ODUwNTE1LCAwLjk2NTkxNzQwOCkpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiU2lja01hbiIpIH49IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsICJHZXRDdXAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woIkN1cCIpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiRmlsbEN1cCIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5DdXApOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDApOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwgIlNpY2tNYW4iKTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiUmljaFNvbiIpID09IG5pbCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwgIlJpY2hTb24iKTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiUmljaFNvbiIpID09IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiTW9iIExlYWRlciIpIG9yIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiTW9iIExlYWRlciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMjk2Ny41OTUyMSwgLSA0LjkxMDg5ODIxLCA1MzI4LjcwNzAzLCAwLjM0MjIwODU2NCwgLSAwLjAyMjc4NDkwNTUsIDAuOTM5MzQ3ODA0LCAwLjAyNTE2MDM4MTYsIDAuOTk5NTY5NzE0LCAwLjAxNTA3OTYxNjYsIC0gMC45MzkyODcxMjYsIDAuMDE4NDczOTczNSwgMC4zNDI2MzQ1NTkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTc5OSwgdjE4MDAgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxODAwLk5hbWUgPT0gIk1vYiBMZWFkZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiTW9iIExlYWRlciBbTHYuIDEyMF0gW0Jvc3NdIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxODAwOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTgwMDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE4MDAuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MDAuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODAwLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODAwLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTgwMC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAodjE4MDAuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCBfRy5BdXRvX1NhYmVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiTW9iIExlYWRlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiTW9iIExlYWRlciIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiUmljaFNvbiIpID09IDEpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsICJSaWNoU29uIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJSZWxpYyIpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxNDA0LjkxNTA0LCAyOS45NzczMjczLCAzLjgwNTk4MTE2LCAwLjg3NjUxNDQ5NCwgNS42NjkwNjg4ZS05LCAwLjQ4MTM3NTQ1NiwgMi41Mzg1MmUtOCwgMSwgLSA1Ljc5OTk1NmUtOCwgLSAwLjQ4MTM3NTQ1NiwgNi4zMDU3MjY0ZS04LCAwLjg3NjUxNDQ5NCkpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNhYmVyIEV4cGVydCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiU2FiZXIgRXhwZXJ0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NjAsIHYxNDYxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NjE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNDYxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTQ2MS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDYxLk5hbWUgPT0gIlNhYmVyIEV4cGVydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NjEuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2MS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjEuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2MS5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2MS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2MS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjE0NjEuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTQ2MS5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKHYxNDYxLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgX0cuQXV0b19TYWJlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NjEuSHVtYW5vaWQuSGVhbHRoIDw9IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsICJQbGFjZVJlbGljIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NzAgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1BvbGVWMSIsIHsKICAgIFRpdGxlID0gIlBvbGUgVjEiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjcwOk9uQ2hhbmdlZChmdW5jdGlvbih2MjYxKQogICAgX0cuQXV0b19Qb2xlVjEgPSB2MjYxOwplbmQpOwp2MTcuVG9nZ2xlQXV0b1BvbGVWMTpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHY3MSA9IENGcmFtZS5uZXcoLSA3NzQ4LjAxODU1NDY4NzUsIDU2MDYuODA2MTUyMzQzNzUsIC0gMjMwNS44OTg2ODE2NDA2MjUpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX1BvbGVWMSB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiVGh1bmRlciBHb2QiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDQyLCB2MTA0MyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDQzLk5hbWUgPT0gIlRodW5kZXIgR29kIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDQzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTA0MzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjEwNDMuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDMuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQzLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQzLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTA0My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19Qb2xlVjEgb3Igbm90IHYxMDQzLlBhcmVudCBvciAodjEwNDMuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2NzEuUG9zaXRpb24pLk1hZ25pdHVkZSA8IDE1MDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2Vlbih2NzEpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gNzc0OC4wMTg1NTQ2ODc1LCA1NjA2LjgwNjE1MjM0Mzc1LCAtIDIzMDUuODk4NjgxNjQwNjI1KSk7CiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlRodW5kZXIgR29kIikgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVGh1bmRlciBHb2QiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY3MiA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvU2F3IiwgewogICAgVGl0bGUgPSAiQ8awYSBDw6EgTeG6rXAiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjcyOk9uQ2hhbmdlZChmdW5jdGlvbih2MjYyKQogICAgX0cuQXV0b19TYXcgPSB2MjYyOwplbmQpOwp2MTcuVG9nZ2xlQXV0b1NhdzpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHY3MSA9IENGcmFtZS5uZXcoLSA2OTAuMzMwODEwNTQ2ODgsIDE1LjA5NDI1MTYzMjY5LCAxNTgyLjIzODAzNzEwOTQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX1NhdyB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiVGhlIFNhdyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwNDQsIHYxMDQ1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNDUuTmFtZSA9PSAiVGhlIFNhdyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA0NTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjEwNDU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxMDQ1Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQ1Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0NS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0NS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwNDUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fU2F3IG9yIG5vdCB2MTA0NS5QYXJlbnQgb3IgKHYxMDQ1Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjcxLlBvc2l0aW9uKS5NYWduaXR1ZGUgPCAxNTAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odjcxKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDY5MC4zMzA4MTA1NDY4OCwgMTUuMDk0MjUxNjMyNjksIDE1ODIuMjM4MDM3MTA5NCkpOwogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJUaGUgU2F3IikgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVGhlIFNhdyIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjczID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9XYXJkZW4iLCB7CiAgICBUaXRsZSA9ICJLaeG6v20gUXXhuqNuIE5n4bulYyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NzM6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNjMpCiAgICBfRy5BdXRvX1dhcmRlbiA9IHYyNjM7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvV2FyZGVuOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjc0ID0gQ0ZyYW1lLm5ldyg1MTg2LjE0Njk3MjY1NjI1LCAyNC44NjY4NDIyNjk4OTc0NiwgODMyLjE4ODUzNzU5NzY1NjIpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX1dhcmRlbiB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ2hpZWYgV2FyZGVuIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTA0NiwgdjEwNDcgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA0Ny5OYW1lID09ICJDaGllZiBXYXJkZW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNDc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMDQ3OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTA0Ny5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0Ny5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDcuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDcuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDQ3Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX1dhcmRlbiBvciBub3QgdjEwNDcuUGFyZW50IG9yICh2MTA0Ny5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHY3NC5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMTUwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY3NCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNTE4Ni4xNDY5NzI2NTYyNSwgMjQuODY2ODQyMjY5ODk3NDYsIDgzMi4xODg1Mzc1OTc2NTYyKSk7CiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkNoaWVmIFdhcmRlbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkNoaWVmIFdhcmRlbiIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKaWYgU2VhMyB0aGVuCiAgICBsb2NhbCB2NTMzID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUhhbGxvdyIsIHsKICAgICAgICBUaXRsZSA9ICJMxrDhu6FpIEjDoWkiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MzM6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2NDApCiAgICAgICAgQXV0b0hhbGxvd1N5Y3RoZSA9IHY2NDA7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUhhbGxvdzpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIEF1dG9IYWxsb3dTeWN0aGUgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU291bCBSZWFwZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ2MiwgdjE0NjMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2MTQ2My5OYW1lLCAiU291bCBSZWFwZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDYzLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQ2My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDYzLkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKHYxNDYzLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciAoQXV0b0hhbGxvd1N5Y3RoZSA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJIYWxsb3cgRXNzZW5jZSIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGFsbG93IEVzc2VuY2UiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA4OTMyLjMyMjI2NTYyNSwgMTQ2LjgzMTU0Mjk2ODc1LCA2MDYyLjU1MDc4MTI1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIChDRnJhbWUubmV3KC0gODkzMi4zMjIyNjU2MjUsIDE0Ni44MzE1NDI5Njg3NSwgNjA2Mi41NTA3ODEyNSkuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA4CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJIYWxsb3cgRXNzZW5jZSIpOwogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlNvdWwgUmVhcGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlNvdWwgUmVhcGVyIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBBdXRvSGFsbG93U3ljdGhlIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4NTcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkJvbmVzIiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiQnV5IiwKICAgICAgICAgICAgICAgICAgICBbM10gPSAxLAogICAgICAgICAgICAgICAgICAgIFs0XSA9IDEKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODU3KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MzQgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlWWFtYSIsIHsKICAgICAgICBUaXRsZSA9ICJZYW1hIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTM0Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjQxKQogICAgICAgIF9HLkF1dG9ZYW1hID0gdjY0MTsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlWWFtYTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9ZYW1hIHRoZW4KICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJFbGl0ZUh1bnRlciIsICJQcm9ncmVzcyIpID49IDMwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuV2F0ZXJmYWxsLlNlYWxlZEthdGFuYS5IYW5kbGUuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgdW50aWwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIllhbWEiKSBvciBub3QgX0cuQXV0b1lhbWEKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTM1ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZVR1c2hpdGEiLCB7CiAgICAgICAgVGl0bGUgPSAiVHVzaGl0YSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUzNTpPbkNoYW5nZWQoZnVuY3Rpb24odjY0MikKICAgICAgICBBdXRvVHVzaGl0YSA9IHY2NDI7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZVR1c2hpdGE6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBBdXRvVHVzaGl0YSB0aGVuCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkxvbmdtYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEzNDAsIHYxMzQxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxMzQxLk5hbWUgPT0gKCJMb25nbWEiIG9yICh2MTM0MS5OYW1lID09ICJMb25nbWEiKSkpIGFuZCAodjEzNDEuSHVtYW5vaWQuSGVhbHRoID4gMCkgYW5kIHYxMzQxOklzQSgiTW9kZWwiKSBhbmQgdjEzNDE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMzQxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoU2VsZWN0V2VhcG9uKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxMzQxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQxLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQxLkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDEuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM0MS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM0MS5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEzNDEuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IEF1dG9UdXNoaXRhIG9yIG5vdCB2MTM0MS5QYXJlbnQgb3IgKHYxMzQxLkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTAyMzguODc1OTc2NTYzLCAzODkuNzkxMjkwMjgzMiwgLSA5NTQ5Ljc5Mzk0NTMxMjUpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTM2ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUhvbHkiLCB7CiAgICAgICAgVGl0bGUgPSAixJDhu5F0IMSQdeG7kWMiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MzY6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2NDMpCiAgICAgICAgX0cuQXV0b19Ib2x5X1RvcmNoID0gdjY0MzsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlSG9seTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9fSG9seV9Ub3JjaCB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTA3NTIsIDQxNywgLSA5MzY2KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19Ib2x5X1RvcmNoIG9yICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoLSAxMDc1MiwgNDE3LCAtIDkzNjYpKS5NYWduaXR1ZGUgPD0gMTApCiAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTE2NzIsIDMzNCwgLSA5NDc0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19Ib2x5X1RvcmNoIG9yICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoLSAxMTY3MiwgMzM0LCAtIDk0NzQpKS5NYWduaXR1ZGUgPD0gMTApCiAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTIxMzIsIDUyMSwgLSAxMDY1NSkpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fSG9seV9Ub3JjaCBvciAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KC0gMTIxMzIsIDUyMSwgLSAxMDY1NSkpLk1hZ25pdHVkZSA8PSAxMCkKICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMzMzNiwgNDg2LCAtIDY5ODUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX0hvbHlfVG9yY2ggb3IgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldygtIDEzMzM2LCA0ODYsIC0gNjk4NSkpLk1hZ25pdHVkZSA8PSAxMCkKICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMzQ4OSwgMzMyLCAtIDc5MjUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX0hvbHlfVG9yY2ggb3IgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldygtIDEzNDg5LCAzMzIsIC0gNzkyNSkpLk1hZ25pdHVkZSA8PSAxMCkKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kCmxvY2FsIHY3NSA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvQ2FudmFuZGVyIiwgewogICAgVGl0bGUgPSAiQ2FudmFuZGVyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY3NTpPbkNoYW5nZWQoZnVuY3Rpb24odjI2NCkKICAgIF9HLkF1dG9fQ2FudmFuZGVyID0gdjI2NDsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9DYW52YW5kZXI6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2NzEgPSBDRnJhbWUubmV3KDUzMTEuMDc0MjE4NzUsIDQyNi4wMjQzODM1NDQ5MjE5LCAxNjUuMTI3NjI0NTExNzE4NzUpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX0NhbnZhbmRlciB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQmVhdXRpZnVsIFBpcmF0ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwNDgsIHYxMDQ5IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNDkuTmFtZSA9PSAiQmVhdXRpZnVsIFBpcmF0ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA0OTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjEwNDk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxMDQ5Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQ5Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0OS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0OS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwNDkuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fQ2FudmFuZGVyIG9yIG5vdCB2MTA0OS5QYXJlbnQgb3IgKHYxMDQ5Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjcxLlBvc2l0aW9uKS5NYWduaXR1ZGUgPCAxNTAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odjcxKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg1MzExLjA3NDIxODc1LCA0MjYuMDI0MzgzNTQ0OTIxOSwgMTY1LjEyNzYyNDUxMTcxODc1KSk7CiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkJlYXV0aWZ1bCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJCZWF1dGlmdWwgUGlyYXRlIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NzYgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b011c2tldGVlckhhdCIsIHsKICAgIFRpdGxlID0gIk3FqSBMw61uaCBOZ+G7sSBMw6JtIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY3NjpPbkNoYW5nZWQoZnVuY3Rpb24odjI2NSkKICAgIF9HLkF1dG9fTXVza2V0ZWVySGF0ID0gdjI2NTsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9NdXNrZXRlZXJIYXQ6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgwLjEpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9fTXVza2V0ZWVySGF0IHRoZW4KICAgICAgICAgICAgICAgIGlmICgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZSA+PSAxODAwKSBhbmQgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNpdGl6ZW5RdWVzdFByb2dyZXNzIikuS2lsbGVkQmFuZGl0cyA9PSBmYWxzZSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIkZvcmVzdCBQaXJhdGUiKSBhbmQgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIjUwIikgYW5kIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IHRydWUpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRm9yZXN0IFBpcmF0ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTU1OSwgdjE1NjAgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNTYwLk5hbWUgPT0gIkZvcmVzdCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1NjAuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE1NjAuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTYwLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3NNb24gPSB2MTU2MC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE1NjAuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoX0cuQXV0b19NdXNrZXRlZXJIYXQgPT0gZmFsc2UpIG9yIG5vdCB2MTU2MC5QYXJlbnQgb3IgKHYxNTYwLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEzMjA2LjQ1MjE0ODQzOCwgNDI1Ljg5MTk5ODI5MTAyLCAtIDc5NjQuNTUzNzEwOTM3NSkpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMjQ0My44NjcxODc1LCAzMzIuNDAzOTYxMTgxNjQsIC0gNzY3NS40ODkyNTc4MTI1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoVmVjdG9yMy5uZXcoLSAxMjQ0My44NjcxODc1LCAzMzIuNDAzOTYxMTgxNjQsIC0gNzY3NS40ODkyNTc4MTI1KSAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMzApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0YXJ0UXVlc3QiLCAiQ2l0aXplblF1ZXN0IiwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmICgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZSA+PSAxODAwKSBhbmQgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNpdGl6ZW5RdWVzdFByb2dyZXNzIikuS2lsbGVkQm9zcyA9PSBmYWxzZSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSBhbmQgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIkNhcHRhaW4gRWxlcGhhbnQiKSBhbmQgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gdHJ1ZSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDYXB0YWluIEVsZXBoYW50IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNjY1LCB2MTY2NiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE2NjYuTmFtZSA9PSAiQ2FwdGFpbiBFbGVwaGFudCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2xkQ0ZyYW1lRWxlcGhhbnQgPSB2MTY2Ni5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Ni5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Ni5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTY2Ni5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBPbGRDRnJhbWVFbGVwaGFudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoX0cuQXV0b19NdXNrZXRlZXJIYXQgPT0gZmFsc2UpIG9yICh2MTY2Ni5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxNjY2LlBhcmVudCBvciAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTMzNzQuODg5NjQ4NDM4LCA0MjEuMjc3NTI2ODU1NDcsIC0gODIyNS4yMDg5ODQzNzUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTI0NDMuODY3MTg3NSwgMzMyLjQwMzk2MTE4MTY0LCAtIDc2NzUuNDg5MjU3ODEyNSkpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKENGcmFtZS5uZXcoLSAxMjQ0My44NjcxODc1LCAzMzIuNDAzOTYxMTgxNjQsIC0gNzY3NS40ODkyNTc4MTI1KS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2l0aXplblF1ZXN0UHJvZ3Jlc3MiLCAiQ2l0aXplbiIpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWUgPj0gMTgwMCkgYW5kIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDaXRpemVuUXVlc3RQcm9ncmVzcyIsICJDaXRpemVuIikgPT0gMikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTI1MTIuMTM4NjcxODc1LCAzNDAuMzkyNzkxNzQ4MDUsIC0gOTg3Mi44MjAzMTI1KSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpsb2NhbCB2NzcgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b09ic2VydmF0aW9uVjIiLCB7CiAgICBUaXRsZSA9ICJIYWtpIFF1YW4gU8OhdCBWMiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2Nzc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNjYpCiAgICBfRy5BdXRvX09ic2VydmF0aW9uVjIgPSB2MjY2OwplbmQpOwp2MTcuVG9nZ2xlQXV0b09ic2VydmF0aW9uVjI6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9fT2JzZXJ2YXRpb25WMiB0aGVuCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2l0aXplblF1ZXN0UHJvZ3Jlc3MiLCAiQ2l0aXplbiIpID09IDMpIHRoZW4KICAgICAgICAgICAgICAgICAgICBfRy5BdXRvX011c2tldGVlckhhdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQmFuYW5hIikgYW5kIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJBcHBsZSIpIGFuZCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUGluZWFwcGxlIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTI0NDQuNzg1MTU2MjUsIDMzMi40MDM5NjExODE2NCwgLSA3NjczLjE4MDY2NDA2MjUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fT2JzZXJ2YXRpb25WMiBvciAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoLSAxMjQ0NC43ODUxNTYyNSwgMzMyLjQwMzk2MTE4MTY0LCAtIDc2NzMuMTgwNjY0MDYyNSkpLk1hZ25pdHVkZSA8PSAxMCkKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDaXRpemVuUXVlc3RQcm9ncmVzcyIsICJDaXRpemVuIik7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRnJ1aXQgQm93bCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRnJ1aXQgQm93bCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEwOTIwLjEyNSwgNjI0LjIwMjc1ODc4OTA2LCAtIDEwMjY2Ljk5NTExNzE4OCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19PYnNlcnZhdGlvblYyIG9yICgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldygtIDEwOTIwLjEyNSwgNjI0LjIwMjc1ODc4OTA2LCAtIDEwMjY2Ljk5NTExNzE4OCkpLk1hZ25pdHVkZSA8PSAxMCkKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJLZW5UYWxrMiIsICJTdGFydCIpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJLZW5UYWxrMiIsICJCdXkiKTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTU2MSwgdjE1NjIgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTU2Mi5OYW1lID09ICJBcHBsZSIpIG9yICh2MTU2Mi5OYW1lID09ICJCYW5hbmEiKSBvciAodjE1NjIuTmFtZSA9PSAiUGluZWFwcGxlIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTU2Mi5IYW5kbGUuQ0ZyYW1lID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAxLCAxMCkgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCwgdjE1NjIuSGFuZGxlLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgX0cuQXV0b19NdXNrZXRlZXJIYXQgPSB0cnVlOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjc4ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9SYWluYm93SGFraSIsIHsKICAgIFRpdGxlID0gIkhha2kgNyBNw6B1IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY3ODpPbkNoYW5nZWQoZnVuY3Rpb24odjI2NykKICAgIF9HLkF1dG9fUmFpbmJvd0hha2kgPSB2MjY3OwplbmQpOwp2MTcuVG9nZ2xlQXV0b1JhaW5ib3dIYWtpOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoMC4xKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvX1JhaW5ib3dIYWtpIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTE4OTIuMDcwMzEyNSwgOTMwLjU3NjcyMTE5MTQxLCAtIDg3NjAuMTU5MTc5Njg3NSkpOwogICAgICAgICAgICAgICAgICAgIGlmICgoVmVjdG9yMy5uZXcoLSAxMTg5Mi4wNzAzMTI1LCA5MzAuNTc2NzIxMTkxNDEsIC0gODc2MC4xNTkxNzk2ODc1KSAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMzApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJIb3JuZWRNYW4iLCAiQmV0Iik7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgYW5kIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJTdG9uZSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJTdG9uZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNTYzLCB2MTU2NCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTU2NC5OYW1lID09ICJTdG9uZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPbGRDRnJhbWVSYWluYm93ID0gdjE1NjQuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNTY0Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1NjQuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTY0Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gT2xkQ0ZyYW1lUmFpbmJvdzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1NjQuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19SYWluYm93SGFraSBvciAodjE1NjQuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTU2NC5QYXJlbnQgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMDg2LjExNjIxLCAzOC44NDI1OTAzLCA2NzY4LjcxNDM2KSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgYW5kIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJIeWRyYSBMZWFkZXIiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiSHlkcmEgTGVhZGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE2NjksIHYxNjcwIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNjcwLk5hbWUgPT0gIkh5ZHJhIExlYWRlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPbGRDRnJhbWVSYWluYm93ID0gdjE2NzAuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNjcwLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NzAuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjcwLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gT2xkQ0ZyYW1lUmFpbmJvdzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NzAuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19SYWluYm93SGFraSBvciAodjE2NzAuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTY3MC5QYXJlbnQgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNTcxMy45ODg3NywgNjAxLjkyMjk3NCwgMjAyLjc1MTI1MSkpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJLaWxvIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJLaWxvIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTc2MiwgdjE3NjMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE3NjMuTmFtZSA9PSAiS2lsbyBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9sZENGcmFtZVJhaW5ib3cgPSB2MTc2My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE3NjMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc2My5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE3NjMuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzYzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gT2xkQ0ZyYW1lUmFpbmJvdzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX1JhaW5ib3dIYWtpIG9yICh2MTc2My5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxNzYzLlBhcmVudCBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygyODc3LjYxNzQzLCA0MjMuNTU4Njg1LCAtIDcyMDcuMzEwMDYpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiQ2FwdGFpbiBFbGVwaGFudCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNhcHRhaW4gRWxlcGhhbnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTc3NCwgdjE3NzUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE3NzUuTmFtZSA9PSAiQ2FwdGFpbiBFbGVwaGFudCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPbGRDRnJhbWVSYWluYm93ID0gdjE3NzUuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNzc1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE3NzUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzc1Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc3NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IE9sZENGcmFtZVJhaW5ib3c7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19SYWluYm93SGFraSBvciAodjE3NzUuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTc3NS5QYXJlbnQgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMzQ4NS4wMjgzLCAzMzEuNzA5MjU5LCAtIDgwMTIuNDg3MykpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJCZWF1dGlmdWwgUGlyYXRlIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQmVhdXRpZnVsIFBpcmF0ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxODAyLCB2MTgwMyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTgwMy5OYW1lID09ICJCZWF1dGlmdWwgUGlyYXRlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9sZENGcmFtZVJhaW5ib3cgPSB2MTgwMy5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE4MDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgwMy5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MDMuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODAzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gT2xkQ0ZyYW1lUmFpbmJvdzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX1JhaW5ib3dIYWtpIG9yICh2MTgwMy5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxODAzLlBhcmVudCBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg1MzEyLjM1OTg2MzI4MTMsIDIwLjE0MTIwMTAxOTI4NywgLSAxMC4xNTg1Mzg4MTgzNTkpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTE4OTIuMDcwMzEyNSwgOTMwLjU3NjcyMTE5MTQxLCAtIDg3NjAuMTU5MTc5Njg3NSkpOwogICAgICAgICAgICAgICAgICAgIGlmICgoVmVjdG9yMy5uZXcoLSAxMTg5Mi4wNzAzMTI1LCA5MzAuNTc2NzIxMTkxNDEsIC0gODc2MC4xNTkxNzk2ODc1KSAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMzApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJIb3JuZWRNYW4iLCAiQmV0Iik7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpsb2NhbCB2NzkgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1NrdWxsR3VpdGFyIiwgewogICAgVGl0bGUgPSAiU2t1bGwgR3VpdGFyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY3OTpPbkNoYW5nZWQoZnVuY3Rpb24odjI2OCkKICAgIF9HLkF1dG9fU2t1bGxHdWl0YXIgPSB2MjY4OwplbmQpOwp2MTcuVG9nZ2xlQXV0b1NrdWxsR3VpdGFyOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvX1NrdWxsR3VpdGFyIHRoZW4KICAgICAgICAgICAgICAgIGlmIChHZXRXZWFwb25JbnZlbnRvcnkoIlNrdWxsIEd1aXRhciIpID09IGZhbHNlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKChDRnJhbWUubmV3KC0gOTY4MS40NTg5ODQzNzUsIDYuMTM5ODgwNjU3MTk2MDQ1LCA2MzQxLjM3MjA3MDMxMjUpLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA1MDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTlBDczpGaW5kRmlyc3RDaGlsZCgiU2tlbGV0b24gTWFjaGluZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInNvdWxHdWl0YXJCdXkiLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5DYW5kbGUxLlRyYW5zcGFyZW5jeSA9PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uUGxhY2FyZDEuTGVmdC5QYXJ0LlRyYW5zcGFyZW5jeSA9PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUXVlc3QyID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gODc2Mi42OTE0MDYyNSwgMTc2Ljg0NzgzOTM1NTQ2ODc1LCA2MTcxLjMwNzYxNzE4NzUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoKENGcmFtZS5uZXcoLSA4NzYyLjY5MTQwNjI1LCAxNzYuODQ3ODM5MzU1NDY4NzUsIDYxNzEuMzA3NjE3MTg3NSkuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDMpIG9yIG5vdCBfRy5BdXRvX1NrdWxsR3VpdGFyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5QbGFjYXJkNy5MZWZ0LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uUGxhY2FyZDYuTGVmdC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLlBsYWNhcmQ1LkxlZnQuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5QbGFjYXJkNC5SaWdodC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLlBsYWNhcmQzLkxlZnQuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5QbGFjYXJkMi5SaWdodC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLlBsYWNhcmQxLlJpZ2h0LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uVGFibGV0LlNlZ21lbnQxOkZpbmRGaXJzdENoaWxkKCJDbGlja0RldGVjdG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0MTpGaW5kRmlyc3RDaGlsZCgiQ2xpY2tEZXRlY3RvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUXVlc3Q0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gOTU1My41OTg2MzI4MTI1LCA2NS42MjMzODI1NjgzNTkzOCwgNjA0MS41ODgzNzg5MDYyNSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoKENGcmFtZS5uZXcoLSA5NTUzLjU5ODYzMjgxMjUsIDY1LjYyMzM4MjU2ODM1OTM4LCA2MDQxLjU4ODM3ODkwNjI1KS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMykgb3Igbm90IF9HLkF1dG9fU2t1bGxHdWl0YXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQzLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0My5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQ0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0NC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQ0LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDQuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0Ni5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDYuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0Ni5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQ4LkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0OC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQxMC5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDEwLkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDEwLkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDEwLkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUXVlc3QzID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk5QQ3M6RmluZEZpcnN0Q2hpbGQoIkdob3N0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTc5OCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsxXSA9ICJHdWl0YXJQdXp6bGVQcm9ncmVzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbMl0gPSAiR2hvc3QiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHYxNzk4KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiTGl2aW5nIFpvbWJpZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxODA0LCB2MTgwNSBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE4MDU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdjE4MDU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kICh2MTgwNS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTgwNS5OYW1lID09ICJMaXZpbmcgWm9tYmllIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MDUuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODA1Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MDUuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MDUuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MDUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODA1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMjAsIDApIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEwMTYwLjc4NzEwOTM3NSwgMTM4LjY2MTY5NzM4NzY5NTMsIDU5NTUuMDMwNzYxNzE4NzUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsVXNlciIpOkNhcHR1cmVDb250cm9sbGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbFVzZXIiKTpCdXR0b24xRG93bihWZWN0b3IyLm5ldygxMjgwLCA2NzIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMDE2MC43ODcxMDkzNzUsIDEzOC42NjE2OTczODc2OTUzLCA1OTU1LjAzMDc2MTcxODc1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoImdyYXZlc3RvbmVFdmVudCIsIDIpLCAiRXJyb3IiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gODY1My4yMDYwNTQ2ODc1LCAxNDAuOTg0ODc4NTQwMDM5MDYsIDYxNjAuMDMzMjAzMTI1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJncmF2ZXN0b25lRXZlbnQiLCAyKSwgIk5vdGhpbmciKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbigiV2FpdCBGdWxsIE1vb24iKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiZ3JhdmVzdG9uZUV2ZW50IiwgMiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDk2ODEuNDU4OTg0Mzc1LCA2LjEzOTg4MDY1NzE5NjA0NSwgNjM0MS4zNzIwNzAzMTI1KSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2ODAgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b0J1ZGR5IiwgewogICAgVGl0bGUgPSAiS2nhur9tIEJ1ZGR5IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY4MDpPbkNoYW5nZWQoZnVuY3Rpb24odjI2OSkKICAgIF9HLkF1dG9fQnVkZHkgPSB2MjY5OwplbmQpOwp2MTcuVG9nZ2xlQXV0b0J1ZGR5OlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjgxID0gQ0ZyYW1lLm5ldygtIDczMS4yMDM0MzAxNzU3ODEyLCAzODEuNTY1ODg3NDUxMTcxOSwgLSAxMTE5OC40OTUxMTcxODc1KTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19CdWRkeSB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBRdWVlbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwNTAsIHYxMDUxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNTEuTmFtZSA9PSAiQ2FrZSBRdWVlbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA1MTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjEwNTE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxMDUxLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDUxLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA1MS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA1MS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwNTEuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fQnVkZHkgb3Igbm90IHYxMDUxLlBhcmVudCBvciAodjEwNTEuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2ODEuUG9zaXRpb24pLk1hZ25pdHVkZSA8IDE1MDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2Vlbih2ODEpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gNzMxLjIwMzQzMDE3NTc4MTIsIDM4MS41NjU4ODc0NTExNzE5LCAtIDExMTk4LjQ5NTExNzE4NzUpKTsKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBRdWVlbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkNha2UgUXVlZW4iKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY4MiA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvRHVhbEthdGFuYSIsIHsKICAgIFRpdGxlID0gIlNvbmcgS2nhur9tIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY4MjpPbkNoYW5nZWQoZnVuY3Rpb24odjI3MCkKICAgIF9HLkF1dG9fRHVhbEthdGFuYSA9IHYyNzA7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvRHVhbEthdGFuYTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b19EdWFsS2F0YW5hIHRoZW4KICAgICAgICAgICAgICAgIGlmIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJUdXNoaXRhIikgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJUdXNoaXRhIikgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiWWFtYSIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiWWFtYSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlR1c2hpdGEiKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlR1c2hpdGEiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlR1c2hpdGEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woIlR1c2hpdGEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJZYW1hIikgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJZYW1hIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJZYW1hIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJZYW1hIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkxvYWRJdGVtIiwgIlR1c2hpdGEiKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b19EdWFsS2F0YW5hIHRoZW4KICAgICAgICAgICAgICAgIGlmIChHZXRNYXRlcmlhbCgiQWx1Y2FyZCBGcmFnbWVudCIpID09IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlByb2dyZXNzIiwgIkV2aWwiKTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJTdGFydFRyaWFsIiwgIkV2aWwiKTsKICAgICAgICAgICAgICAgIGVsc2VpZiAoR2V0TWF0ZXJpYWwoIkFsdWNhcmQgRnJhZ21lbnQiKSA9PSAxKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJQcm9ncmVzcyIsICJFdmlsIik7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiU3RhcnRUcmlhbCIsICJFdmlsIik7CiAgICAgICAgICAgICAgICBlbHNlaWYgKEdldE1hdGVyaWFsKCJBbHVjYXJkIEZyYWdtZW50IikgPT0gMikgdGhlbgogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiUHJvZ3Jlc3MiLCAiRXZpbCIpOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlN0YXJ0VHJpYWwiLCAiRXZpbCIpOwogICAgICAgICAgICAgICAgZWxzZWlmIChHZXRNYXRlcmlhbCgiQWx1Y2FyZCBGcmFnbWVudCIpID09IDMpIHRoZW4KICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlByb2dyZXNzIiwgIkdvb2QiKTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJTdGFydFRyaWFsIiwgIkdvb2QiKTsKICAgICAgICAgICAgICAgIGVsc2VpZiAoR2V0TWF0ZXJpYWwoIkFsdWNhcmQgRnJhZ21lbnQiKSA9PSA0KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJQcm9ncmVzcyIsICJHb29kIik7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiU3RhcnRUcmlhbCIsICJHb29kIik7CiAgICAgICAgICAgICAgICBlbHNlaWYgKEdldE1hdGVyaWFsKCJBbHVjYXJkIEZyYWdtZW50IikgPT0gNSkgdGhlbgogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiUHJvZ3Jlc3MiLCAiR29vZCIpOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlN0YXJ0VHJpYWwiLCAiR29vZCIpOwogICAgICAgICAgICAgICAgZWxzZWlmIChHZXRNYXRlcmlhbCgiQWx1Y2FyZCBGcmFnbWVudCIpID09IDYpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDdXJzZWQgU2tlbGV0b24gQm9zcyBbTHYuIDIwMjVdIFtCb3NzXSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuUmVwbGljYXRlZFN0b3JhZ2U6RmluZEZpcnN0Q2hpbGQoIkN1cnNlZCBTa2VsZXRvbiBCb3NzIFtMdi4gMjAyNV0gW0Jvc3NdIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ3Vyc2VkIFNrZWxldG9uIEJvc3MgW0x2LiAyMDI1XSBbQm9zc10iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkN1cnNlZCBTa2VsZXRvbiBbTHYuIDIyMDBdIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTg0MiwgdjE4NDMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTg0My5OYW1lID09ICJDdXJzZWQgU2tlbGV0b24gQm9zcyIpIG9yICh2MTg0My5OYW1lID09ICJDdXJzZWQgU2tlbGV0b24iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE4NDMuSHVtYW5vaWQuSGVhbHRoID4gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFN3b3JkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxODQzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogcG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODQzLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4NDMuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4NDMuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODQzLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTg0My5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTg0My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTg0My5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKChDRnJhbWUubmV3KC0gMTIzNjEuNzA2MDU0Njg3NSwgNjAzLjM1NDc5NzM2MzI4MTIsIC0gNjU1MC41MzQxNzk2ODc1KS5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDEwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJQcm9ncmVzcyIsICJHb29kIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlByb2dyZXNzIiwgIkV2aWwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEyMzYxLjcwNjA1NDY4NzUsIDYwMy4zNTQ3OTczNjMyODEyLCAtIDY1NTAuNTM0MTc5Njg3NSkpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTIyNTMuNTQxOTkyMTg3NSwgNTk4Ljg5OTk2MzM3ODkwNjIsIC0gNjU0Ni44Mzg4NjcxODc1KSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTIzNjEuNzA2MDU0Njg3NSwgNjAzLjM1NDc5NzM2MzI4MTIsIC0gNjU1MC41MzQxNzk2ODc1KSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBBdXRvX1F1ZXN0X1lhbWFfMSB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiTXl0aG9sb2dpY2FsIFBpcmF0ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwNTIsIHYxMDUzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNTMuTmFtZSA9PSAiTXl0aG9sb2dpY2FsIFBpcmF0ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTA1My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMCwgLSAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoX0cuQXV0b19EdWFsS2F0YW5hID09IGZhbHNlKSBvciAoQXV0b19RdWVzdF9ZYW1hXzEgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJTdGFydFRyaWFsIiwgIkV2aWwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEzNDUxLjQ2NDg0Mzc1LCA1NDMuNzEyODkwNjI1LCAtIDY5NjEuMDAyOTI5Njg3NSkpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBBdXRvX1F1ZXN0X1lhbWFfMiB0aGVuCiAgICAgICAgICAgICAgICBmb3Igdjg1OCwgdjg1OSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODU5OkZpbmRGaXJzdENoaWxkKCJIYXplRVNQIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2ODU5LkhhemVFU1AuU2l6ZSA9IFVEaW0yLm5ldyg1MCwgNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHY4NTkuSGF6ZUVTUC5NYXhEaXN0YW5jZSA9ICJpbmYiOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBmb3Igdjg2MCwgdjg2MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODYxOkZpbmRGaXJzdENoaWxkKCJIYXplRVNQIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2ODYxLkhhemVFU1AuU2l6ZSA9IFVEaW0yLm5ldyg1MCwgNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHY4NjEuSGF6ZUVTUC5NYXhEaXN0YW5jZSA9ICJpbmYiOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBmb3IgdjczMSwgdjczMiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgIGlmIChBdXRvX1F1ZXN0X1lhbWFfMiBhbmQgdjczMjpGaW5kRmlyc3RDaGlsZCgiSGF6ZUVTUCIpIGFuZCAoKHY3MzIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIEZhcm1Qb3NzRXNwLlBvc2l0aW9uKS5tYWduaXR1ZGUgPD0gMzAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIHY3MzIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBGYXJtUG9zc0VzcDsKICAgICAgICAgICAgICAgICAgICB2NzMyLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHY3MzIuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY3MzIuSHVtYW5vaWRSb290UGFydDpGaW5kRmlyc3RDaGlsZCgiQm9keVZlbG9jaXR5IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTA1OCA9IEluc3RhbmNlLm5ldygiQm9keVZlbG9jaXR5IiwgdjczMi5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEwNTguTWF4Rm9yY2UgPSBWZWN0b3IzLm5ldygxLCAxLCAxKSAqIG1hdGguaHVnZSA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMDU4LlZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoMCwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBBdXRvX1F1ZXN0X1lhbWFfMiB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGZvciB2ODY1LCB2ODY2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHY4NjY6RmluZEZpcnN0Q2hpbGQoIkhhemVFU1AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2ODY2Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDIwMDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2ODY2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU3dvcmQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY4NjYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NjYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg2Ni5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg2Ni5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NjYuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODY2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2ODY2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2ODY2Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjg2Ni5IdW1hbm9pZC5IZWFsdGggPD0gMCkgYW5kIHY4NjYuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg2Ni5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9fRHVhbEthdGFuYSA9PSBmYWxzZSkgb3IgKEF1dG9fUXVlc3RfWWFtYV8yID09IGZhbHNlKSBvciBub3Qgdjg2Ni5QYXJlbnQgb3IgKHY4NjYuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2ODY2OkZpbmRGaXJzdENoaWxkKCJIYXplRVNQIikKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTM0MiwgdjEzNDMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2MTM0MzpGaW5kRmlyc3RDaGlsZCgiSGF6ZUVTUCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxMzQzLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDIwMDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEzNDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWVNb24gKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTM0My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIEF1dG9fUXVlc3RfWWFtYV8zIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJIYWxsb3cgRXNzZW5jZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5TdW1tb25lci5EZXRlY3Rpb24uQ0ZyYW1lKTsKICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiSGVsbERpbWVuc2lvbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDdXJzZWQgU2tlbGV0b24gW0x2LiAyMjAwXSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ3Vyc2VkIFNrZWxldG9uIFtMdi4gMjIwMF0gW0Jvc3NdIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJIZWxsJ3MgTWVzc2VuZ2VyIFtMdi4gMjIwMF0gW0Jvc3NdIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTY0MSwgdjE2NDIgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTY0Mi5OYW1lID09ICJDdXJzZWQgU2tlbGV0b24iKSBvciAodjE2NDIuTmFtZSA9PSAiQ3Vyc2VkIFNrZWxldG9uIikgb3IgKHYxNjQyLk5hbWUgPT0gIkhlbGwncyBNZXNzZW5nZXIiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE2NDIuSHVtYW5vaWQuSGVhbHRoID4gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTd29yZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE2NDIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjQyLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjQyLkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY0Mi5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjQyLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NDIuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNjQyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTY0Mi5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxNjQyLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBhbmQgdjE2NDIuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NDIuSHVtYW5vaWQuQW5pbWF0b3I6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKHYxNjQyLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE2NDIuUGFyZW50IG9yIChBdXRvX1F1ZXN0X1lhbWFfMyA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCg1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkhlbGxEaW1lbnNpb24uVG9yY2gxLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIkUiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbShnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5IZWxsRGltZW5zaW9uLlRvcmNoMi5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJFIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSGVsbERpbWVuc2lvbi5Ub3JjaDMuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkhlbGxEaW1lbnNpb24uRXhpdC5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICB1bnRpbCAoX0cuQXV0b19EdWFsS2F0YW5hID09IGZhbHNlKSBvciAoQXV0b19RdWVzdF9ZYW1hXzMgPT0gZmFsc2UpIG9yIChHZXRNYXRlcmlhbCgiQWx1Y2FyZCBGcmFnbWVudCIpID09IDMpCiAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU291bCBSZWFwZXIiKSBvciBnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlOkZpbmRGaXJzdENoaWxkKCJTb3VsIFJlYXBlciBbTHYuIDIxMDBdIFtSYWlkIEJvc3NdIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNvdWwgUmVhcGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE2NzEsIHYxNjcyIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNjcyLk5hbWUgPT0gIlNvdWwgUmVhcGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTY3Mi5IdW1hbm9pZC5IZWFsdGggPiAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE2NzIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoX0cuQXV0b19EdWFsS2F0YW5hID09IGZhbHNlKSBvciAoQXV0b19RdWVzdF9ZYW1hXzMgPT0gZmFsc2UpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJIZWxsRGltZW5zaW9uIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA5NTcwLjAzMzIwMzEyNSwgMzE1LjkzNDY5MjM4MjgxMjUsIDY3MjYuODkzMDY2NDA2MjUpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCb25lcyIsICJCdXkiLCAxLCAxKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIEF1dG9fUXVlc3RfVHVzaGl0YV8xIHRoZW4KICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDk1NDYuOTkwMjM0Mzc1LCAyMS4xMzk4OTI1NzgxMjUsIDQ2ODYuMTE0MjU3ODEyNSkpOwogICAgICAgICAgICB3YWl0KDUpOwogICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gNjEyMC4wNTc2MTcxODc1LCAxNi40NTU3ODAwMjkyOTY4NzUsIC0gMjI1MC42OTcyNjU2MjUpKTsKICAgICAgICAgICAgd2FpdCg1KTsKICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDk1MzMuMjM5MjU3ODEyNSwgNy4yNTQ0NDU1NTI4MjU5MjgsIC0gODM3Mi42OTkyMTg3NSkpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIEF1dG9fUXVlc3RfVHVzaGl0YV8yIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgKChDRnJhbWUubmV3KC0gNTUzOS4zMTE1MjM0Mzc1LCAzMTMuODAwNTM3MTA5Mzc1LCAtIDI5NzIuMzcyMzE0NDUzMTI1KS5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDUwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTA2MSwgdjEwNjIgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBdXRvX1F1ZXN0X1R1c2hpdGFfMiBhbmQgdjEwNjI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdjEwNjI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kICh2MTA2Mi5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTA2Mi5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPCAyMDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFN3b3JkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwNjIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA2Mi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNjIuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA2Mi5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA2Mi5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA2Mi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxMDYyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjEwNjIuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxMDYyLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBhbmQgdjEwNjIuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDYyLkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKHYxMDYyLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjEwNjIuUGFyZW50IG9yIChBdXRvX1F1ZXN0X1R1c2hpdGFfMiA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gNTU0NS4xMjQwMjM0Mzc1LCAzMTMuODAwNTM3MTA5Mzc1LCAtIDI5NzYuNjE2NDU1MDc4MTI1KSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBBdXRvX1F1ZXN0X1R1c2hpdGFfMyB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNha2UgUXVlZW4iKSBvciBnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlOkZpbmRGaXJzdENoaWxkKCJDYWtlIFF1ZWVuIFtMdi4gMjE3NV0gW0Jvc3NdIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNha2UgUXVlZW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ2NCwgdjE0NjUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NjUuTmFtZSA9PSAiQ2FrZSBRdWVlbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NjUuSHVtYW5vaWQuSGVhbHRoID4gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTd29yZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQ2NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2NS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDY1Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDY1Lkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2NS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjE0NjUuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE0NjUuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE0NjUuSHVtYW5vaWQuSGVhbHRoIDw9IDApIGFuZCB2MTQ2NS5IdW1hbm9pZDpGaW5kRmlyc3RDaGlsZCgiQW5pbWF0b3IiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDY1Lkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoX0cuQXV0b19EdWFsS2F0YW5hID09IGZhbHNlKSBvciAoQXV0b19RdWVzdF9UdXNoaXRhXzMgPT0gZmFsc2UpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJIZWF2ZW5seURpbWVuc2lvbiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gNzA5LjMxMzI5MzQ1NzAzMTIsIDM4MS42MDA1ODU5Mzc1LCAtIDExMDExLjM5NjQ4NDM3NSkpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJIZWF2ZW5seURpbWVuc2lvbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDdXJzZWQgU2tlbGV0b24gW0x2LiAyMjAwXSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ3Vyc2VkIFNrZWxldG9uIFtMdi4gMjIwMF0gW0Jvc3NdIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJIZWF2ZW4ncyBHdWFyZGlhbiBbTHYuIDIyMDBdIFtCb3NzXSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE2NTAsIHYxNjUxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE2NTEuTmFtZSA9PSAiQ3Vyc2VkIFNrZWxldG9uIikgb3IgKHYxNjUxLk5hbWUgPT0gIkN1cnNlZCBTa2VsZXRvbiIpIG9yICh2MTY1MS5OYW1lID09ICJIZWF2ZW4ncyBHdWFyZGlhbiIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTY1MS5IdW1hbm9pZC5IZWFsdGggPiAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFN3b3JkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTY1MS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NTEuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NTEuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjUxLkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NTEuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY1MS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjE2NTEuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNjUxLk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE2NTEuSHVtYW5vaWQuSGVhbHRoIDw9IDApIGFuZCB2MTY1MS5IdW1hbm9pZDpGaW5kRmlyc3RDaGlsZCgiQW5pbWF0b3IiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY1MS5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAodjE2NTEuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTY1MS5QYXJlbnQgb3IgKEF1dG9fUXVlc3RfVHVzaGl0YV8zID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSGVhdmVubHlEaW1lbnNpb24uVG9yY2gxLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIkUiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5IZWF2ZW5seURpbWVuc2lvbi5Ub3JjaDIuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkhlYXZlbmx5RGltZW5zaW9uLlRvcmNoMy5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJFIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSGVhdmVubHlEaW1lbnNpb24uRXhpdC5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19EdWFsS2F0YW5hIG9yIG5vdCBBdXRvX1F1ZXN0X1R1c2hpdGFfMyBvciAoR2V0TWF0ZXJpYWwoIkFsdWNhcmQgRnJhZ21lbnQiKSA9PSA2KQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKaWYgU2VhMiB0aGVuCiAgICBsb2NhbCB2NTM3ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUZhY3RvcnkiLCB7CiAgICAgICAgVGl0bGUgPSAixJDhuqVtIE5ow6AgTcOheSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUzNzpPbkNoYW5nZWQoZnVuY3Rpb24odjY0NCkKICAgICAgICBfRy5GYWN0b3J5ID0gdjY0NDsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlRmFjdG9yeTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkZhY3RvcnkgdGhlbgogICAgICAgICAgICAgICAgaWYgZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ29yZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEzNDQsIHYxMzQ1IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTM0NS5OYW1lID09ICJDb3JlIikgYW5kICh2MTM0NS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNDQ4LjQ2NzU2LCAxOTkuMzU2NzgxLCAtIDQ0MS4zODkyNTIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5GYWN0b3J5IG9yICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoNDQ4LjQ2NzU2LCAxOTkuMzU2NzgxLCAtIDQ0MS4zODkyNTIpKS5NYWduaXR1ZGUgPD0gMTApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTM0NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDUuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDUuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQ1Lkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDUuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM0NS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjEzNDUuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxMzQ1Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgdjEzNDUuUGFyZW50IG9yICh2MTM0NS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3IgKF9HLkZhY3RvcnkgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIGdhbWUuUmVwbGljYXRlZFN0b3JhZ2U6RmluZEZpcnN0Q2hpbGQoIkNvcmUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNDQ4LjQ2NzU2LCAxOTkuMzU2NzgxLCAtIDQ0MS4zODkyNTIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5GYWN0b3J5IG9yICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoNDQ4LjQ2NzU2LCAxOTkuMzU2NzgxLCAtIDQ0MS4zODkyNTIpKS5NYWduaXR1ZGUgPD0gMTApCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQKbG9jYWwgdjgzID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9GYXJtU3dhbiIsIHsKICAgIFRpdGxlID0gIsSQ4bqlbSBTd2FuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY4MzpPbkNoYW5nZWQoZnVuY3Rpb24odjI3MSkKICAgIF9HLkF1dG9fRmFybVN3YW4gPSB2MjcxOwplbmQpOwp2MTcuVG9nZ2xlQXV0b0Zhcm1Td2FuOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvRmFybVN3YW4gdGhlbgogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEb24gU3dhbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwNjMsIHYxMDY0IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxMDY0Lk5hbWUgPT0gIkRvbiBTd2FuIikgYW5kICh2MTA2NC5IdW1hbm9pZC5IZWFsdGggPiAwKSBhbmQgdjEwNjQ6SXNBKCJNb2RlbCIpIGFuZCB2MTA2NDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjEwNjQ6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNjQuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDY0Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTA2NC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9GYXJtU3dhbiA9PSBmYWxzZSkgb3IgKHYxMDY0Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDIyODQuOTEyMTA5Mzc1LCAxNS41Mzc2NjYzMjA4MDEsIDkwNS40ODI5MTAxNTYyNSkpOwogICAgICAgICAgICAgICAgICAgIHVudGlsICgoQ0ZyYW1lLm5ldygyMjg0LjkxMjEwOTM3NSwgMTUuNTM3NjY2MzIwODAxLCA5MDUuNDgyOTEwMTU2MjUpLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA0KSBvciAoX0cuQXV0b0Zhcm1Td2FuID09IGZhbHNlKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKbG9jYWwgdjg0ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9SZW5nb2t1IiwgewogICAgVGl0bGUgPSAiUmVuZ29rdSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2ODQ6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzIpCiAgICBfRy5BdXRvX1JlZ29rdSA9IHYyNzI7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvUmVuZ29rdTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b19SZWdva3UgdGhlbgogICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJIaWRkZW4gS2V5Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIaWRkZW4gS2V5IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woIkhpZGRlbiBLZXkiKTsKICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDY1NzEuMTIwMTE3MTg3NSwgMjk5LjIzMDI4NTY0NDUzLCAtIDY5NjcuODQxNzk2ODc1KSk7CiAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU25vdyBMdXJrZXIiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkFyY3RpYyBXYXJyaW9yIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NjYsIHYxNDY3IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKCh2MTQ2Ny5OYW1lID09ICJTbm93IEx1cmtlciIpIG9yICh2MTQ2Ny5OYW1lID09ICJBcmN0aWMgV2FycmlvciIpKSBhbmQgKHYxNDY3Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2Ny5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2Ny5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjE0NjcuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNDY3Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NjcuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiSGlkZGVuIEtleSIpIG9yIChfRy5BdXRvX1JlZ29rdSA9PSBmYWxzZSkgb3Igbm90IHYxNDY3LlBhcmVudCBvciAodjE0NjcuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNTQzOS43MTY3OTY4NzUsIDg0LjQyMDk0NDIxMzg2NywgLSA2NzE1LjE2MzU3NDIxODgpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CmlmIChTZWEyIG9yIFNlYTMpIHRoZW4KICAgIGxvY2FsIHY1MzggPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlSGFraUNvbG9yIiwgewogICAgICAgIFRpdGxlID0gIk11YSBNw6B1IEhha2kiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1Mzg6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2NDUpCiAgICAgICAgX0cuQXV0b19CdXlfRW5jaGFuY2VtZW50ID0gdjY0NTsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlSGFraUNvbG9yOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b19CdXlfRW5jaGFuY2VtZW50IHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4NjcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkNvbG9yc0RlYWxlciIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIjIiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjg2NykpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZAppZiBTZWEyIHRoZW4KICAgIGxvY2FsIHY1MzkgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZVN3b3JkTGVuZ2VuZCIsIHsKICAgICAgICBUaXRsZSA9ICJNdWEgS2nhur9tIEh1eeG7gW4gVGhv4bqhaSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUzOTpPbkNoYW5nZWQoZnVuY3Rpb24odjY0NikKICAgICAgICBfRy5CdXlMZW5nZW5kU3dvcmQgPSB2NjQ2OwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVTd29yZExlbmdlbmQ6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiAoX0cuQnV5TGVuZ2VuZFN3b3JkIG9yIFRyaXBsZV9BKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjg5NyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxlZ2VuZGFyeVN3b3JkRGVhbGVyIiwKICAgICAgICAgICAgICAgICAgICAgICAgWzJdID0gIjIiCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODk3KSk7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQKaWYgU2VhMiB0aGVuCiAgICBsb2NhbCB2NTQwID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVFdm9SYWNlIiwgewogICAgICAgIFRpdGxlID0gIk7Dom5nIFThu5ljIFYyIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTQwOk9uQ2hhbmdlZChmdW5jdGlvbih2NjQ3KQogICAgICAgIF9HLkF1dG9Fdm9SYWNlID0gdjY0NzsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlRXZvUmFjZTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICB3aGlsZSB3YWl0KDAuMSkgZG8KICAgICAgICAgICAgICAgIGlmIF9HLkF1dG9Fdm9SYWNlIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlOkZpbmRGaXJzdENoaWxkKCJFdm9sdmVkIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWxjaGVtaXN0IiwgIjEiKSA9PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMjc3OS44MzUyMSwgNzIuOTY2MTQwNywgLSAzNTc0LjAyMDAyLCAtIDAuNzMwNDg0OTAzLCA2LjM5MDE0MWUtOCwgLSAwLjY4MjkyODg2LCAzLjU5OTYzMjJlLTgsIDEsIDUuNTA2NjcwM2UtOCwgMC42ODI5Mjg4NiwgMS41NjQyNDY3ZS04LCAtIDAuNzMwNDg0OTAzKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKFZlY3RvcjMubmV3KC0gMjc3OS44MzUyMSwgNzIuOTY2MTQwNywgLSAzNTc0LjAyMDAyKSAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS4zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJBbGNoZW1pc3QiLCAiMiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWxjaGVtaXN0IiwgIjEiKSA9PSAxKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRmxvd2VyIDEiKSBhbmQgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRmxvd2VyIDEiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkZsb3dlcjEuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRmxvd2VyIDIiKSBhbmQgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRmxvd2VyIDIiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkZsb3dlcjIuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRmxvd2VyIDMiKSBhbmQgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRmxvd2VyIDMiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlpvbWJpZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTgzNCwgdjE4MzUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxODM1Lk5hbWUgPT0gIlpvbWJpZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTgzNS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgzNS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODM1Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxODM1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxODM1Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJGbG93ZXIgMyIpIG9yIG5vdCB2MTgzNS5QYXJlbnQgb3IgKHYxODM1Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciAoX0cuQXV0b0V2b1JhY2UgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDU2ODUuOTIzMzM5ODQzOCwgNDguNDgwMTI1NDI3MjQ2LCAtIDg1My4yMzcyNDM2NTIzNCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWxjaGVtaXN0IiwgIjEiKSA9PSAyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJBbGNoZW1pc3QiLCAiMyIpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kKTsKZW5kCmxvY2FsIHY4NSA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1QiLCB7CiAgICBUaXRsZSA9ICJC4bqtdCBU4buZYyBWMyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2ODU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzMpCiAgICBfRy5BdXRvVCA9IHYyNzM7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvVDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b1QgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUU6RmlyZVNlcnZlcigiQWN0aXZhdGVBYmlsaXR5Iik7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjg2ID0gdjE2LlNldHRpbmc6QWRkVG9nZ2xlKCJUb2dnbGVBdXRvWSIsIHsKICAgIFRpdGxlID0gIkLhuq10IFThu5ljIFY0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY4NjpPbkNoYW5nZWQoZnVuY3Rpb24odjI3NCkKICAgIF9HLkF1dG9ZID0gdjI3NDsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9ZOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvWSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIlkiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJZIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHY4NyA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b0tlbiIsIHsKICAgIFRpdGxlID0gIkLhuq10IEhha2kgUXVhbiBTw6J0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY4NzpPbkNoYW5nZWQoZnVuY3Rpb24odjI3NSkKICAgIF9HLkF1dG9LZW4gPSB2Mjc1OwogICAgaWYgdjI3NSB0aGVuCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUU6RmlyZVNlcnZlcigiS2VuIiwgdHJ1ZSk7CiAgICBlbHNlCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUU6RmlyZVNlcnZlcigiS2VuIiwgZmFsc2UpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVBdXRvS2VuOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvS2VuIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1FOkZpcmVTZXJ2ZXIoIktlbiIsIHRydWUpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHY4OCA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlU2F2ZVNwYXduIiwgewogICAgVGl0bGUgPSAiTMawdSDEkGnhu4NtIEjhu5NpIFNpbmgiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjg4Ok9uQ2hhbmdlZChmdW5jdGlvbih2Mjc2KQogICAgX0cuU2F2ZVNwYXduID0gdjI3NjsKICAgIGlmIHYyNzYgdGhlbgogICAgICAgIGxvY2FsIHY2NDggPSB7CiAgICAgICAgICAgIFsxXSA9ICJTZXRTcGF3blBvaW50IgogICAgICAgIH07CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjY0OCkpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVTYXZlU3Bhd246U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLlNhdmVTcGF3biB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2Nzk3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJTZXRTcGF3blBvaW50IgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY3OTcpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2ODkgPSByZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuVXRpbC5DYW1lcmFTaGFrZXIpOwp2ODk6U3RvcCgpOwpsb2NhbCB2OTAgPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZUJyaW5nTW9iIiwgewogICAgVGl0bGUgPSAiR29tIFF1w6FpIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gdHJ1ZQp9KTsKdjkwOk9uQ2hhbmdlZChmdW5jdGlvbih2Mjc3KQogICAgX0cuQnJpbmdNb2IgPSB2Mjc3OwplbmQpOwp2MTcuVG9nZ2xlQnJpbmdNb2I6U2V0VmFsdWUodHJ1ZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgZm9yIHY3MzMsIHY3MzQgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICBpZiAoX0cuQnJpbmdNb2IgYW5kIGJyaW5nbW9iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKCh2NzM0Lk5hbWUgPT0gTW9uRmFybSkgYW5kIHY3MzQ6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kICh2NzM0Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NzM0Lk5hbWUgPT0gIkZhY3RvcnkgU3RhZmYiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHY3MzQuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIEZhcm1Qb3MuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAxMDAwMDAwMDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IZWFkLkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IEZhcm1Qb3M7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjczNC5IdW1hbm9pZDpGaW5kRmlyc3RDaGlsZCgiQW5pbWF0b3IiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWQuQW5pbWF0b3I6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWUuUGxheWVycy5Mb2NhbFBsYXllciwgIlNpbXVsYXRpb25SYWRpdXMiLCBtYXRoLmh1Z2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAodjczNC5OYW1lID09IE1vbkZhcm0pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjczNC5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gRmFybVBvcy5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDEwMDAwMDAwMDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gRmFybVBvczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjczNC5IdW1hbm9pZDpGaW5kRmlyc3RDaGlsZCgiQW5pbWF0b3IiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWQuQW5pbWF0b3I6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IZWFkLkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRoaWRkZW5wcm9wZXJ0eShnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIsICJTaW11bGF0aW9uUmFkaXVzIiwgbWF0aC5odWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHY5MSA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlUmVtb3ZlTm90aWZ5IiwgewogICAgVGl0bGUgPSAiWMOzYSBUaMO0bmcgQsOhbyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2OTE6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzgpCiAgICBSZW1vdmVOb3RpZnkgPSB2Mjc4OwplbmQpOwp2MTcuVG9nZ2xlUmVtb3ZlTm90aWZ5OlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgUmVtb3ZlTm90aWZ5IHRoZW4KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlBsYXllckd1aS5Ob3RpZmljYXRpb25zLkVuYWJsZWQgPSBmYWxzZTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTm90aWZpY2F0aW9ucy5FbmFibGVkID0gdHJ1ZTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2OTIgPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZVdoaXRlIiwgewogICAgVGl0bGUgPSAiTcOgbiBIw6xuaCBUcuG6r25nIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY5MjpPbkNoYW5nZWQoZnVuY3Rpb24odjI3OSkKICAgIF9HLldoaXRlU2NyZWVuID0gdjI3OTsKICAgIGlmIChfRy5XaGl0ZVNjcmVlbiA9PSB0cnVlKSB0aGVuCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIik6U2V0M2RSZW5kZXJpbmdFbmFibGVkKGZhbHNlKTsKICAgIGVsc2VpZiAoX0cuV2hpdGVTY3JlZW4gPT0gZmFsc2UpIHRoZW4KICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKTpTZXQzZFJlbmRlcmluZ0VuYWJsZWQodHJ1ZSk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZVdoaXRlOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjkzID0gdjE2LlNldHRpbmc6QWRkU2VjdGlvbigiS8SpIE7Eg25nIFRow7RuZyBUaOG6oW8iKTsKbG9jYWwgdjk0ID0gdjE2LlNldHRpbmc6QWRkVG9nZ2xlKCJUb2dnbGVaIiwgewogICAgVGl0bGUgPSAiS8SpIE7Eg25nIFoiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSB0cnVlCn0pOwp2OTQ6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyODApCiAgICBTa2lsbFogPSB2MjgwOwplbmQpOwp2MTcuVG9nZ2xlWjpTZXRWYWx1ZSh0cnVlKTsKbG9jYWwgdjk1ID0gdjE2LlNldHRpbmc6QWRkVG9nZ2xlKCJUb2dnbGVYIiwgewogICAgVGl0bGUgPSAiS8SpIE7Eg25nIFgiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSB0cnVlCn0pOwp2OTU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyODEpCiAgICBTa2lsbFggPSB2MjgxOwplbmQpOwp2MTcuVG9nZ2xlWDpTZXRWYWx1ZSh0cnVlKTsKbG9jYWwgdjk2ID0gdjE2LlNldHRpbmc6QWRkVG9nZ2xlKCJUb2dnbGVDIiwgewogICAgVGl0bGUgPSAiS8SpIE7Eg25nIEMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSB0cnVlCn0pOwp2OTY6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyODIpCiAgICBTa2lsbEMgPSB2MjgyOwplbmQpOwp2MTcuVG9nZ2xlQzpTZXRWYWx1ZSh0cnVlKTsKbG9jYWwgdjk3ID0gdjE2LlNldHRpbmc6QWRkVG9nZ2xlKCJUb2dnbGVWIiwgewogICAgVGl0bGUgPSAiS8SpIE7Eg25nIFYiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSB0cnVlCn0pOwp2OTc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyODMpCiAgICBTa2lsbFYgPSB2MjgzOwplbmQpOwp2MTcuVG9nZ2xlVjpTZXRWYWx1ZSh0cnVlKTsKbG9jYWwgdjk4ID0gdjE2LlNldHRpbmc6QWRkVG9nZ2xlKCJUb2dnbGVGIiwgewogICAgVGl0bGUgPSAiS8SpIE7Eg25nIEYiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjk4Ok9uQ2hhbmdlZChmdW5jdGlvbih2Mjg0KQogICAgU2tpbGxGID0gdjI4NDsKZW5kKTsKdjE3LlRvZ2dsZUY6U2V0VmFsdWUodHJ1ZSk7CmxvY2FsIHY5OSA9IHYxNi5TdGF0dXM6QWRkUGFyYWdyYXBoKHsKICAgIFRpdGxlID0gIlRow7RuZyBUaW4iLAogICAgQ29udGVudCA9ICLilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIFcbiIgLi4gIlTDqm4gOiAiIC4uIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EaXNwbGF5TmFtZSAuLiAiIChAIiAuLiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuTmFtZSAuLiAiKVxuIiAuLiAiQ+G6pXAgOiAiIC4uIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWUgLi4gIlxuIiAuLiAiVGnhu4FuIDogIiAuLiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLkJlbGkuVmFsdWUgLi4gIlxuIiAuLiAixJBp4buDbSBGIDogIiAuLiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLkZyYWdtZW50cy5WYWx1ZSAuLiAiXG4iIC4uICJUaeG7gW4gVHJ1eSBOw6MgOiAiIC4uIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLmxlYWRlcnN0YXRzWyJCb3VudHkvSG9ub3IiXS5WYWx1ZSAuLiAiXG4iIC4uICJNw6F1OiAiIC4uIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoIC4uICIvIiAuLiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLk1heEhlYWx0aCAuLiAiXG4iIC4uICJOxINuZyBMxrDhu6NuZyA6ICIgLi4gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5FbmVyZ3kuVmFsdWUgLi4gIi8iIC4uIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuRW5lcmd5Lk1heFZhbHVlIC4uICJcbiIgLi4gIlThu5ljIDogIiAuLiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgLi4gIlxuIiAuLiAiVHLDoWkgOiAiIC4uIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuRGV2aWxGcnVpdC5WYWx1ZSAuLiAiXG4iIC4uICLilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEiCn0pOwpsb2NhbCB2MTAwID0gdjE2LlN0YXR1czpBZGRQYXJhZ3JhcGgoewogICAgVGl0bGUgPSAiVGjhu51pIEdpYW4iLAogICAgQ29udGVudCA9ICIiCn0pOwpsb2NhbCBmdW5jdGlvbiB2MTAxKCkKICAgIGxvY2FsIHYyODUgPSBvcy5kYXRlKCIqdCIpOwogICAgbG9jYWwgdjI4NiA9IHYyODUuaG91ciAlIDI0IDsKICAgIGxvY2FsIHYyODcgPSAoKHYyODYgPCAxMikgYW5kICJBTSIpIG9yICJQTSIgOwogICAgbG9jYWwgdjI4OCA9IHN0cmluZy5mb3JtYXQoIiUwMmk6JTAyaTolMDJpICVzIiwgKCh2Mjg2IC0gMSkgJSAxMikgKyAxLCB2Mjg1Lm1pbiwgdjI4NS5zZWMsIHYyODcpOwogICAgbG9jYWwgdjI4OSA9IHN0cmluZy5mb3JtYXQoIiUwMmQvJTAyZC8lMDRkIiwgdjI4NS5kYXksIHYyODUubW9udGgsIHYyODUueWVhcik7CiAgICBsb2NhbCB2MjkwID0gZ2FtZTpHZXRTZXJ2aWNlKCJMb2NhbGl6YXRpb25TZXJ2aWNlIik7CiAgICBsb2NhbCB2MjkxID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik7CiAgICBsb2NhbCB2MjkyID0gdjI5MS5Mb2NhbFBsYXllcjsKICAgIGxvY2FsIHYyOTMgPSB2MjkyLk5hbWU7CiAgICBsb2NhbCB2Mjk0ID0gIlVua25vd24iOwogICAgbG9jYWwgdjI5NSwgdjI5NiA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICByZXR1cm4gdjI5MDpHZXRDb3VudHJ5UmVnaW9uRm9yUGxheWVyQXN5bmModjI5Mik7CiAgICBlbmQpOwogICAgaWYgdjI5NSB0aGVuCiAgICAgICAgdjI5NCA9IHYyOTY7CiAgICBlbmQKICAgIHYxMDA6U2V0RGVzYyh2Mjg5IC4uICItIiAuLiB2Mjg4IC4uICIgWyAiIC4uIHYyOTQgLi4gIiBdIik7CmVuZApzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0cnVlIGRvCiAgICAgICAgdjEwMSgpOwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLlJlbmRlclN0ZXBwZWQ6V2FpdCgpOwogICAgZW5kCmVuZCk7CmxvY2FsIHYxMDIgPSB2MTYuU3RhdHVzOkFkZFBhcmFncmFwaCh7CiAgICBUaXRsZSA9ICJUaOG7nWkgR2lhbiBNw6F5IENo4bunIiwKICAgIENvbnRlbnQgPSAiIgp9KTsKbG9jYWwgZnVuY3Rpb24gdjEwMygpCiAgICBsb2NhbCB2Mjk3ID0gbWF0aC5mbG9vcih3b3Jrc3BhY2UuRGlzdHJpYnV0ZWRHYW1lVGltZSArIDAuNSk7CiAgICBsb2NhbCB2Mjk4ID0gbWF0aC5mbG9vcih2Mjk3IC8gKDYwIF4gMikpICUgMjQgOwogICAgbG9jYWwgdjI5OSA9IG1hdGguZmxvb3IodjI5NyAvIDYwKSAlIDYwIDsKICAgIGxvY2FsIHYzMDAgPSB2Mjk3ICUgNjAgOwogICAgdjEwMjpTZXREZXNjKHN0cmluZy5mb3JtYXQoIiUwMmQgVGnhur9uZy0lMDJkIFBow7p0LSUwMmQgR2nDonkiLCB2Mjk4LCB2Mjk5LCB2MzAwKSk7CmVuZApzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgIHBjYWxsKHYxMDMpOwogICAgZW5kCmVuZCk7CmxvY2FsIHYxMDQgPSB2MTYuU3RhdHVzOkFkZFBhcmFncmFwaCh7CiAgICBUaXRsZSA9ICLEkOG6o28gTGV2aWF0aGFuIiwKICAgIENvbnRlbnQgPSAiIgp9KTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiRnJvemVuRGltZW5zaW9uIikgdGhlbgogICAgICAgICAgICAgICAgdjEwNDpTZXREZXNjKCLinIUiKTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgdjEwNDpTZXREZXNjKCLinYwiKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpsb2NhbCB2MTA1ID0gdjE2LlN0YXR1czpBZGRJbnB1dCgiSW5wdXQiLCB7CiAgICBUaXRsZSA9ICJKb2IgSUQiLAogICAgRGVmYXVsdCA9ICIiLAogICAgUGxhY2Vob2xkZXIgPSAiRMOhbiBKb2IgSUQgVsOgbyDEkMOieSIsCiAgICBOdW1lcmljID0gZmFsc2UsCiAgICBGaW5pc2hlZCA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2MzAxKQogICAgICAgIF9HLkpvYiA9IHYzMDE7CiAgICBlbmQKfSk7CnYxNi5TdGF0dXM6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkLhuq90IMSQ4bqndSBUaGFtIEdpYSBKb2IgSUQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiVGVsZXBvcnRTZXJ2aWNlIik6VGVsZXBvcnRUb1BsYWNlSW5zdGFuY2UoZ2FtZS5wbGFjZUlkLCBfRy5Kb2IsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcik7CiAgICBlbmQKfSk7CnYxNi5TdGF0dXM6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlNhbyBDaMOpcCBKb2IgSUQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIHNldGNsaXBib2FyZCh0b3N0cmluZyhnYW1lLkpvYklkKSk7CiAgICBlbmQKfSk7CmxvY2FsIHYxMDYgPSB2MTYuU3RhdHVzOkFkZFRvZ2dsZSgiTXlUb2dnbGUiLCB7CiAgICBUaXRsZSA9ICJTcGFtIFRoYW0gR2lhIEpvYiBJRCIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMDY6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMDIpCiAgICBfRy5Kb2luID0gdjMwMjsKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuSm9pbiB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVGVsZXBvcnRTZXJ2aWNlIik6VGVsZXBvcnRUb1BsYWNlSW5zdGFuY2UoZ2FtZS5wbGFjZUlkLCBfRy5Kb2IsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcik7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjEwNyA9IHYxNi5TdGF0czpBZGRUb2dnbGUoIlRvZ2dsZU1lbGVlIiwgewogICAgVGl0bGUgPSAiTsOibmcgxJDhuqVtIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMDc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMDMpCiAgICBfRy5BdXRvX1N0YXRzX01lbGVlID0gdjMwMzsKZW5kKTsKdjE3LlRvZ2dsZU1lbGVlOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjEwOCA9IHYxNi5TdGF0czpBZGRUb2dnbGUoIlRvZ2dsZURlIiwgewogICAgVGl0bGUgPSAiTsOibmcgTcOhdSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTA4Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzA0KQogICAgX0cuQXV0b19TdGF0c19EZWZlbnNlID0gdjMwNDsKZW5kKTsKdjE3LlRvZ2dsZURlOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjEwOSA9IHYxNi5TdGF0czpBZGRUb2dnbGUoIlRvZ2dsZVN3b3JkIiwgewogICAgVGl0bGUgPSAiTsOibmcgS2nhur9tIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMDk6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMDUpCiAgICBfRy5BdXRvX1N0YXRzX1N3b3JkID0gdjMwNTsKZW5kKTsKdjE3LlRvZ2dsZVN3b3JkOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjExMCA9IHYxNi5TdGF0czpBZGRUb2dnbGUoIlRvZ2dsZUd1biIsIHsKICAgIFRpdGxlID0gIk7Dom5nIFPDum5nIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMTA6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMDYpCiAgICBfRy5BdXRvX1N0YXRzX0d1biA9IHYzMDY7CmVuZCk7CnYxNy5Ub2dnbGVHdW46U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2MTExID0gdjE2LlN0YXRzOkFkZFRvZ2dsZSgiVG9nZ2xlRnJ1aXQiLCB7CiAgICBUaXRsZSA9ICJOw6JuZyBUcsOhaSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTExOk9uQ2hhbmdlZChmdW5jdGlvbih2MzA3KQogICAgX0cuQXV0b19TdGF0c19EZXZpbF9GcnVpdCA9IHYzMDc7CmVuZCk7CnYxNy5Ub2dnbGVGcnVpdDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9fU3RhdHNfRGV2aWxfRnJ1aXQgdGhlbgogICAgICAgICAgICBsb2NhbCB2NzM3ID0gewogICAgICAgICAgICAgICAgWzFdID0gIkFkZFBvaW50IiwKICAgICAgICAgICAgICAgIFsyXSA9ICJEZW1vbiBGcnVpdCIsCiAgICAgICAgICAgICAgICBbM10gPSAzCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY3MzcpKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX1N0YXRzX0d1biB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3MzggPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiQWRkUG9pbnQiLAogICAgICAgICAgICAgICAgWzJdID0gIkd1biIsCiAgICAgICAgICAgICAgICBbM10gPSAzCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY3MzgpKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX1N0YXRzX1N3b3JkIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjczOSA9IHsKICAgICAgICAgICAgICAgIFsxXSA9ICJBZGRQb2ludCIsCiAgICAgICAgICAgICAgICBbMl0gPSAiU3dvcmQiLAogICAgICAgICAgICAgICAgWzNdID0gMwogICAgICAgICAgICB9OwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NzM5KSk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19TdGF0c19EZWZlbnNlIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjc0MCA9IHsKICAgICAgICAgICAgICAgIFsxXSA9ICJBZGRQb2ludCIsCiAgICAgICAgICAgICAgICBbMl0gPSAiRGVmZW5zZSIsCiAgICAgICAgICAgICAgICBbM10gPSAzCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY3NDApKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX1N0YXRzX01lbGVlIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjc0MSA9IHsKICAgICAgICAgICAgICAgIFsxXSA9ICJBZGRQb2ludCIsCiAgICAgICAgICAgICAgICBbMl0gPSAiTWVsZWUiLAogICAgICAgICAgICAgICAgWzNdID0gMwogICAgICAgICAgICB9OwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NzQxKSk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjExMiA9IHt9Owpmb3IgdjMwOCwgdjMwOSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTpHZXRDaGlsZHJlbigpKSBkbwogICAgdGFibGUuaW5zZXJ0KHYxMTIsIHYzMDkuTmFtZSk7CmVuZApsb2NhbCB2MTEzID0gdjE2LlBsYXllcjpBZGREcm9wZG93bigiU2VsZWN0ZWRQbHkiLCB7CiAgICBUaXRsZSA9ICJDaOG7jW4gTmfGsOG7nWkgQ2jGoWkiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIFZhbHVlcyA9IHYxMTIsCiAgICBNdWx0aSA9IGZhbHNlLAogICAgRGVmYXVsdCA9IDEKfSk7CnYxMTM6U2V0VmFsdWUoX0cuU2VsZWN0UGx5KTsKdjExMzpPbkNoYW5nZWQoZnVuY3Rpb24odjMxMCkKICAgIF9HLlNlbGVjdFBseSA9IHYzMTA7CmVuZCk7CnYxNi5QbGF5ZXI6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlThuqNpIEzhuqFpIE5nxrDhu51pIENoxqFpIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICB0YWJsZS5jbGVhcih2MTEyKTsKICAgICAgICBmb3IgdjU0MSwgdjU0MiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICB0YWJsZS5pbnNlcnQodjExMiwgdjU0Mi5OYW1lKTsKICAgICAgICBlbmQKICAgIGVuZAp9KTsKbG9jYWwgdjExNCA9IHYxNi5QbGF5ZXI6QWRkVG9nZ2xlKCJUb2dnbGVUZWxlcG9ydCIsIHsKICAgIFRpdGxlID0gIkJheSDEkOG6v24gTmfGsOG7nWkgQ2jGoWkiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjExNDpPbkNoYW5nZWQoZnVuY3Rpb24odjMxMSkKICAgIF9HLlRlbGVwb3J0UGx5ID0gdjMxMTsKICAgIGlmICh2MzExID09IGZhbHNlKSB0aGVuCiAgICAgICAgd2FpdCgpOwogICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgVHdlZW4yKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgd2FpdCgpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVUZWxlcG9ydDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLlRlbGVwb3J0UGx5IHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzOkZpbmRGaXJzdENoaWxkKF9HLlNlbGVjdFBseSkgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuMihnYW1lLlBsYXllcnNbX0cuU2VsZWN0UGx5XS5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjU2ID0gdjE2LlBsYXllcjpBZGRTZWN0aW9uKCJLaMOhYyIpOwpsb2NhbCB2MTE1ID0gdjE2LlBsYXllcjpBZGRUb2dnbGUoIlRvZ2dsZU5vQ2xpcCIsIHsKICAgIFRpdGxlID0gIsSQaSBYdXnDqm4gVMaw4budbmciLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSB0cnVlCn0pOwp2MTE1Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzEyKQogICAgX0cuTE9mID0gdjMxMjsKZW5kKTsKdjE3LlRvZ2dsZU5vQ2xpcDpTZXRWYWx1ZSh0cnVlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLlN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkxPZiB0aGVuCiAgICAgICAgICAgICAgICBmb3Igdjg2OCwgdjg2OSBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjg2OTpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2ODY5LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kKTsKZW5kKTsKbG9jYWwgdjExNiA9IHYxNi5QbGF5ZXI6QWRkVG9nZ2xlKCJUb2dnbGVXYWxrb25XYXRlciIsIHsKICAgIFRpdGxlID0gIsSQaSBUcsOqbiBOxrDhu5tjIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gdHJ1ZQp9KTsKdjExNjpPbkNoYW5nZWQoZnVuY3Rpb24odjMxMykKICAgIF9HLldhbGtvbldhdGVyID0gdjMxMzsKZW5kKTsKdjE3LlRvZ2dsZVdhbGtvbldhdGVyOlNldFZhbHVlKHRydWUpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuV2Fsa29uV2F0ZXIgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIldhdGVyQmFzZS1QbGFuZSJdLlNpemUgPSBWZWN0b3IzLm5ldygxMDAwLCAxMTIsIDEwMDApOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiV2F0ZXJCYXNlLVBsYW5lIl0uU2l6ZSA9IFZlY3RvcjMubmV3KDEwMDAsIDgwLCAxMDAwKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2MTE3ID0gdjE2LlBsYXllcjpBZGRUb2dnbGUoIlRvZ2dsZUVuYWJsZVB2cCIsIHsKICAgIFRpdGxlID0gIkLhuq10IFBWUCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTE3Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzE0KQogICAgX0cuRW5hYmxlZFB2UCA9IHYzMTQ7CmVuZCk7CnYxNy5Ub2dnbGVFbmFibGVQdnA6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkVuYWJsZWRQdlAgdGhlbgogICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlB2cERpc2FibGVkLlZpc2libGUgPT0gdHJ1ZSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkVuYWJsZVB2cCIpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKbG9jYWwgdjExOCA9IHYxNi5UZWxlcG9ydDpBZGRTZWN0aW9uKCJUaOG6vyBHaeG7m2kiKTsKbG9jYWwgdjExOSA9IHYxNi5UZWxlcG9ydDpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9TZWEyIiwgewogICAgVGl0bGUgPSAiTmhp4buHbSBW4bulIFF1YSBCaeG7g24gMiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTE5Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzE1KQogICAgX0cuQXV0b19TZWEyID0gdjMxNTsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9TZWEyOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19TZWEyIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgbG9jYWwgdjgwMCA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWU7CiAgICAgICAgICAgICAgICBpZiAoKHY4MDAgPj0gNzAwKSBhbmQgV29ybGQxKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5JY2UuRG9vci5DYW5Db2xsaWRlID09IGZhbHNlKSBhbmQgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkljZS5Eb29yLlRyYW5zcGFyZW5jeSA9PSAxKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTM0NiA9IENGcmFtZS5uZXcoNDg0OS4yOTg4MywgNS42NTEzODE0OSwgNzE5LjYxMTg3Nyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEzNDYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoKHYxMzQ2LlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAzKSBvciAoX0cuQXV0b19TZWEyID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkRyZXNzcm9zYVF1ZXN0UHJvZ3Jlc3MiLCAiRGV0ZWN0aXZlIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJLZXkiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDEzNDcuNzEyNCwgMzcuMzc1MTYwMiwgLSAxMzI1LjY0ODgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKChWZWN0b3IzLm5ldygxMzQ3LjcxMjQsIDM3LjM3NTE2MDIsIC0gMTMyNS42NDg4KSAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMykgb3IgKF9HLkF1dG9fU2VhMiA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkljZS5Eb29yLkNhbkNvbGxpZGUgPT0gZmFsc2UpIGFuZCAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSWNlLkRvb3IuVHJhbnNwYXJlbmN5ID09IDEpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiSWNlIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE2ODAsIHYxNjgxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTY4MS5OYW1lID09ICJJY2UgQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdCB2MTY4MS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNjgxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTY4MTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE2ODEuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPbGRDRnJhbWVTZWNvbmQgPSB2MTY4MS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2ODEuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjgxLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjgxLkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY4MS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2ODEuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBPbGRDRnJhbWVTZWNvbmQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNjgxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRoaWRkZW5wcm9wZXJ0eShnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllciwgIlNpbXVsYXRpb25SYWRpdXMiLCBtYXRoLmh1Z2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX1NlYTIgb3Igbm90IHYxNjgxLlBhcmVudCBvciAodjE2ODEuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiVHJhdmVsRHJlc3Nyb3NhIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkljZSBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJJY2UgQWRtaXJhbCIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldyg1LCAxMCwgNykpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxMjAgPSB2MTYuVGVsZXBvcnQ6QWRkVG9nZ2xlKCJUb2dnbGVBdXRvU2VhMyIsIHsKICAgIFRpdGxlID0gIk5oaeG7h20gVuG7pSBRdWEgQmnhu4NuIDMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEyMDpPbkNoYW5nZWQoZnVuY3Rpb24odjMxNikKICAgIF9HLkF1dG9fU2VhMyA9IHYzMTY7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvU2VhMzpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9TZWEzIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlID49IDE1MDApIGFuZCBXb3JsZDIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBfRy5BdXRvTGV2ZWwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXNbJ0NvbW1GXyddOkludm9rZVNlcnZlcigiWlF1ZXN0UHJvZ3Jlc3MiLCAiR2VuZXJhbCIpID09IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDE5MjYuMzIyMTQzNTU0NywgMTIuODE5ODUxODc1MzA1LCAxNzM4LjMwOTIwNDEwMTYpKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChDRnJhbWUubmV3KC0gMTkyNi4zMjIxNDM1NTQ3LCAxMi44MTk4NTE4NzUzMDUsIDE3MzguMzA5MjA0MTAxNikuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDEwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJaUXVlc3RQcm9ncmVzcyIsICJCZWdpbiIpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoInJpcF9pbmRyYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTU3OCwgdjE1NzkgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNTc5Lk5hbWUgPT0gInJpcF9pbmRyYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2xkQ0ZyYW1lVGhpcmQgPSB2MTU3OS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTU3OS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTU3OS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IE9sZENGcmFtZVRoaXJkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1NzkuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTU3OS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTc5Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJUcmF2ZWxab3UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9TZWEzID09IGZhbHNlKSBvciAodjE1NzkuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTU3OS5QYXJlbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoInJpcF9pbmRyYSIpIGFuZCAoKENGcmFtZS5uZXcoLSAyNjg4MC45MzM1OTM3NSwgMjIuODQ4NTU0NjExMjA2LCA0NzMuMTg5NTE0MTYwMTYpLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAxMDAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDI2ODgwLjkzMzU5Mzc1LCAyMi44NDg1NTQ2MTEyMDYsIDQ3My4xODk1MTQxNjAxNikpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnYxNi5UZWxlcG9ydDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQmnhur9uIDEiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlRyYXZlbE1haW4iKTsKICAgIGVuZAp9KTsKdjE2LlRlbGVwb3J0OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJCaeG6v24gMiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiVHJhdmVsRHJlc3Nyb3NhIik7CiAgICBlbmQKfSk7CnYxNi5UZWxlcG9ydDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQmnhu4NuIDMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlRyYXZlbFpvdSIpOwogICAgZW5kCn0pOwpsb2NhbCB2NTYgPSB2MTYuVGVsZXBvcnQ6QWRkU2VjdGlvbigixJDhuqNvIik7CmlmIFNlYTEgdGhlbgogICAgSXNsYW5kTGlzdCA9IHsKICAgICAgICAiV2luZE1pbGwiLAogICAgICAgICJNYXJpbmUiLAogICAgICAgICJNaWRkbGUgVG93biIsCiAgICAgICAgIkp1bmdsZSIsCiAgICAgICAgIlBpcmF0ZSBWaWxsYWdlIiwKICAgICAgICAiRGVzZXJ0IiwKICAgICAgICAiU25vdyBJc2xhbmQiLAogICAgICAgICJNYXJpbmVGb3JkIiwKICAgICAgICAiQ29sb3NzZXVtIiwKICAgICAgICAiU2t5IElzbGFuZCAxIiwKICAgICAgICAiU2t5IElzbGFuZCAyIiwKICAgICAgICAiU2t5IElzbGFuZCAzIiwKICAgICAgICAiUHJpc29uIiwKICAgICAgICAiTWFnbWEgVmlsbGFnZSIsCiAgICAgICAgIlVuZGVyIFdhdGVyIElzbGFuZCIsCiAgICAgICAgIkZvdW50YWluIENpdHkiLAogICAgICAgICJTaGFuayBSb29tIiwKICAgICAgICAiTW9iIElzbGFuZCIKICAgIH07CmVsc2VpZiBTZWEyIHRoZW4KICAgIElzbGFuZExpc3QgPSB7CiAgICAgICAgIlRoZSBDYWZlIiwKICAgICAgICAiRnJpc3QgU3BvdCIsCiAgICAgICAgIkRhcmsgQXJlYSIsCiAgICAgICAgIkZsYW1pbmdvIE1hbnNpb24iLAogICAgICAgICJGbGFtaW5nbyBSb29tIiwKICAgICAgICAiR3JlZW4gWm9uZSIsCiAgICAgICAgIkZhY3RvcnkiLAogICAgICAgICJDb2xvc3N1aW0iLAogICAgICAgICJab21iaWUgSXNsYW5kIiwKICAgICAgICAiVHdvIFNub3cgTW91bnRhaW4iLAogICAgICAgICJQdW5rIEhhemFyZCIsCiAgICAgICAgIkN1cnNlZCBTaGlwIiwKICAgICAgICAiSWNlIENhc3RsZSIsCiAgICAgICAgIkZvcmdvdHRlbiBJc2xhbmQiLAogICAgICAgICJVc3NvcCBJc2xhbmQiLAogICAgICAgICJNaW5pIFNreSBJc2xhbmQiCiAgICB9OwplbHNlaWYgU2VhMyB0aGVuCiAgICBJc2xhbmRMaXN0ID0gewogICAgICAgICJNYW5zaW9uIiwKICAgICAgICAiUG9ydCBUb3duIiwKICAgICAgICAiR3JlYXQgVHJlZSIsCiAgICAgICAgIkNhc3RsZSBPbiBUaGUgU2VhIiwKICAgICAgICAiTWluaVNreSIsCiAgICAgICAgIkh5ZHJhIElzbGFuZCIsCiAgICAgICAgIkZsb2F0aW5nIFR1cnRsZSIsCiAgICAgICAgIkhhdW50ZWQgQ2FzdGxlIiwKICAgICAgICAiSWNlIENyZWFtIElzbGFuZCIsCiAgICAgICAgIlBlYW51dCBJc2xhbmQiLAogICAgICAgICJDYWtlIElzbGFuZCIsCiAgICAgICAgIkNvY29hIElzbGFuZCIsCiAgICAgICAgIkNhbmR5IElzbGFuZCIsCiAgICAgICAgIlRpa2kgT3V0cG9zdCIKICAgIH07CmVuZApsb2NhbCB2MTIxID0gdjE2LlRlbGVwb3J0OkFkZERyb3Bkb3duKCJEcm9wZG93bklzbGFuZCIsIHsKICAgIFRpdGxlID0gIkNo4buNbiDEkOG6o28iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIFZhbHVlcyA9IElzbGFuZExpc3QsCiAgICBNdWx0aSA9IGZhbHNlLAogICAgRGVmYXVsdCA9IDEKfSk7CnYxMjE6U2V0VmFsdWUoX0cuU2VsZWN0SXNsYW5kKTsKdjEyMTpPbkNoYW5nZWQoZnVuY3Rpb24odjMxNykKICAgIF9HLlNlbGVjdElzbGFuZCA9IHYzMTc7CmVuZCk7CnYxNi5UZWxlcG9ydDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQmF5IMSQ4bq/biDEkOG6o28iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIldpbmRNaWxsIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg5NzkuNzk4OTUwMTk1MzEsIDE2LjUxNjYxMzAwNjU5MiwgMTQyOS4wNDY2MzA4NTk0KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIk1hcmluZSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAyNTY2LjQyOTY4NzUsIDYuODU1NjY4MDY3OTMyMSwgMjA0NS4yNTYxMDM1MTU2KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIk1pZGRsZSBUb3duIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDY5MC4zMzA4MTA1NDY4OCwgMTUuMDk0MjUxNjMyNjksIDE1ODIuMjM4MDM3MTA5NCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJKdW5nbGUiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTYxMi43OTU3NzYzNjcyLCAzNi44NTIwODEyOTg4MjgsIDE0OS4xMjg0MzMyMjc1NCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJQaXJhdGUgVmlsbGFnZSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAxMTgxLjMwOTMyNjE3MTksIDQuNzUxNDkwNTkyOTU2NSwgMzgwMy41NDU2NTQyOTY5KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkRlc2VydCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoOTQ0LjE1Nzg5Nzk0OTIyLCAyMC45MTk3MjkyMzI3ODgsIDQzNzMuMzAwMjkyOTY4OCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJTbm93IElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMTM0Ny44MDY3NjI2OTUzLCAxMDQuNjY4MDYwMzAyNzMsIC0gMTMxOS43MzcwNjA1NDY5KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIk1hcmluZUZvcmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gNDkxNC44MjEyODkwNjI1LCA1MC45NjM2MjY4NjE1NzIsIDQyODEuMDI3ODMyMDMxMykpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJDb2xvc3NldW0iKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTQyNy42MjAzNjEzMjgxLCA3LjI4ODEwNzg3MjAwOTMsIC0gMjc5Mi43NzIyMTY3OTY5KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlNreSBJc2xhbmQgMSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA0ODY5LjEwMjUzOTA2MjUsIDczMy40NjA1MTAyNTM5MSwgLSAyNjY3LjAxODA2NjQwNjMpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiU2t5IElzbGFuZCAyIikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDQ2MDcuODIyNzUsIDg3Mi41NDI0OCwgLSAxNjY3LjU1Njg4KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlNreSBJc2xhbmQgMyIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA3ODk0LjYxNzY3NTc4MTMsIDU1NDcuMTQxNjAxNTYyNSwgLSAzODAuMjkxMTk4NzMwNDcpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiUHJpc29uIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg0ODc1LjMzMDA3ODEyNSwgNS42NTE5ODE4MzA1OTY5LCA3MzQuODUwMjE5NzI2NTYpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiTWFnbWEgVmlsbGFnZSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA1MjQ3LjcxNjMwODU5MzgsIDEyLjg4MzkzNDAyMDk5NiwgODUwNC45Njg3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJVbmRlciBXYXRlciBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDYxMTYzLjg1MTU2MjUsIDExLjY3OTY4NzUsIDE4MTkuNzg0MTc5Njg3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJGb3VudGFpbiBDaXR5IikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg1MTI3LjEyODQxNzk2ODgsIDU5LjUwMTM2NTY2MTYyMSwgNDEwNS40NDU4MDA3ODEzKSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlNoYW5rIFJvb20iKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTQ0Mi4xNjU1MywgMjkuODc4ODI2MSwgLSAyOC4zNTQ3NDc4KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIk1vYiBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMjg1MC4yMDA2OCwgNy4zOTIyNDc2OCwgNTM1NC45OTI2OCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJUaGUgQ2FmZSIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSAyODEuOTM3MDcyNzUzOTA2MjUsIDMwNi4xMzA2MTUyMzQzNzUsIDYwOS4yODAwMjkyOTY4NzUpKTsKICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDM4MC40NzkyNzg1NjQ0NSwgNzcuMjIwMzkwMzE5ODI0LCAyNTUuODI1NTAwNDg4MjgpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiRnJpc3QgU3BvdCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAxMS4zMTE0NTU3MjY2MjQsIDI5LjI3NjczMzM5ODQzOCwgMjc3MS41MjI0NjA5Mzc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkRhcmsgQXJlYSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMzc4MC4wMzAyNzM0Mzc1LCAyMi42NTIxNjQ0NTkyMjksIC0gMzQ5OC41ODU5Mzc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkZsYW1pbmdvIE1hbnNpb24iKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gMjgxLjkzNzA3Mjc1MzkwNjI1LCAzMDYuMTMwNjE1MjM0Mzc1LCA2MDkuMjgwMDI5Mjk2ODc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkZsYW1pbmdvIFJvb20iKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDIyODQuOTEyMTA5Mzc1LCAxNS4xNTIwMzQ3NTk1MjE0ODQsIDkwNS40ODI5MTAxNTYyNSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJHcmVlbiBab25lIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDI0NDguNTMwMDI5Mjk2OSwgNzMuMDE2MTA1NjUxODU1LCAtIDMyMTAuNjMwNjE1MjM0NCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJGYWN0b3J5IikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg0MjQuMTI2OTgzNjQyNTgsIDIxMS4xNjE3MTI2NDY0OCwgLSA0MjcuNTQwNDk2ODI2MTcpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiQ29sb3NzdWltIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDE1MDMuNjIyNDM2NTIzNCwgMjE5Ljc5NTYyMzc3OTMsIDEzNjkuMzEwMTgwNjY0MSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJab21iaWUgSXNsYW5kIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDU2MjIuMDMzMjAzMTI1LCA0OTIuMTk2MDQ0OTIxODgsIC0gNzgxLjc4NTUyMjQ2MDk0KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlR3byBTbm93IE1vdW50YWluIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg3NTMuMTQyODgzMzAwNzgsIDQwOC4yMzU1OTU3MDMxMywgLSA1Mjc0LjYxNDc0NjA5MzgpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiUHVuayBIYXphcmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gNjEyNy42NTQyOTY4NzUsIDE1Ljk1MTc2MjE5OTQwMiwgLSA1MDQwLjI4NjEzMjgxMjUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiQ3Vyc2VkIFNoaXAiKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDkyMy40MDE5Nzc1MzkwNiwgMTI1LjA1NzEyODkwNjI1LCAzMjg4NS44NzUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiSWNlIENhc3RsZSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoNjE0OC40MTE2MjEwOTM4LCAyOTQuMzg2ODcxMzM3ODksIC0gNjc0MS4xMTY2OTkyMTg4KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkZvcmdvdHRlbiBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMzAzMi43NjQxNjAxNTYzLCAzMTcuODk2NzI4NTE1NjMsIC0gMTAwNzUuMzczMDQ2ODc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlVzc29wIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoNDgxNi44NjE4MTY0MDYzLCA4LjQ1OTk4ODU5NDA1NTIsIDI4NjMuODE5NTgwMDc4MSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJNaW5pIFNreSBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMjg4Ljc0MDYwMDU4NTk0LCA0OTMyNi4zMTY0MDYyNSwgLSAzNTI0OC41OTM3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJHcmVhdCBUcmVlIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygyNjgxLjI3MzY4MTY0MDYsIDE2ODIuODA5MjA0MTAxNiwgLSA3MTkwLjk4NTM1MTU2MjUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiQ2FzdGxlIE9uIFRoZSBTZWEiKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNTA3NS41MDkyNzczNDM3NSwgMzE0LjUxNTUwMjkyOTY4NzUsIC0gMzE1MC4wMjI0NjA5Mzc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIk1pbmlTa3kiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMjYwLjY1NTU3ODYxMzI4LCA0OTMyNS44MDQ2ODc1LCAtIDM1MjUzLjU3MDMxMjUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiUG9ydCBUb3duIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDI5MC43Mzc2NzA4OTg0Mzc1LCA2LjcyOTk1MjgxMjE5NDgyNCwgNTM0My41NTM3MTA5Mzc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkh5ZHJhIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNTY2MS41MzIyMjY1NjI1LCAxMDEzLjA5MDc1OTI3NzM0MzgsIC0gMzM0Ljk2NDk5NjMzNzg5MDYpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiRmxvYXRpbmcgVHVydGxlIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDEzMjc0LjUyODMyMDMxMywgNTMxLjgyMDczOTc0NjA5LCAtIDc1NzkuMjIyNjU2MjUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiTWFuc2lvbiIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSAxMjQ2OC41MzgwODU5Mzc1LCAzNzUuMDA5NDI5OTMxNjQwNiwgLSA3NTU0LjYyNTQ4ODI4MTI1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkNhc3RsZSBPbiBUaGUgU2VhIikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDUwNzUuNTA5Mjc3MzQzNzUsIDMxNC41MTU1MDI5Mjk2ODc1LCAtIDMxNTAuMDIyNDYwOTM3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJIYXVudGVkIENhc3RsZSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA5NTE1LjM3MjA3MDMxMjUsIDE2NC4wMDYyNDA4NDQ3MywgNTc4Ni4wNjEwMzUxNTYyKSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkljZSBDcmVhbSBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gOTAyLjU2ODE3NjI2OTUzLCA3OS45MzIwNDQ5ODI5MSwgLSAxMDk4OC44NDc2NTYyNSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJQZWFudXQgSXNsYW5kIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDIwNjIuNzQ3NTU4NTkzOCwgNTAuNDczODkyMjExOTE0LCAtIDEwMjMyLjU2ODM1OTM3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJDYWtlIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAxODg0Ljc3NDc4MDI3MzQzNzUsIDE5LjMyNzUyNjA5MjUyOTI5NywgLSAxMTY2Ni44OTc0NjA5Mzc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkNvY29hIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoODcuOTQyNzY0MjgyMjI2NTYsIDczLjU1NDUxMjAyMzkyNTc4LCAtIDEyMzE5LjQ2NDg0Mzc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkNhbmR5IElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAxMDE0LjQyNDE5NDMzNTkzNzUsIDE0OS4xMTA2ODcyNTU4NTkzOCwgLSAxNDU1NS45NjI4OTA2MjUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiVGlraSBPdXRwb3N0IikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDE2NTQyLjQ0NzI2NTYyNSwgNTUuNjg2MzI4ODg3OTM5NDUsIDEwNDQuNDE2NTAzOTA2MjUpKTsKICAgICAgICBlbmQKICAgIGVuZAp9KTsKdjE2LlRlbGVwb3J0OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJE4burbmcgQmF5IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBDYW5jZWxUd2VlbigpOwogICAgZW5kCn0pOwp2MTYuVmlzdWFsOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJHaeG6oyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgdjMxOCA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyOwogICAgICAgIGxvY2FsIHYzMTkgPSByZXF1aXJlKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Ob3RpZmljYXRpb24pOwogICAgICAgIGxvY2FsIHYzMjAgPSB2MzE4OldhaXRGb3JDaGlsZCgiRGF0YSIpOwogICAgICAgIGxvY2FsIHYzMjEgPSByZXF1aXJlKGdhbWUuUmVwbGljYXRlZFN0b3JhZ2U6V2FpdEZvckNoaWxkKCJFWFBGdW5jdGlvbiIpKTsKICAgICAgICBsb2NhbCB2MzIyID0gcmVxdWlyZShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuRWZmZWN0LkNvbnRhaW5lci5MZXZlbFVwKTsKICAgICAgICBsb2NhbCB2MzIzID0gcmVxdWlyZShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuVXRpbC5Tb3VuZCk7CiAgICAgICAgbG9jYWwgdjMyNCA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5VdGlsLlNvdW5kLlN0b3JhZ2UuT3RoZXI6RmluZEZpcnN0Q2hpbGQoIkxldmVsVXBfUHJveHkiKSBvciBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuVXRpbC5Tb3VuZC5TdG9yYWdlLk90aGVyOkZpbmRGaXJzdENoaWxkKCJMZXZlbFVwIikgOwogICAgICAgIGZ1bmN0aW9uIHYxMjkodjU0MykKICAgICAgICAgICAgbG9jYWwgdjU0NCA9IHY1NDM7CiAgICAgICAgICAgIHdoaWxlIHRydWUgZG8KICAgICAgICAgICAgICAgIGxvY2FsIHY2NDksIHY2NTAgPSBzdHJpbmcuZ3N1Yih2NTQ0LCAiXigtPyVkKykoJWQlZCVkKSIsICIlMSwlMiIpOwogICAgICAgICAgICAgICAgdjU0NCA9IHY2NDk7CiAgICAgICAgICAgICAgICBpZiAodjY1MCA9PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHJldHVybiB2NTQ0OwogICAgICAgIGVuZAogICAgICAgIHYzMTkubmV3KCI8Q29sb3I9WWVsbG93PlFVRVNUIENPTVBMRVRFRCE8Q29sb3I9Lz4iKTpEaXNwbGF5KCk7CiAgICAgICAgdjMxOS5uZXcoIkVhcm5lZDxDb2xvcj1ZZWxsb3c+OSw5OTksOTk5LDk5OSw5OTkgRXhwLjxDb2xvcj0vPigrTm9uZSkiKTpEaXNwbGF5KCk7CiAgICAgICAgdjMxOS5uZXcoIkVhcm5lZDxDb2xvcj1HcmVlbj4kOSw5OTksOTk5LDk5OSw5OTk8Q29sb3I9Lz4iKTpEaXNwbGF5KCk7CiAgICAgICAgdjMxOC5EYXRhLkV4cC5WYWx1ZSA9IDk5OTk5OTk5OTk5OTsKICAgICAgICB2MzE4LkRhdGEuQmVsaS5WYWx1ZSA9IHYzMTguRGF0YS5CZWxpLlZhbHVlICsgOTk5OTk5OTk5OTk5IDsKICAgICAgICBkZWxheSA9IDA7CiAgICAgICAgY291bnQgPSAwOwogICAgICAgIHdoaWxlICh2MzE4LkRhdGEuRXhwLlZhbHVlIC0gdjMyMSh2MzIwLkxldmVsLlZhbHVlKSkgPiAwIGRvCiAgICAgICAgICAgIHYzMTguRGF0YS5FeHAuVmFsdWUgPSB2MzE4LkRhdGEuRXhwLlZhbHVlIC0gdjMyMSh2MzIwLkxldmVsLlZhbHVlKSA7CiAgICAgICAgICAgIHYzMTguRGF0YS5MZXZlbC5WYWx1ZSA9IHYzMTguRGF0YS5MZXZlbC5WYWx1ZSArIDEgOwogICAgICAgICAgICB2MzE4LkRhdGEuUG9pbnRzLlZhbHVlID0gdjMxOC5EYXRhLlBvaW50cy5WYWx1ZSArIDMgOwogICAgICAgICAgICB2MzIyKHsKICAgICAgICAgICAgICAgIHYzMTgKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHYzMjMuUGxheSh2MzIzLCB2MzI0LlZhbHVlKTsKICAgICAgICAgICAgdjMxOS5uZXcoIjxDb2xvcj1HcmVlbj5MRVZFTCBVUCE8Q29sb3I9Lz4oIiAuLiB2MzE4LkRhdGEuTGV2ZWwuVmFsdWUgLi4gIikiKTpEaXNwbGF5KCk7CiAgICAgICAgICAgIGNvdW50ID0gY291bnQgKyAxIDsKICAgICAgICAgICAgaWYgKGNvdW50ID49IDUpIHRoZW4KICAgICAgICAgICAgICAgIGRlbGF5ID0gdGljaygpOwogICAgICAgICAgICAgICAgY291bnQgPSAwOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAp9KTsKdjE2LlZpc3VhbDpBZGRJbnB1dCgiSW5wdXRfTGV2ZWwiLCB7CiAgICBUaXRsZSA9ICJD4bqlcCIsCiAgICBEZWZhdWx0ID0gIiIsCiAgICBQbGFjZWhvbGRlciA9ICJOaOG6rXAiLAogICAgTnVtZXJpYyA9IGZhbHNlLAogICAgRmluaXNoZWQgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odjMyNykKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKVsnTG9jYWxQbGF5ZXInXS5EYXRhLkxldmVsLlZhbHVlID0gdG9udW1iZXIodjMyNyk7CiAgICBlbmQKfSk7CnYxNi5WaXN1YWw6QWRkSW5wdXQoIklucHV0X0VYUCIsIHsKICAgIFRpdGxlID0gIktpbmggTmdoaeG7h20iLAogICAgRGVmYXVsdCA9ICIiLAogICAgUGxhY2Vob2xkZXIgPSAiTmjhuq1wIiwKICAgIE51bWVyaWMgPSBmYWxzZSwKICAgIEZpbmlzaGVkID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYzMjkpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIilbJ0xvY2FsUGxheWVyJ10uRGF0YS5FeHAuVmFsdWUgPSB0b251bWJlcih2MzI5KTsKICAgIGVuZAp9KTsKdjE2LlZpc3VhbDpBZGRJbnB1dCgiSW5wdXRfQmVsaSIsIHsKICAgIFRpdGxlID0gIlRp4buBbiIsCiAgICBEZWZhdWx0ID0gIiIsCiAgICBQbGFjZWhvbGRlciA9ICJOaOG6rXAiLAogICAgTnVtZXJpYyA9IGZhbHNlLAogICAgRmluaXNoZWQgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odjMzMSkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKVsnTG9jYWxQbGF5ZXInXS5EYXRhLkJlbGkuVmFsdWUgPSB0b251bWJlcih2MzMxKTsKICAgIGVuZAp9KTsKdjE2LlZpc3VhbDpBZGRJbnB1dCgiSW5wdXRfRnJhZ21lbnRzIiwgewogICAgVGl0bGUgPSAixJBp4buDbSBGIiwKICAgIERlZmF1bHQgPSAiIiwKICAgIFBsYWNlaG9sZGVyID0gIk5o4bqtcCIsCiAgICBOdW1lcmljID0gZmFsc2UsCiAgICBGaW5pc2hlZCA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2MzMzKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpWydMb2NhbFBsYXllciddLkRhdGEuRnJhZ21lbnRzLlZhbHVlID0gdG9udW1iZXIodjMzMyk7CiAgICBlbmQKfSk7CmxvY2FsIHYxMjIgPSBnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlOkZpbmRGaXJzdENoaWxkKCJSZW1vdGVzIikuQ29tbUZfOkludm9rZVNlcnZlcigiR2V0RnJ1aXRzIik7ClRhYmxlX0RldmlsRnJ1aXRTbmlwZXIgPSB7fTsKU2hvcERldmlsU2VsbCA9IHt9Owpmb3IgdjMzNSwgdjMzNiBpbiBuZXh0LCB2MTIyIGRvCiAgICB0YWJsZS5pbnNlcnQoVGFibGVfRGV2aWxGcnVpdFNuaXBlciwgdjMzNi5OYW1lKTsKICAgIGlmIHYzMzYuT25TYWxlIHRoZW4KICAgICAgICB0YWJsZS5pbnNlcnQoU2hvcERldmlsU2VsbCwgdjMzNi5OYW1lKTsKICAgIGVuZAplbmQKX0cuU2VsZWN0RnJ1aXQgPSAiRHJhZ29uLURyYWdvbiI7Cl9HLlBlcm1hbmVudEZydWl0ID0gIkRyYWdvbi1EcmFnb24iOwpfRy5BdXRvQnV5RnJ1aXRTbmlwZXIgPSBmYWxzZTsKX0cuQXV0b1N3aXRjaFBlcm1hbmVudEZydWl0ID0gZmFsc2U7CmxvY2FsIHYxMjMgPSB2MTYuRnJ1aXQ6QWRkRHJvcGRvd24oIkRyb3Bkb3duRnJ1aXQiLCB7CiAgICBUaXRsZSA9ICJDaOG7jW4gVHLDoWkiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIFZhbHVlcyA9IFRhYmxlX0RldmlsRnJ1aXRTbmlwZXIsCiAgICBNdWx0aSA9IGZhbHNlLAogICAgRGVmYXVsdCA9IDEKfSk7CnYxMjM6U2V0VmFsdWUoX0cuU2VsZWN0RnJ1aXQpOwp2MTIzOk9uQ2hhbmdlZChmdW5jdGlvbih2MzM3KQogICAgX0cuU2VsZWN0RnJ1aXQgPSB2MzM3OwplbmQpOwpsb2NhbCB2MTExID0gdjE2LkZydWl0OkFkZFRvZ2dsZSgiVG9nZ2xlRnJ1aXQiLCB7CiAgICBUaXRsZSA9ICJNdWEgVHLDoWkgQ2jhu41uIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMTE6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMzgpCiAgICBpZiB2MzM4IHRoZW4KICAgICAgICBfRy5BdXRvQnV5RnJ1aXRTbmlwZXIgPSB0cnVlOwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiR2V0RnJ1aXRzIik7CiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlB1cmNoYXNlUmF3RnJ1aXQiLCBfRy5TZWxlY3RGcnVpdCwgZmFsc2UpOwogICAgICAgIGVuZCk7CiAgICAgICAgX0cuQXV0b0J1eUZydWl0U25pcGVyID0gZmFsc2U7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZUZydWl0OlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjEyNCA9IHYxNi5GcnVpdDpBZGREcm9wZG93bigiRHJvcGRvd25QZXJtYW5lbnRGcnVpdCIsIHsKICAgIFRpdGxlID0gIkNo4buNbiBUcsOhaSBWxKluaCBWaeG7hW4iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIFZhbHVlcyA9IFRhYmxlX0RldmlsRnJ1aXRTbmlwZXIsCiAgICBNdWx0aSA9IGZhbHNlLAogICAgRGVmYXVsdCA9IDEKfSk7CnYxMjQ6U2V0VmFsdWUoX0cuUGVybWFuZW50RnJ1aXQpOwp2MTI0Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzM5KQogICAgX0cuUGVybWFuZW50RnJ1aXQgPSB2MzM5OwplbmQpOwpsb2NhbCB2MTI1ID0gdjE2LkZydWl0OkFkZFRvZ2dsZSgiVG9nZ2xlUGVybWFuZW50RnJ1aXQiLCB7CiAgICBUaXRsZSA9ICLEkOG7lWkgVHLDoWkgVsSpbmggVmnhu4VuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMjU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNDApCiAgICBpZiB2MzQwIHRoZW4KICAgICAgICBfRy5BdXRvU3dpdGNoUGVybWFuZW50RnJ1aXQgPSB0cnVlOwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgbG9jYWwgdjc0MiA9IHsKICAgICAgICAgICAgICAgIFsxXSA9ICJTd2l0Y2hGcnVpdCIsCiAgICAgICAgICAgICAgICBbMl0gPSBfRy5QZXJtYW5lbnRGcnVpdAogICAgICAgICAgICB9OwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NzQyKSk7CiAgICAgICAgZW5kKTsKICAgICAgICBfRy5BdXRvU3dpdGNoUGVybWFuZW50RnJ1aXQgPSBmYWxzZTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlUGVybWFuZW50RnJ1aXQ6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2MTI2ID0gdjE2LkZydWl0OkFkZFRvZ2dsZSgiVG9nZ2xlU3RvcmUiLCB7CiAgICBUaXRsZSA9ICJMxrB1IFRyw6FpIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMjY6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNDEpCiAgICBfRy5BdXRvU3RvcmVGcnVpdCA9IHYzNDE7CmVuZCk7CnYxNy5Ub2dnbGVTdG9yZTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b1N0b3JlRnJ1aXQgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBfRy5BdXRvU3RvcmVGcnVpdCB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQm9tYiBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCb21iIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJCb21iLUJvbWIiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQm9tYiBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTcGlrZSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTcGlrZSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiU3Bpa2UtU3Bpa2UiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3Bpa2UgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQ2hvcCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJDaG9wIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJDaG9wLUNob3AiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQ2hvcCBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTcHJpbmcgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3ByaW5nIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJTcHJpbmctU3ByaW5nIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwcmluZyBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJSb2NrZXQgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiS2lsbyBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiUm9ja2V0LVJvY2tldCIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJLaWxvIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlNtb2tlIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNtb2tlIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJTbW9rZS1TbW9rZSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTbW9rZSBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTcGluIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwaW4gRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlNwaW4tU3BpbiIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTcGluIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZsYW1lIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZsYW1lIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJGbGFtZS1GbGFtZSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJGbGFtZSBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJGYWxjb24gRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRmFsY29uIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJGYWxjb24iLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiYWxjb24gRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSWNlIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkljZSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiSWNlLUljZSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJJY2UgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU2FuZCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTYW5kIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJTYW5kLVNhbmQiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU2FuZCBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJEYXJrIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkRhcmsgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkRhcmstRGFyayIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEYXJrIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkdob3N0IEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlJldml2ZSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiR2hvc3QtR2hvc3QiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUmV2aXZlIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkRpYW1vbmQgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRGlhbW9uZCBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiRGlhbW9uZC1EaWFtb25kIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkRpYW1vbmQgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTGlnaHQgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTGlnaHQgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkxpZ2h0LUxpZ2h0IiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkxpZ2h0IEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkxvdmUgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTG92ZSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiTG92ZS1Mb3ZlIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkxvdmUgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUnViYmVyIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlJ1YmJlciBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiUnViYmVyLVJ1YmJlciIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJSdWJiZXIgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQmFycmllciBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCYXJyaWVyIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJCYXJyaWVyLUJhcnJpZXIiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQmFycmllciBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJNYWdtYSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJNYWdtYSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiTWFnbWEtTWFnbWEiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTWFnbWEgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUG9ydGFsIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlBvcnRhbCBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiRG9vci1Eb29yIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlBvcnRhbCBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJRdWFrZSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJRdWFrZSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiUXVha2UtUXVha2UiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUXVha2UgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQnVkZGhhIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkJ1ZGRoYSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1ZGRoYSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCdWRkaGEgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU3BpZGVyIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwaWRlciBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiU3BpZGVyLVNwaWRlciIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTcGlkZXIgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQmlyZDogUGhvZW5peCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQaG9lbml4IEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJQaG9lbml4IiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlBob2VuaXggRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUnVtYmxlIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlJ1bWJsZSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiUnVtYmxlLVJ1bWJsZSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJSdW1ibGUgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUGFpbiBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQYWluIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJQYWluLVBhaW4iLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUGFpbiBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJHcmF2aXR5IEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkdyYXZpdHkgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkdyYXZpdHktR3Jhdml0eSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJHcmF2aXR5IEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkRvdWdoIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkRvdWdoIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJEb3VnaC1Eb3VnaCIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEb3VnaCBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTaGFkb3cgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU2hhZG93IEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJTaGFkb3ctU2hhZG93IiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNoYWRvdyBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJWZW5vbSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJWZW5vbSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiVmVub20tVmVub20iLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiVmVub20gRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQ29udHJvbCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJDb250cm9sIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJDb250cm9sLUNvbnRyb2wiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQ29udHJvbCBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTcGlyaXQgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3Bpcml0IEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJTb3VsLVNvdWwiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3Bpcml0IEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkRyYWdvbiBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEcmFnb24gRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkRyYWdvbi1EcmFnb24iLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRHJhZ29uIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJMZW9wYXJkIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkxlb3BhcmQgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJMZW9wYXJkLUxlb3BhcmQiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTGVvcGFyZCBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgICAgICB3YWl0KCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjEyNyA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZVJhbmRvbUZydWl0IiwgewogICAgVGl0bGUgPSAiUmFuZG9tIFRyw6FpIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMjc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNDIpCiAgICBfRy5SYW5kb21fQXV0byA9IHYzNDI7CmVuZCk7CnYxNy5Ub2dnbGVSYW5kb21GcnVpdDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuUmFuZG9tX0F1dG8gdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ291c2luIiwgIkJ1eSIpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CmxvY2FsIHYxMjggPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVDb2xsZWN0VFAiLCB7CiAgICBUaXRsZSA9ICJCYXkgxJDhur9uIFRyw6FpIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMjg6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNDMpCiAgICBfRy5Db2xsZWN0RnJ1aXRUUCA9IHYzNDM7CmVuZCk7CnYxNy5Ub2dnbGVDb2xsZWN0VFA6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5Db2xsZWN0RnJ1aXRUUCB0aGVuCiAgICAgICAgICAgIGZvciB2ODAxLCB2ODAyIGluIHBhaXJzKGdhbWUuV29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2ODAyLk5hbWUsICJGcnVpdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gdjgwMi5IYW5kbGUuQ0ZyYW1lOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxMjkgPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVDb2xsZWN0IiwgewogICAgVGl0bGUgPSAiROG7i2NoIENodXnhu4NuIMSQ4bq/biBUcsOhaSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTI5Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzQ0KQogICAgX0cuVHdlZW5mcnVpdCA9IHYzNDQ7CmVuZCk7CnYxNy5Ub2dnbGVDb2xsZWN0OlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuVHdlZW5mcnVpdCB0aGVuCiAgICAgICAgICAgIGZvciB2ODAzLCB2ODA0IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2ODA0Lk5hbWUsICJGcnVpdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2Vlbih2ODA0LkhhbmRsZS5DRnJhbWUpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY1NiA9IHYxNi5GcnVpdDpBZGRTZWN0aW9uKCLEkOG7i25oIFbhu4siKTsKbG9jYWwgdjEzMCA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZUVzcFBsYXllciIsIHsKICAgIFRpdGxlID0gIk5nxrDhu51pIENoxqFpIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMzA6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNDUpCiAgICBFU1BQbGF5ZXIgPSB2MzQ1OwogICAgVXBkYXRlUGxheWVyQ2hhbXMoKTsKZW5kKTsKdjE3LlRvZ2dsZUVzcFBsYXllcjpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHYxMzEgPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVFc3BGcnVpdCIsIHsKICAgIFRpdGxlID0gIlRyw6FpIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMzE6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNDYpCiAgICBEZXZpbEZydWl0RVNQID0gdjM0NjsKICAgIHdoaWxlIERldmlsRnJ1aXRFU1AgZG8KICAgICAgICB3YWl0KCk7CiAgICAgICAgVXBkYXRlRGV2aWxDaGFtcygpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVFc3BGcnVpdDpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHYxMzIgPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVFc3BJc2xhbmQiLCB7CiAgICBUaXRsZSA9ICLEkOG6o28iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEzMjpPbkNoYW5nZWQoZnVuY3Rpb24odjM0NykKICAgIElzbGFuZEVTUCA9IHYzNDc7CiAgICB3aGlsZSBJc2xhbmRFU1AgZG8KICAgICAgICB3YWl0KCk7CiAgICAgICAgVXBkYXRlSXNsYW5kRVNQKCk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZUVzcElzbGFuZDpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHYxMzMgPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVFc3BGbG93ZXIiLCB7CiAgICBUaXRsZSA9ICJIb2EiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEzMzpPbkNoYW5nZWQoZnVuY3Rpb24odjM0OCkKICAgIEZsb3dlckVTUCA9IHYzNDg7CiAgICBVcGRhdGVGbG93ZXJDaGFtcygpOwplbmQpOwp2MTcuVG9nZ2xlRXNwRmxvd2VyOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgRmxvd2VyRVNQIHRoZW4KICAgICAgICAgICAgVXBkYXRlRmxvd2VyQ2hhbXMoKTsKICAgICAgICBlbmQKICAgICAgICBpZiBEZXZpbEZydWl0RVNQIHRoZW4KICAgICAgICAgICAgVXBkYXRlRGV2aWxDaGFtcygpOwogICAgICAgIGVuZAogICAgICAgIGlmIENoZXN0RVNQIHRoZW4KICAgICAgICAgICAgVXBkYXRlQ2hlc3RDaGFtcygpOwogICAgICAgIGVuZAogICAgICAgIGlmIEVTUFBsYXllciB0aGVuCiAgICAgICAgICAgIFVwZGF0ZVBsYXllckNoYW1zKCk7CiAgICAgICAgZW5kCiAgICAgICAgaWYgUmVhbEZydWl0RVNQIHRoZW4KICAgICAgICAgICAgVXBkYXRlUmVhbEZydWl0Q2hhbXMoKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTM0ID0gdjE2LkZydWl0OkFkZFRvZ2dsZSgiVG9nZ2xlRXNwUmVhbEZydWl0IiwgewogICAgVGl0bGUgPSAiVHLDoWkgROG7qWEgS2jhu5ttIFTDoW8iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEzNDpPbkNoYW5nZWQoZnVuY3Rpb24odjM0OSkKICAgIFJlYWxGcnVpdEVzcCA9IHYzNDk7CiAgICB3aGlsZSBSZWFsRnJ1aXRFc3AgZG8KICAgICAgICB3YWl0KCk7CiAgICAgICAgVXBkYXRlUmVhbEZydWl0RXNwKCk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZUVzcFJlYWxGcnVpdDpTZXRWYWx1ZShmYWxzZSk7CmZ1bmN0aW9uIFVwZGF0ZVJlYWxGcnVpdEVzcCgpCiAgICBmb3IgdjU0OCwgdjU0OSBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5BcHBsZVNwYXduZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2NTQ5OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgaWYgUmVhbEZydWl0RXNwIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2NTQ5LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwNjYgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY1NDkuSGFuZGxlKTsKICAgICAgICAgICAgICAgICAgICB2MTA2Ni5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgdjEwNjYuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMDY2LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwNjYuQWRvcm5lZSA9IHY1NDkuSGFuZGxlOwogICAgICAgICAgICAgICAgICAgIHYxMDY2LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTA3MyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjEwNjYpOwogICAgICAgICAgICAgICAgICAgIHYxMDczLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgdjEwNzMuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICB2MTA3My5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdjEwNzMuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2MTA3My5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgIHYxMDczLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgIHYxMDczLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgdjEwNzMuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwNzMuVGV4dCA9IHY1NDkuTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjU0OS5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2NTQ5LkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NTQ5Lk5hbWUgLi4gIiAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NTQ5LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NTQ5LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NTQ5LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBmb3IgdjU1MCwgdjU1MSBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5QaW5lYXBwbGVTcGF3bmVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjU1MTpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIGlmIFJlYWxGcnVpdEVzcCB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgdjU1MS5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMDg1ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NTUxLkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgdjEwODUuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgIHYxMDg1LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2MTA4NS5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgIHYxMDg1LkFkb3JuZWUgPSB2NTUxLkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2MTA4NS5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwOTIgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMDg1KTsKICAgICAgICAgICAgICAgICAgICB2MTA5Mi5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgIHYxMDkyLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgdjEwOTIuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHYxMDkyLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwOTIuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICB2MTA5Mi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICB2MTA5Mi5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgIHYxMDkyLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDE3NCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwOTIuVGV4dCA9IHY1NTEuTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjU1MS5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2NTUxLkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NTUxLk5hbWUgLi4gIiAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NTUxLkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NTUxLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NTUxLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBmb3IgdjU1MiwgdjU1MyBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5CYW5hbmFTcGF3bmVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjU1MzpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIGlmIFJlYWxGcnVpdEVzcCB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgdjU1My5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTA0ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NTUzLkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgdjExMDQuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgIHYxMTA0LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2MTEwNC5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgIHYxMTA0LkFkb3JuZWUgPSB2NTUzLkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2MTEwNC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExMTEgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMTA0KTsKICAgICAgICAgICAgICAgICAgICB2MTExMS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgIHYxMTExLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgdjExMTEuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHYxMTExLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjExMTEuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICB2MTExMS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICB2MTExMS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgIHYxMTExLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTEsIDI1NSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjExMTEuVGV4dCA9IHY1NTMuTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjU1My5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2NTUzLkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NTUzLk5hbWUgLi4gIiAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NTUzLkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NTUzLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NTUzLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZApsb2NhbCB2MTM1ID0gdjE2LkZydWl0OkFkZFRvZ2dsZSgiVG9nZ2xlSXNsYW5kTWlyYWdlRXNwIiwgewogICAgVGl0bGUgPSAixJDhuqNvIELDrSDhuqhuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMzU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNTApCiAgICBJc2xhbmRNaXJhZ2VFc3AgPSB2MzUwOwogICAgd2hpbGUgSXNsYW5kTWlyYWdlRXNwIGRvCiAgICAgICAgd2FpdCgpOwogICAgICAgIFVwZGF0ZUlzbGFuZE1pcmFnZUVzcCgpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVJc2xhbmRNaXJhZ2VFc3A6U2V0VmFsdWUoZmFsc2UpOwpmdW5jdGlvbiBpc25pbCh2MzUxKQogICAgcmV0dXJuIHYzNTEgPT0gbmlsIDsKZW5kCmxvY2FsIGZ1bmN0aW9uIHYyMCh2MzUyKQogICAgcmV0dXJuIG1hdGguZmxvb3IodG9udW1iZXIodjM1MikgKyAwLjUpOwplbmQKTnVtYmVyID0gbWF0aC5yYW5kb20oMSwgMTAwMDAwMCk7CmZ1bmN0aW9uIFVwZGF0ZUlzbGFuZE1pcmFnZUVzcCgpCiAgICBmb3IgdjU1NCwgdjU1NSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWydfV29ybGRPcmlnaW4nXS5Mb2NhdGlvbnM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIE1pcmFnZUlzbGFuZEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjU1NS5OYW1lID09ICJNaXJhZ2UgSXNsYW5kIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NTU1OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTM0NyA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjU1NSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQ3Lk5hbWUgPSAiTmFtZUVzcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQ3LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDcuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDcuQWRvcm5lZSA9IHY1NTU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQ3LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzNTMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMzQ3KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNTMuRm9udCA9IEVudW0uRm9udC5Db2RlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTM1My5Gb250U2l6ZSA9IEVudW0uRm9udFNpemUuU2l6ZTE0OwogICAgICAgICAgICAgICAgICAgICAgICB2MTM1My5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzUzLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzUzLlRleHRZQWxpZ25tZW50ID0gRW51bS5UZXh0WUFsaWdubWVudC5Ub3A7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzUzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTM1My5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICB2MTM1My5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoODAsIDI0NSwgMjQ1KTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY1NTVbJ05hbWVFc3AnXS5UZXh0TGFiZWwuVGV4dCA9IHY1NTUuTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NTU1LlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIE0iIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjU1NTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgIHY1NTU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmxvY2FsIHYxMzYgPSB7CiAgICAiRmxhbWUiLAogICAgIkljZSIsCiAgICAiUXVha2UiLAogICAgIkxpZ2h0IiwKICAgICJEYXJrIiwKICAgICJTcGlkZXIiLAogICAgIlJ1bWJsZSIsCiAgICAiTWFnbWEiLAogICAgIkJ1ZGRoYSIsCiAgICAiU2FuZCIsCiAgICAiUGhvZW5peCIsCiAgICAiRG91Z2giCn07CmxvY2FsIHYxMzcgPSB2MTYuUmFpZDpBZGREcm9wZG93bigiRHJvcGRvd25SYWlkIiwgewogICAgVGl0bGUgPSAiQ2jhu41uIENoaXAiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIFZhbHVlcyA9IHYxMzYsCiAgICBNdWx0aSA9IGZhbHNlLAogICAgRGVmYXVsdCA9IDEKfSk7CnYxMzc6U2V0VmFsdWUoU2VsZWN0Q2hpcCk7CnYxMzc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNTMpCiAgICBTZWxlY3RDaGlwID0gdjM1MzsKZW5kKTsKbG9jYWwgdjEzOCA9IHYxNi5SYWlkOkFkZFRvZ2dsZSgiVG9nZ2xlQnV5IiwgewogICAgVGl0bGUgPSAiTXVhIENoaXAiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEzODpPbkNoYW5nZWQoZnVuY3Rpb24odjM1NCkKICAgIF9HLkF1dG9fQnV5X0NoaXBzX0R1bmdlb24gPSB2MzU0OwplbmQpOwp2MTcuVG9nZ2xlQnV5OlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19CdXlfQ2hpcHNfRHVuZ2VvbiB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDUgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIlJhaWRzTnBjIiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiU2VsZWN0IiwKICAgICAgICAgICAgICAgICAgICBbM10gPSBTZWxlY3RDaGlwCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNSkpOwogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxMzkgPSB2MTYuUmFpZDpBZGRUb2dnbGUoIlRvZ2dsZVN0YXJ0IiwgewogICAgVGl0bGUgPSAiQuG6r3QgxJDhuqd1IFJhaWQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEzOTpPbkNoYW5nZWQoZnVuY3Rpb24odjM1NSkKICAgIF9HLkF1dG9fU3RhcnRSYWlkID0gdjM1NTsKZW5kKTsKdjE3LlRvZ2dsZVN0YXJ0OlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvX1N0YXJ0UmFpZCB0aGVuCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIilbJ0xvY2FsUGxheWVyJ10uUGxheWVyR3VpLk1haW4uVGltZXIuVmlzaWJsZSA9PSBmYWxzZSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIChub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uTG9jYXRpb25zOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgMSIpIGFuZCAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwZWNpYWwgTWljcm9jaGlwIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTcGVjaWFsIE1pY3JvY2hpcCIpKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBTZWEyIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gNjQzOC43MzUzNSwgMjUwLjY0NTM1NSwgLSA0NTAxLjUwNjg0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTU0NyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbMV0gPSAiU2V0U3Bhd25Qb2ludCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2MTU0NykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuQ2lyY2xlSXNsYW5kLlJhaWRTdW1tb24yLkJ1dHRvbi5NYWluLkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgU2VhMyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDUwNzUuNTA5Mjc3MzQzNzUsIDMxNC41MTU1MDI5Mjk2ODc1LCAtIDMxNTAuMDIyNDYwOTM3NSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA1MDE3LjQwODY5LCAzMTQuODQ0MDU1LCAtIDI4MjMuMDEyNywgLSAwLjkyNTc0MzgxOCwgNC40ODIxNzVlLTgsIC0gMC4zNzgxNTEyMzgsIDQuNTU1MDMxNWUtOSwgMSwgMS4wNzM3NzU2ZS03LCAwLjM3ODE1MTIzOCwgOS43NjgxNjJlLTgsIC0gMC45MjU3NDM4MTgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNjU2ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsxXSA9ICJTZXRTcGF3blBvaW50IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHYxNjU2KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiQm9hdCBDYXN0bGUiXS5SYWlkU3VtbW9uMi5CdXR0b24uTWFpbi5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2MTQwID0gdjE2LlJhaWQ6QWRkVG9nZ2xlKCJUb2dnbGVOZXh0SXNsYW5kIiwgewogICAgVGl0bGUgPSAixJDhuqVtIFF1w6FpIFJhaWQrQmF5IMSQ4bq/biDEkOG6o28iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE0MDpPbkNoYW5nZWQoZnVuY3Rpb24odjM1NikKICAgIEF1dG9OZXh0SXNsYW5kID0gdjM1NjsKICAgIGlmIG5vdCB2MzU2IHRoZW4KICAgICAgICBfRy5BdXRvTmVhciA9IGZhbHNlOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVOZXh0SXNsYW5kOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgbG9jYWwgdjM1NyA9IHt9OwogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBpZiBBdXRvTmV4dElzbGFuZCB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDYgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOwogICAgICAgICAgICAgICAgaWYgKHY4MDYgYW5kIHY4MDY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5MDAgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWydfV29ybGRPcmlnaW4nXS5Mb2NhdGlvbnM7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjkwMSA9IHY4MDYuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbjsKICAgICAgICAgICAgICAgICAgICBpZiAoKCh2OTAxIC0gVmVjdG9yMy5uZXcoLSA2NDM4LjczNTM1LCAyNTAuNjQ1MzU1LCAtIDQ1MDEuNTA2ODQpKS5NYWduaXR1ZGUgPCAxKSBvciAoKHY5MDEgLSBWZWN0b3IzLm5ldygtIDUwMTcuNDA4NjksIDMxNC44NDQwNTUsIC0gMjgyMy4wMTI3KSkuTWFnbml0dWRlIDwgMSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjM1NyA9IHt9OwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIHY5MDA6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCAxIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBfRy5BdXRvTmVhciA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKHY5MDA6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCAyIikgYW5kIG5vdCB2MzU3WyJJc2xhbmQgMiJdKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY5MDA6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCAyIikuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjM1N1siSXNsYW5kIDIiXSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9OZXh0SXNsYW5kID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b05leHRJc2xhbmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAodjkwMDpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDMiKSBhbmQgbm90IHYzNTdbIklzbGFuZCAzIl0pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjkwMDpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDMiKS5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB2MzU3WyJJc2xhbmQgMyJdID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b05leHRJc2xhbmQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvTmV4dElzbGFuZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICh2OTAwOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgNCIpIGFuZCBub3QgdjM1N1siSXNsYW5kIDQiXSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2OTAwOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgNCIpLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYzNTdbIklzbGFuZCA0Il0gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvTmV4dElzbGFuZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9OZXh0SXNsYW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKHY5MDA6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCA1IikgYW5kIG5vdCB2MzU3WyJJc2xhbmQgNSJdKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY5MDA6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCA1IikuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjM1N1siSXNsYW5kIDUiXSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9OZXh0SXNsYW5kID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b05leHRJc2xhbmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjE0MSA9IHYxNi5SYWlkOkFkZFRvZ2dsZSgiVG9nZ2xlQXdha2UiLCB7CiAgICBUaXRsZSA9ICJUaOG7qWMgVOG7iW5oIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNDE6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNTgpCiAgICBBdXRvQXdha2VuQWJpbGl0aWVzID0gdjM1ODsKZW5kKTsKdjE3LlRvZ2dsZUF3YWtlOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBpZiBBdXRvQXdha2VuQWJpbGl0aWVzIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQXdha2VuZXIiLCAiQXdha2VuIik7CiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjE0MiA9IHYxNi5SYWlkOkFkZFRvZ2dsZSgiVG9nZ2xlR2V0RnJ1aXQiLCB7CiAgICBUaXRsZSA9ICJM4bqleSBUcsOhaSBExrDhu5tpIDEgVHJp4buHdSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTQyOk9uQ2hhbmdlZChmdW5jdGlvbih2MzU5KQogICAgX0cuQXV0b2ZydWl0ID0gdjM1OTsKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvZnJ1aXQgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiUm9ja2V0LVJvY2tldCIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJTcGluLVNwaW4iCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiQ2hvcC1DaG9wIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIlNwcmluZy1TcHJpbmciCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiQm9tYi1Cb21iIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIlNtb2tlLVNtb2tlIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIlNwaWtlLVNwaWtlIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkZsYW1lLUZsYW1lIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkZhbGNvbi1GYWxjb24iCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiSWNlLUljZSIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJTYW5kLVNhbmQiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiRGFyay1EYXJrIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkdob3N0LUdob3N0IgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkRpYW1vbmQtRGlhbW9uZCIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJMaWdodC1MaWdodCIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJSdWJiZXItUnViYmVyIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkJhcnJpZXItQmFycmllciIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKaWYgU2VhMiB0aGVuCiAgICB2MTYuUmFpZDpBZGRCdXR0b24oewogICAgICAgIFRpdGxlID0gIkJheSDEkOG6v24gQ2jhu5cgVOG6rXAgS8OtY2giLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gNjQzOC43MzUzNSwgMjUwLjY0NTM1NSwgLSA0NTAxLjUwNjg0KSk7CiAgICAgICAgZW5kCiAgICB9KTsKZWxzZWlmIFNlYTMgdGhlbgogICAgdjE2LlJhaWQ6QWRkQnV0dG9uKHsKICAgICAgICBUaXRsZSA9ICJCYXkgxJDhur9uIENo4buXIFThuq1wIEvDrWNoIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDUwNzUuNTA5Mjc3MzQzNzUsIDMxNC41MTU1MDI5Mjk2ODc1LCAtIDMxNTAuMDIyNDYwOTM3NSkpOwogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDUwMTcuNDA4NjksIDMxNC44NDQwNTUsIC0gMjgyMy4wMTI3LCAtIDAuOTI1NzQzODE4LCA0LjQ4MjE3NWUtOCwgLSAwLjM3ODE1MTIzOCwgNC41NTUwMzE1ZS05LCAxLCAxLjA3Mzc3NTZlLTcsIDAuMzc4MTUxMjM4LCA5Ljc2ODE2MmUtOCwgLSAwLjkyNTc0MzgxOCkpOwogICAgICAgIGVuZAogICAgfSk7CmVuZApsb2NhbCB2NTYgPSB2MTYuUmFpZDpBZGRTZWN0aW9uKCJU4bqtcCBLw61jaCBMYXciKTsKbG9jYWwgdjE0MyA9IHYxNi5SYWlkOkFkZFRvZ2dsZSgiVG9nZ2xlTGF3IiwgewogICAgVGl0bGUgPSAiTXVhIENoaXAgVsOgIMSQ4bqlbSBMYXciLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE0MzpPbkNoYW5nZWQoZnVuY3Rpb24odjM2MCkKICAgIEF1dG9fTGF3ID0gdjM2MDsKZW5kKTsKdjE3LlRvZ2dsZUxhdzpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgQXV0b19MYXcgdGhlbgogICAgICAgICAgICAgICAgaWYgKG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIk1pY3JvY2hpcCIpIGFuZCBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIk1pY3JvY2hpcCIpIGFuZCBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJPcmRlciIpIGFuZCBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJPcmRlciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJsYWNrYmVhcmRSZXdhcmQiLCAiTWljcm9jaGlwIiwgIjEiKTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCbGFja2JlYXJkUmV3YXJkIiwgIk1pY3JvY2hpcCIsICIyIik7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIEF1dG9fTGF3IHRoZW4KICAgICAgICAgICAgICAgIGlmIChub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJPcmRlciIpIGFuZCBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJPcmRlciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTWljcm9jaGlwIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIk1pY3JvY2hpcCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkNpcmNsZUlzbGFuZC5SYWlkU3VtbW9uLkJ1dHRvbi5NYWluLkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJPcmRlciIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiT3JkZXIiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiT3JkZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ2OCwgdjE0NjkgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NjkuTmFtZSA9PSAiT3JkZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDY5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjkuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDY5Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCB2MTQ2OS5QYXJlbnQgb3IgKHYxNDY5Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciAoQXV0b19MYXcgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiT3JkZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA2MjE3LjIwMjE0ODQzNzUsIDI4LjA0NzY0NTU2ODg0OCwgLSA1MDUzLjEzNTc0MjE4NzUpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CnYxNi5SYWNlOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICLEkOG7gW4gVGjhu51pIEdpYW4iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDI4Mjg2LjM1NTQ2ODc1LCAxNDg5NS4zMDE3NTc4MTI1LCAxMDIuNjI0Njk0ODI0MjE4NzUpKTsKICAgIGVuZAp9KTsKdjE2LlJhY2U6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkPhuqduIEfhuqF0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygyODI4Ni4zNTU0Njg3NSwgMTQ4OTUuMzAxNzU3ODEyNSwgMTAyLjYyNDY5NDgyNDIxODc1KSk7CiAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMjg1NzUuMTgxNjQwNjI1LCAxNDkzNi42Mjc5Mjk2ODc1LCA3Mi4zMTYzNjgxMDMwMjczNCkpOwogICAgZW5kCn0pOwp2MTYuUmFjZTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQ2jhu5cgTXVhIEdlYXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDI4Mjg2LjM1NTQ2ODc1LCAxNDg5NS4zMDE3NTc4MTI1LCAxMDIuNjI0Njk0ODI0MjE4NzUpKTsKICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygyODk4MS41NTI3MzQzNzUsIDE0ODg4LjQyNjc1NzgxMjUsIC0gMTIwLjI0NTg0OTYwOTM3NSkpOwogICAgZW5kCn0pOwpsb2NhbCB2NTYgPSB2MTYuUmFjZTpBZGRTZWN0aW9uKCJU4buZYyIpOwp2MTYuUmFjZTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQ+G7rWEgVOG7mWMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDI4Mjg2LjM1NTQ2ODc1LCAxNDg5NS4zMDE3NTc4MTI1LCAxMDIuNjI0Njk0ODI0MjE4NzUpKTsKICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJIdW1hbiIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMjkyMjEuODIyMjY1NjI1LCAxNDg5MC45NzU1ODU5Mzc1LCAtIDIwNS45OTExNDk5MDIzNDM3NSkpOwogICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJTa3lwaWVhIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygyODk2MC4xNTgyMDMxMjUsIDE0OTE5LjYyNDAyMzQzNzUsIDIzNS4wMzk0ODk3NDYwOTM3NSkpOwogICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJGaXNobWFuIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygyODIzMS4xNzU3ODEyNSwgMTQ4OTAuOTc1NTg1OTM3NSwgLSAyMTEuNjQxNzM4ODkxNjAxNTYpKTsKICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiQ3lib3JnIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygyODUwMi42ODE2NDA2MjUsIDE0ODk1Ljk3NTU4NTkzNzUsIC0gNDIzLjcyNzkzNTc5MTAxNTYpKTsKICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiR2hvdWwiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDI4Njc0LjI0NDE0MDYyNSwgMTQ4OTAuNjc2NzU3ODEyNSwgNDQ1LjQzMTA2MDc5MTAxNTYpKTsKICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiTWluayIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMjkwMTIuMzQxNzk2ODc1LCAxNDg5MC45NzU1ODU5Mzc1LCAtIDM4MC4xNDkyNjE0NzQ2MDk0KSk7CiAgICAgICAgZW5kCiAgICBlbmQKfSk7CmxvY2FsIHYxNDQgPSB2MTYuUmFjZTpBZGRUb2dnbGUoIlRvZ2dsZUh1bWFuYW5kZ2hvdWwiLCB7CiAgICBUaXRsZSA9ICJIb8OgbiBUaMOgbmgg4bqiaSBbSHVtYW4vR2hvdWxdIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNDQ6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNjEpCiAgICBLaWxsQXVyYSA9IHYzNjE7CmVuZCk7CnYxNy5Ub2dnbGVIdW1hbmFuZGdob3VsOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjE0NSA9IHYxNi5SYWNlOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b3RyaWFsIiwgewogICAgVGl0bGUgPSAiSG/DoG4gVGjDoG5oIOG6omkiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE0NTpPbkNoYW5nZWQoZnVuY3Rpb24odjM2MikKICAgIF9HLkF1dG9RdWVzdFJhY2UgPSB2MzYyOwplbmQpOwp2MTcuVG9nZ2xlQXV0b3RyaWFsOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvUXVlc3RSYWNlIHRoZW4KICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgPT0gIkh1bWFuIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTEyMywgdjExMjQgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjExMjQ6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMTI0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTEyNC5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMTI0Lkh1bWFub2lkLkhlYWx0aCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMTI0Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRoaWRkZW5wcm9wZXJ0eShnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIsICJTaW11bGF0aW9uUmFkaXVzIiwgbWF0aC5odWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b1F1ZXN0UmFjZSBvciBub3QgdjExMjQuUGFyZW50IG9yICh2MTEyNC5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgPT0gIlNreXBpZWEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDcwLCB2MTQ3MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5Ta3lUcmlhbC5Nb2RlbDpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NzEuTmFtZSA9PSAic25vd2lzbGFuZF9DeWxpbmRlci4wODEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCVFBaKHYxNDcxLkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMCwgMCkpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJGaXNobWFuIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTU4MiwgdjE1ODMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5TZWFCZWFzdHMuU2VhQmVhc3QxOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTU4My5OYW1lID09ICJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE1ODMuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTc0NiwgdjE3NDcgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjE3NDc6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE3NDcuVG9vbFRpcCA9PSAiTWVsZWUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbCh2MTc0Nyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNzQ4LCB2MTc0OSBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2MTc0OTpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTc0OS5Ub29sVGlwID09ICJCbG94IEZydWl0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodjE3NDkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTc1MCwgdjE3NTEgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjE3NTE6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE3NTEuVG9vbFRpcCA9PSAiU3dvcmQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbCh2MTc1MSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNzUyLCB2MTc1MyBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2MTc1MzpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTc1My5Ub29sVGlwID09ICJHdW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbCh2MTc1Myk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJDeWJvcmciKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygyODY1NCwgMTQ4OTguNzgzMiwgLSAzMCwgMSwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgMSkpOwogICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgPT0gIkdob3VsIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTc2NCwgdjE3NjUgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE3NjU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNzY1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTc2NS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzY1Lkh1bWFub2lkLkhlYWx0aCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzY1Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRoaWRkZW5wcm9wZXJ0eShnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIsICJTaW11bGF0aW9uUmFkaXVzIiwgbWF0aC5odWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b1F1ZXN0UmFjZSBvciBub3QgdjE3NjUuUGFyZW50IG9yICh2MTc2NS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgPT0gIk1pbmsiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxNzkwLCB2MTc5MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTc5MS5OYW1lID09ICJTdGFydFBvaW50IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE3OTEuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAxMCwgMCkpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CmxvY2FsIHYxNDYgPSB2MTYuUmFjZTpBZGRUb2dnbGUoIlRvZ2dsZUtpbGxUcmlhbCIsIHsKICAgIFRpdGxlID0gIsSQ4bqlbSBOZ8aw4budaSBDaMahaSBUcm9uZyBUcmlhbCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTQ2Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzYzKQogICAgX0cuQXV0b0tpbGxUcmlhbCA9IHYzNjM7CmVuZCk7CnYxNy5Ub2dnbGVLaWxsVHJpYWw6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9LaWxsVHJpYWwgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY4NzAsIHY4NzEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiAodjg3MS5OYW1lIGFuZCAodjg3MS5OYW1lIH49IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5OYW1lKSBhbmQgKCh2ODcxLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMTAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjg3MS5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoID4gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY4NzEuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAwLCA1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg3MS5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg3MS5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9LaWxsVHJpYWwgb3Igbm90IHY4NzEuUGFyZW50IG9yICh2ODcxLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2NTYgPSB2MTYuUmFjZTpBZGRTZWN0aW9uKCJIdeG6pW4gTHV54buHbiIpOwpsb2NhbCB2MTQ3ID0gdjE2LlJhY2U6QWRkVG9nZ2xlKCJUb2dnbGVGYXJtUmFjZSIsIHsKICAgIFRpdGxlID0gIkPDoHkgTHV54buHbiBU4buZYyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwpsb2NhbCB2MTQ4ID0gZmFsc2U7CnYxNDc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNjQpCiAgICB2MTQ4ID0gdjM2NDsKZW5kKTsKdjE3LlRvZ2dsZUZhcm1SYWNlOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgdjE0OCB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlJhY2VUcmFuc2Zvcm1lZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5SYWNlVHJhbnNmb3JtZWQuVmFsdWUgPT0gdHJ1ZSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBfRy5BdXRvQm9uZU5vUXVlc3QgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDk2OTguNDczNjMyODEyNSwgNDQ1LjA5NDQyMTM4NjcxODc1LCA2NTQ1Ljg1MjUzOTA2MjUpKTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUmFjZVRyYW5zZm9ybWVkLlZhbHVlID09IGZhbHNlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIF9HLkF1dG9Cb25lTm9RdWVzdCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiWSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJZIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBfRy5BdXRvQm9uZU5vUXVlc3QgPSBmYWxzZTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTQ5ID0gdjE2LlJhY2U6QWRkVG9nZ2xlKCJUb2dnbGVVcGdyYWRlIiwgewogICAgVGl0bGUgPSAiTXVhIEdlYXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE0OTpPbkNoYW5nZWQoZnVuY3Rpb24odjM2NSkKICAgIF9HLkF1dG9VcGdyYWRlID0gdjM2NTsKICAgIGlmIF9HLkF1dG9VcGdyYWRlIHRoZW4KICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJVcGdyYWRlUmFjZSIsICJCdXkiKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlVXBncmFkZTpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHY1NiA9IHYxNi5TaG9wOkFkZFNlY3Rpb24oIkto4bqjIE7Eg25nIik7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJOaOG6o3kiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUhha2kiLCAiR2VwcG8iKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkhha2kgxJDhuqVtIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlIYWtpIiwgIkJ1c28iKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkThu4tjaCBDaHV54buDbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SGFraSIsICJTb3J1Iik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJIYWtpIFF1YW4gU8OhdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiS2VuVGFsayIsICJCdXkiKTsKICAgIGVuZAp9KTsKbG9jYWwgdjU2ID0gdjE2LlNob3A6QWRkU2VjdGlvbigiS2nhur9tIik7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJDdXRsYXNzIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwgIkN1dGxhc3MiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkthdGFuYSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJLYXRhbmEiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIklyb24gTWFjZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJJcm9uIE1hY2UiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkR1ZWwgS2F0YW5hIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwgIkR1ZWwgS2F0YW5hIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJUcmlwbGUgS2F0YW5hIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwgIlRyaXBsZSBLYXRhbmEiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlBpcGUiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiUGlwZSIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiRHVhbC1IZWFkZWQgQmxhZGUiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiRHVhbC1IZWFkZWQgQmxhZGUiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkJpc2VudG8iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiQmlzZW50byIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiU291bCBDYW5lIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwgIlNvdWwgQ2FuZSIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiUG9sZSBWMiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlRodW5kZXJHb2RUYWxrIik7CiAgICBlbmQKfSk7CmxvY2FsIHY1NiA9IHYxNi5TaG9wOkFkZFNlY3Rpb24oIlbDtSIpOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQmxhY2sgTGVnIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlCbGFja0xlZyIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiRWxlY3RybyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RWxlY3RybyIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiRmlzaG1hbiBLYXJhdGUiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUZpc2htYW5LYXJhdGUiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkRyYWdvbiBDbGF3IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCbGFja2JlYXJkUmV3YXJkIiwgIkRyYWdvbkNsYXciLCAiMSIpOwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJsYWNrYmVhcmRSZXdhcmQiLCAiRHJhZ29uQ2xhdyIsICIyIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJTdXBlcmh1bWFuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlTdXBlcmh1bWFuIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJEZWF0aCBTdGVwIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlEZWF0aFN0ZXAiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlNoYXJrbWFuIEthcmF0ZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5U2hhcmttYW5LYXJhdGUiLCB0cnVlKTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlTaGFya21hbkthcmF0ZSIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiRWxlY3RyaWMgQ2xhdyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RWxlY3RyaWNDbGF3Iik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJEcmFnb24gVGFsb24iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eURyYWdvblRhbG9uIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJHb2RodW1hbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5R29kaHVtYW4iKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlNhbmd1aW5lIEFydCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5U2FuZ3VpbmVBcnQiKTsKICAgIGVuZAp9KTsKbG9jYWwgdjU2ID0gdjE2LlNob3A6QWRkU2VjdGlvbigiS2jDoWMiKTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIsSQ4buVaSBDaOG7iSBT4buRIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCbGFja2JlYXJkUmV3YXJkIiwgIlJlZnVuZCIsICIxIik7CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsICJSZWZ1bmQiLCAiMiIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAixJDhu5VpIFThu5ljIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCbGFja2JlYXJkUmV3YXJkIiwgIlJlcm9sbCIsICIxIik7CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsICJSZXJvbGwiLCAiMiIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAixJDhu5VpIFThu5ljIEdob3VsIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB2MzY2ID0gewogICAgICAgICAgICBbMV0gPSAiRWN0b3BsYXNtIiwKICAgICAgICAgICAgWzJdID0gIkNoYW5nZSIsCiAgICAgICAgICAgIFszXSA9IDQKICAgICAgICB9OwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHYzNjYpKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIsSQ4buVaSBU4buZYyBDeWJvcmciLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHYzNjcgPSB7CiAgICAgICAgICAgIFsxXSA9ICJDeWJvcmdUcmFpbmVyIiwKICAgICAgICAgICAgWzJdID0gIkJ1eSIKICAgICAgICB9OwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHYzNjcpKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIsSQ4buVaSBU4buZYyBEcmFjbyIsCiAgICBEZXNjcmlwdGlvbiA9ICJDaOG7iSDhu54gQmnhu4NuIDMiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNTY2MS41MzIyMjY1NjI1LCAxMDEzLjA5MDc1OTI3NzM0MzgsIC0gMzM0Ljk2NDk5NjMzNzg5MDYpKTsKICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg1ODE0LjQyNzI0NjA5Mzc1LCAxMjA4LjMyNjc4MjIyNjU2MjUsIDg4NC41Nzg1NTIyNDYwOTM4KSk7CiAgICAgICAgbG9jYWwgdjM2OCA9IFZlY3RvcjMubmV3KDU4MTQuNDI3MjQ2MDkzNzUsIDEyMDguMzI2NzgyMjI2NTYyNSwgODg0LjU3ODU1MjI0NjA5MzgpOwogICAgICAgIGxvY2FsIHYzNjkgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI7CiAgICAgICAgbG9jYWwgdjM3MCA9IHYzNjkuQ2hhcmFjdGVyIG9yIHYzNjkuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpIDsKICAgICAgICByZXBlYXQKICAgICAgICAgICAgd2FpdCgpOwogICAgICAgIHVudGlsICh2MzcwLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2MzY4KS5NYWduaXR1ZGUgPCAxCiAgICAgICAgbG9jYWwgdjM3MSA9IHsKICAgICAgICAgICAgWzFdID0gewogICAgICAgICAgICAgICAgTlBDID0gIkRyYWdvbiBXaXphcmQiLAogICAgICAgICAgICAgICAgQ29tbWFuZCA9ICJEcmFnb25SYWNlIgogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuTW9kdWxlcy5OZXQ6RmluZEZpcnN0Q2hpbGQoIlJGL0ludGVyYWN0RHJhZ29uUXVlc3QiKTpJbnZva2VTZXJ2ZXIodW5wYWNrKHYzNzEpKTsKICAgIGVuZAp9KTsKdjE2Lk1pc2M6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlRoYW0gR2lhIE3DoXkgQ2jhu6cgTOG6oWkiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiVGVsZXBvcnRTZXJ2aWNlIik6VGVsZXBvcnQoZ2FtZS5QbGFjZUlkLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllcik7CiAgICBlbmQKfSk7CnYxNi5NaXNjOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICLEkOG7lWkgTcOheSBDaOG7pyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgSG9wKCk7CiAgICBlbmQKfSk7CmZ1bmN0aW9uIEhvcCgpCiAgICBsb2NhbCB2MzcyID0gZ2FtZS5QbGFjZUlkOwogICAgbG9jYWwgdjM3MyA9IHt9OwogICAgbG9jYWwgdjM3NCA9ICIiOwogICAgbG9jYWwgdjM3NSA9IG9zLmRhdGUoIiEqdCIpLmhvdXI7CiAgICBsb2NhbCB2Mzc2ID0gZmFsc2U7CiAgICBmdW5jdGlvbiBUUFJldHVybmVyKCkKICAgICAgICBsb2NhbCB2NTU2OwogICAgICAgIGlmICh2Mzc0ID09ICIiKSB0aGVuCiAgICAgICAgICAgIHY1NTYgPSBnYW1lLkh0dHBTZXJ2aWNlOkpTT05EZWNvZGUoZ2FtZTpIdHRwR2V0KCJodHRwczovL2dhbWVzLnJvYmxveC5jb20vdjEvZ2FtZXMvIiAuLiB2MzcyIC4uICIvc2VydmVycy9QdWJsaWM/c29ydE9yZGVyPUFzYyZsaW1pdD0xMDAiKSk7CiAgICAgICAgZWxzZQogICAgICAgICAgICB2NTU2ID0gZ2FtZS5IdHRwU2VydmljZTpKU09ORGVjb2RlKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9nYW1lcy5yb2Jsb3guY29tL3YxL2dhbWVzLyIgLi4gdjM3MiAuLiAiL3NlcnZlcnMvUHVibGljP3NvcnRPcmRlcj1Bc2MmbGltaXQ9MTAwJmN1cnNvcj0iIC4uIHYzNzQpKTsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NTU3ID0gIiI7CiAgICAgICAgaWYgKHY1NTYubmV4dFBhZ2VDdXJzb3IgYW5kICh2NTU2Lm5leHRQYWdlQ3Vyc29yIH49ICJudWxsIikgYW5kICh2NTU2Lm5leHRQYWdlQ3Vyc29yIH49IG5pbCkpIHRoZW4KICAgICAgICAgICAgdjM3NCA9IHY1NTYubmV4dFBhZ2VDdXJzb3I7CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjU1OCA9IDA7CiAgICAgICAgZm9yIHY2NTEsIHY2NTIgaW4gcGFpcnModjU1Ni5kYXRhKSBkbwogICAgICAgICAgICBsb2NhbCB2NjUzID0gdHJ1ZTsKICAgICAgICAgICAgdjU1NyA9IHRvc3RyaW5nKHY2NTIuaWQpOwogICAgICAgICAgICBpZiAodG9udW1iZXIodjY1Mi5tYXhQbGF5ZXJzKSA+IHRvbnVtYmVyKHY2NTIucGxheWluZykpIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2ODcyLCB2ODczIGluIHBhaXJzKHYzNzMpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHY1NTggfj0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjU1NyA9PSB0b3N0cmluZyh2ODczKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjY1MyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKHRvbnVtYmVyKHYzNzUpIH49IHRvbnVtYmVyKHY4NzMpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNDcyID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjM3MyA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHYzNzMsIHYzNzUpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIHY1NTggPSB2NTU4ICsgMSA7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGlmICh2NjUzID09IHRydWUpIHRoZW4KICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQodjM3MywgdjU1Nyk7CiAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlRlbGVwb3J0U2VydmljZSIpOlRlbGVwb3J0VG9QbGFjZUluc3RhbmNlKHYzNzIsIHY1NTcsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcik7CiAgICAgICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGZ1bmN0aW9uIHYxMTgoKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBUUFJldHVybmVyKCk7CiAgICAgICAgICAgICAgICBpZiAodjM3NCB+PSAiIikgdGhlbgogICAgICAgICAgICAgICAgICAgIFRQUmV0dXJuZXIoKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCiAgICB2MTE4KCk7CmVuZApsb2NhbCB2NTYgPSB2MTYuTWlzYzpBZGRTZWN0aW9uKCLEkOG7mWkiKTsKdjE2Lk1pc2M6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkjhuqNpIFThurdjIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTZXRUZWFtIiwgIlBpcmF0ZXMiKTsKICAgIGVuZAp9KTsKdjE2Lk1pc2M6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkjhuqNpIFF1w6JuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTZXRUZWFtIiwgIk1hcmluZXMiKTsKICAgIGVuZAp9KTsKbG9jYWwgdjU2ID0gdjE2Lk1pc2M6QWRkU2VjdGlvbigiS2luaCBOZ2hp4buHbSIpOwpsb2NhbCB2MTUwID0gewogICAgIktJVFRfUkVTRVQiLAogICAgIlN1YjJVbmNsZUtpemFydSIsCiAgICAiU1VCMkdBTUVSUk9CT1RfUkVTRVQxIiwKICAgICJTdWIyRmVyOTk5IiwKICAgICJFbnl1X2lzX1BybyIsCiAgICAiSkNXSyIsCiAgICAiU3RhcmNvZGVIRU8iLAogICAgIk1hZ2ljQnVzIiwKICAgICJLaXR0R2FtaW5nIiwKICAgICJTdWIyQ2FwdGFpbk1hdWkiLAogICAgIlN1YjJPZmZpY2FsTm9vYmllIiwKICAgICJUaGVHcmVhdEFjZSIsCiAgICAiU3ViMk5vb2JNYXN0ZXIxMjMiLAogICAgIlN1YjJEYWlncm9jayIsCiAgICAiQXhpb3JlIiwKICAgICJTdHJhd0hhdE1haW5lIiwKICAgICJUYW50YWlHYW1pbmciLAogICAgIkJsdXh4eSIsCiAgICAiU1VCMkdBTUVSUk9CT1RfRVhQMSIsCiAgICAiQ2hhbmRsZXIiLAogICAgIk5PTU9SRUhBQ0siLAogICAgIkJBTkVYUExPSVQiLAogICAgIldpbGREYXJlcyIsCiAgICAiQm9zc0J1aWxkIiwKICAgICJHZXRQcmFua2VkIiwKICAgICJFQVJOX0ZSVUlUUyIsCiAgICAiRklHSFQ0RlJVSVQiLAogICAgIk5PRVhQTE9JVEVSIiwKICAgICJOT09CMkFETUlOIiwKICAgICJDT0RFU0xJREUiLAogICAgIkFETUlOSEFDS0VEIiwKICAgICJBRE1JTkRBUkVTIiwKICAgICJmcnVpdGNvbmNlcHRzIiwKICAgICJrcmF6eWRhcmVzIiwKICAgICJUUklQTEVBQlVTRSIsCiAgICAiU0VBVFJPTExJTkciLAogICAgIjI0Tk9BRE1JTiIsCiAgICAiUkVXQVJERlVOIiwKICAgICJORVdUUk9MTCIsCiAgICAiZnVkZDEwX3YyIiwKICAgICJGdWRkMTAiLAogICAgIkJpZ25ld3MiLAogICAgIlNFQ1JFVF9BRE1JTiIKfTsKdjE2Lk1pc2M6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIk5o4bqtcCBI4bq/dCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZm9yIHY1NTksIHY1NjAgaW4gaXBhaXJzKHYxNTApIGRvCiAgICAgICAgICAgIFJlZGVlbUNvZGUodjU2MCk7CiAgICAgICAgZW5kCiAgICBlbmQKfSk7CmZ1bmN0aW9uIFJlZGVlbUNvZGUodjM3NykKICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLlJlZGVlbTpJbnZva2VTZXJ2ZXIodjM3Nyk7CmVuZApsb2NhbCB2NTYgPSB2MTYuTWlzYzpBZGRTZWN0aW9uKCJEYW5oIEhp4buHdSIpOwp2MTYuTWlzYzpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiRGFuaCBIaeG7h3UiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHYzNzggPSB7CiAgICAgICAgICAgIFsxXSA9ICJnZXRUaXRsZXMiCiAgICAgICAgfTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2Mzc4KSk7CiAgICAgICAgZ2FtZS5QbGF5ZXJzLmxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlRpdGxlcy5WaXNpYmxlID0gdHJ1ZTsKICAgIGVuZAp9KTsKbG9jYWwgdjU2ID0gdjE2Lk1pc2M6QWRkU2VjdGlvbigiVGjhu6ljIFThu4luaCIpOwp2MTYuTWlzYzpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiVGjhu6ljIFThu4luaCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uQXdha2VuaW5nVG9nZ2xlci5WaXNpYmxlID0gdHJ1ZTsKICAgIGVuZAp9KTsKbG9jYWwgdjU2ID0gdjE2Lk1pc2M6QWRkU2VjdGlvbigiS2jDoWMiKTsKbG9jYWwgdjE1MSA9IHYxNi5NaXNjOkFkZFRvZ2dsZSgiVG9nZ2xlUmVqb2luIiwgewogICAgVGl0bGUgPSAiVGhhbSBHaWEgTcOheSBDaOG7pyBM4bqhaSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IHRydWUKfSk7CnYxNTE6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzODEpCiAgICBfRy5BdXRvUmVqb2luID0gdjM4MTsKZW5kKTsKdjE3LlRvZ2dsZVJlam9pbjpTZXRWYWx1ZSh0cnVlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b1Jlam9pbiB0aGVuCiAgICAgICAgICAgIGdldGdlbnYoKS5yZWpvaW4gPSBnYW1lOkdldFNlcnZpY2UoIkNvcmVHdWkiKS5Sb2Jsb3hQcm9tcHRHdWkucHJvbXB0T3ZlcmxheS5DaGlsZEFkZGVkOkNvbm5lY3QoZnVuY3Rpb24odjgwOCkKICAgICAgICAgICAgICAgIGlmICgodjgwOC5OYW1lID09ICJFcnJvclByb21wdCIpIGFuZCB2ODA4OkZpbmRGaXJzdENoaWxkKCJNZXNzYWdlQXJlYSIpIGFuZCB2ODA4Lk1lc3NhZ2VBcmVhOkZpbmRGaXJzdENoaWxkKCJFcnJvckZyYW1lIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlRlbGVwb3J0U2VydmljZSIpOlRlbGVwb3J0KGdhbWUuUGxhY2VJZCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NTYgPSB2MTYuTWlzYzpBZGRTZWN0aW9uKCJTxrDGoW5nIik7CmxvY2FsIGZ1bmN0aW9uIHYxNTIoKQogICAgbG9jYWwgdjM4MiA9IGdhbWU6R2V0U2VydmljZSgiTGlnaHRpbmciKTsKICAgIGlmIHYzODI6RmluZEZpcnN0Q2hpbGQoIkJhc2VBdG1vc3BoZXJlIikgdGhlbgogICAgICAgIHYzODIuQmFzZUF0bW9zcGhlcmU6RGVzdHJveSgpOwogICAgZW5kCiAgICBpZiB2MzgyOkZpbmRGaXJzdENoaWxkKCJTZWFUZXJyb3JDQyIpIHRoZW4KICAgICAgICB2MzgyLlNlYVRlcnJvckNDOkRlc3Ryb3koKTsKICAgIGVuZAogICAgaWYgdjM4MjpGaW5kRmlyc3RDaGlsZCgiTGlnaHRpbmdMYXllcnMiKSB0aGVuCiAgICAgICAgaWYgdjM4Mi5MaWdodGluZ0xheWVyczpGaW5kRmlyc3RDaGlsZCgiQXRtb3NwaGVyZSIpIHRoZW4KICAgICAgICAgICAgdjM4Mi5MaWdodGluZ0xheWVycy5BdG1vc3BoZXJlOkRlc3Ryb3koKTsKICAgICAgICBlbmQKICAgICAgICB3YWl0KCk7CiAgICAgICAgaWYgdjM4Mi5MaWdodGluZ0xheWVyczpGaW5kRmlyc3RDaGlsZCgiRGFya0ZvZyIpIHRoZW4KICAgICAgICAgICAgdjM4Mi5MaWdodGluZ0xheWVycy5EYXJrRm9nOkRlc3Ryb3koKTsKICAgICAgICBlbmQKICAgIGVuZAogICAgdjM4Mi5Gb2dFbmQgPSAxMDAwMDA7CmVuZAp2MTYuTWlzYzpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiWMOzYSBTxrDGoW5nIE3DuSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgdjE1MigpOwogICAgZW5kCn0pOwpsb2NhbCB2MTUzID0gdjE2Lk1pc2M6QWRkVG9nZ2xlKCJUb2dnbGVBbnRpQmFuZCIsIHsKICAgIFRpdGxlID0gIkNo4buRbmcgQmFuZCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IHRydWUKfSk7CnYxNTM6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzODQpCiAgICBfRy5BbnRpQmFuZCA9IHYzODQ7CmVuZCk7CmxvY2FsIHYxNTQgPSB7CiAgICAxNzg4NDg4MSwKICAgIDEyMDE3MzYwNCwKICAgIDkxMjM0OAp9OwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BbnRpQmFuZCB0aGVuCiAgICAgICAgICAgIGZvciB2ODA5LCB2ODEwIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpOkdldFBsYXllcnMoKSkgZG8KICAgICAgICAgICAgICAgIGlmIHRhYmxlLmZpbmQodjE1NCwgdjgxMC5Vc2VySWQpIHRoZW4KICAgICAgICAgICAgICAgICAgICBIb3AoKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NTYgPSB2MTYuU2VhOkFkZFNlY3Rpb24oIkxldmlhdGhhbiIpOwp2MTYuU2VhOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJNdWEgQ2hpcCBMZXZpYXRoYW4iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkluZm9MZXZpYXRoYW4iLCAiMiIpOwogICAgZW5kCn0pOwpsb2NhbCB2MTU1ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVRQRnJvemVuRGltZW5zaW9uIiwgewogICAgVGl0bGUgPSAiQmF5IMSQ4bq/biDEkOG6o28gTGV2aWF0aGFuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNTU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzODUpCiAgICBfRy5Ud2VlblRvRnJvemVuRGltZW5zaW9uID0gdjM4NTsKZW5kKTsKdjE1NTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIGxvY2FsIHYzODY7CiAgICB3aGlsZSBub3QgdjM4NiBkbwogICAgICAgIHYzODYgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiRnJvemVuRGltZW5zaW9uIik7CiAgICAgICAgd2FpdCgpOwogICAgZW5kCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5Ud2VlblRvRnJvemVuRGltZW5zaW9uIHRoZW4KICAgICAgICAgICAgaWYgdjM4NiB0aGVuCiAgICAgICAgICAgICAgICBUd2Vlbih2Mzg2LkNGcmFtZSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmlmIFNlYTMgdGhlbgogICAgbG9jYWwgdjU2MSA9IHYxNi5TZWE6QWRkUGFyYWdyYXBoKHsKICAgICAgICBUaXRsZSA9ICJUcuG6oW5nIFRow6FpIENoaXAgTGV2aWF0aGFuIiwKICAgICAgICBDb250ZW50ID0gIiIKICAgIH0pOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgICAgICBsb2NhbCB2ODExID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiSW5mb0xldmlhdGhhbiIsICIxIik7CiAgICAgICAgICAgICAgICBpZiAodjgxMSA9PSA1KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjU2MTpTZXREZXNjKCJMZXZpYXRoYW4gSXMgT3V0IFRoZXJlIik7CiAgICAgICAgICAgICAgICBlbHNlaWYgKHY4MTEgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIHY1NjE6U2V0RGVzYygiSSBEb24ndCBLbm93Iik7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjU2MTpTZXREZXNjKCJNdWE6ICIgLi4gdG9zdHJpbmcodjgxMSkpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQpOwplbmQKbG9jYWwgdjE1NiA9IHYxNi5TZWE6QWRkU2VjdGlvbigiRHJhY28iKTsKbG9jYWwgdjE1NyA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVCbGF6ZUVtYmVyIiwgewogICAgVGl0bGUgPSAiTOG7pW0gTOG7rWEgxJDhu48iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE1NzpPbkNoYW5nZWQoZnVuY3Rpb24odjM4NykKICAgIF9HLkF1dG9CbGF6ZUVtYmVyID0gdjM4NzsKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b0JsYXplRW1iZXIgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6V2FpdEZvckNoaWxkKCJNb2R1bGVzIik6V2FpdEZvckNoaWxkKCJOZXQiKTpXYWl0Rm9yQ2hpbGQoIlJFL0RyYWdvbkRvam9FbWJlciIpOkZpcmVTZXJ2ZXIoKTsKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTU4ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVJlY2VpdmVRdWVzdCIsIHsKICAgIFRpdGxlID0gIk5o4bqtbiBOaGnhu4dtIFbhu6UgTOG7rWEgxJDhu48iLAogICAgRGVzY3JpcHRpb24gPSAiQuG6rXQgTMOqbiAxIEzhuqduIEzDoCBOaOG6rW4gMSBOaOG6rW4gTuG7r2EgVGjDrCBU4bqvdCBC4bqtdCBM4bqhaSIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNTg6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzODgpCiAgICBfRy5BdXRvUmVjZWl2ZVF1ZXN0ID0gdjM4ODsKICAgIGlmIF9HLkF1dG9SZWNlaXZlUXVlc3QgdGhlbgogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDU2NjEuNTMyMjI2NTYyNSwgMTAxMy4wOTA3NTkyNzczNDM4LCAtIDMzNC45NjQ5OTYzMzc4OTA2KSk7CiAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoNTgxNC40MjcyNDYwOTM3NSwgMTIwOC4zMjY3ODIyMjY1NjI1LCA4ODQuNTc4NTUyMjQ2MDkzOCkpOwogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjg3NCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgWzFdID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29udGV4dCA9ICJSZXF1ZXN0UXVlc3QiCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Nb2R1bGVzLk5ldDpGaW5kRmlyc3RDaGlsZCgiUkYvRHJhZ29uSHVudGVyIik6SW52b2tlU2VydmVyKHVucGFjayh2ODc0KSk7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjg3NSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgWzFdID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29udGV4dCA9ICJDaGVjayIKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjg3NiA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Nb2R1bGVzLk5ldDpGaW5kRmlyc3RDaGlsZCgiUkYvRHJhZ29uSHVudGVyIik6SW52b2tlU2VydmVyKHVucGFjayh2ODc1KSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHYxNTkgPSB2MTYuU2VhOkFkZFBhcmFncmFwaCh7CiAgICBUaXRsZSA9ICJUcuG6oW5nIFRow6FpIE5oaeG7h20gVuG7pSBM4butYSDEkOG7jyIsCiAgICBDb250ZW50ID0gIiIKfSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgbG9jYWwgdjY1NCA9IHsKICAgICAgICAgICAgICAgIFsxXSA9IHsKICAgICAgICAgICAgICAgICAgICBDb250ZXh0ID0gIkNoZWNrIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBsb2NhbCB2NjU1ID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLk1vZHVsZXMuTmV0OkZpbmRGaXJzdENoaWxkKCJSRi9EcmFnb25IdW50ZXIiKTpJbnZva2VTZXJ2ZXIodW5wYWNrKHY2NTQpKTsKICAgICAgICAgICAgaWYgKHR5cGVvZih2NjU1KSA9PSAidGFibGUiKSB0aGVuCiAgICAgICAgICAgICAgICBmb3Igdjg3Nywgdjg3OCBpbiBwYWlycyh2NjU1KSBkbwogICAgICAgICAgICAgICAgICAgIGlmICh2ODc4ID09ICJEZWZlYXQgMyBWZW5vbW91cyBBc3NhaWxhbnRzIG9uIEh5ZHJhIElzbGFuZC4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHYxNTk6U2V0RGVzYygiRGVmZWF0IDMgVmVub21vdXMgQXNzYWlsYW50cyBvbiBIeWRyYSBJc2xhbmQuIik7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICh2ODc4ID09ICJEZWZlYXQgMyBIeWRyYSBFbmZvcmNlcnMgb24gSHlkcmEgSXNsYW5kLiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjE1OTpTZXREZXNjKCJEZWZlYXQgMyBIeWRyYSBFbmZvcmNlcnMgb24gSHlkcmEgSXNsYW5kLiIpOwogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAodjg3OCA9PSAiRGVzdHJveSAxMCB0cmVlcyBvbiBIeWRyYSBJc2xhbmQuIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2MTU5OlNldERlc2MoIkRlc3Ryb3kgMTAgdHJlZXMgb24gSHlkcmEgSXNsYW5kLiIpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHByaW50KHY2NTUpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CmxvY2FsIHYxNjAgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlSHlkcmFUcmVlIiwgewogICAgVGl0bGUgPSAiUGjDoSBDw6J5IOG7niDEkOG6o28gSHlkcmEiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE2MDpPbkNoYW5nZWQoZnVuY3Rpb24odjM4OSkKICAgIF9HLkF1dG9IeWRyYVRyZWUgPSB2Mzg5OwplbmQpOwpsb2NhbCBmdW5jdGlvbiB2MTYxKHYzOTApCiAgICBsb2NhbCB2MzkxID0gZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik7CiAgICB2MzkxOlNlbmRLZXlFdmVudCh0cnVlLCB2MzkwLCBmYWxzZSwgZ2FtZSk7CiAgICB2MzkxOlNlbmRLZXlFdmVudChmYWxzZSwgdjM5MCwgZmFsc2UsIGdhbWUpOwplbmQKbG9jYWwgZnVuY3Rpb24gdjE2Mih2MzkyKQogICAgbG9jYWwgdjM5MyA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjsKICAgIGxvY2FsIHYzOTQgPSB2MzkzLkJhY2twYWNrOwogICAgZm9yIHY1NjIsIHY1NjMgaW4gcGFpcnModjM5NDpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmICh2NTYzOklzQSgiVG9vbCIpIGFuZCAodjU2My5Ub29sVGlwID09IHYzOTIpKSB0aGVuCiAgICAgICAgICAgIHY1NjMuUGFyZW50ID0gdjM5My5DaGFyYWN0ZXI7CiAgICAgICAgICAgIGZvciB2ODEyLCB2ODEzIGluIGlwYWlycyh7CiAgICAgICAgICAgICAgICAiWiIsCiAgICAgICAgICAgICAgICAiWCIsCiAgICAgICAgICAgICAgICAiQyIsCiAgICAgICAgICAgICAgICAiViIsCiAgICAgICAgICAgICAgICAiRiIKICAgICAgICAgICAgfSkgZG8KICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB2MTYxKHY4MTMpOwogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHY1NjMuUGFyZW50ID0gdjM5NDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kCmxvY2FsIHYxNjMgPSB7CiAgICBDRnJhbWUubmV3KDUyODguNjE5NjI4OTA2MjUsIDEwMDUuNDAwMDI0NDE0MDYyNSwgMzkyLjQzMDExNDc0NjA5Mzc1KSwKICAgIENGcmFtZS5uZXcoNTM0My4zOTQ1MzEyNSwgMTAwNC4xOTk4OTAxMzY3MTg4LCAzNjEuMDY4NzU2MTAzNTE1NiksCiAgICBDRnJhbWUubmV3KDUyMzUuNzg1NjQ0NTMxMjUsIDEwMDQuMTk5ODkwMTM2NzE4OCwgNDMxLjQ1MzA5NDQ4MjQyMTkpLAogICAgQ0ZyYW1lLm5ldyg1MzIxLjMwNjE1MjM0Mzc1LCAxMDA0LjE5OTg5MDEzNjcxODgsIDQ0MC44OTUxNDE2MDE1NjI1KSwKICAgIENGcmFtZS5uZXcoNTI1OC45NjQ4NDM3NSwgMTAwNC4xOTk4OTAxMzY3MTg4LCAzNDUuNTA1MjQ5MDIzNDM3NSkKfTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b0h5ZHJhVHJlZSB0aGVuCiAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgIGZvciB2ODE0LCB2ODE1IGluIGlwYWlycyh2MTYzKSBkbwogICAgICAgICAgICAgICAgaWYgbm90IF9HLkF1dG9IeWRyYVRyZWUgdGhlbgogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBUd2VlbjIodjgxNSk7CiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODE2ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjsKICAgICAgICAgICAgICAgIGlmICh2ODE2IGFuZCB2ODE2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTAyID0gKHY4MTYuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHY4MTUuUG9zaXRpb24pLk1hZ25pdHVkZTsKICAgICAgICAgICAgICAgICAgICBpZiAodjkwMiA8PSAxKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHYxNjIoIk1lbGVlIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxNjIoIlN3b3JkIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxNjIoIkd1biIpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnYxNTY6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkJheSDEkOG6v24gS2h1IFbhu7FjIERyYWdvbiBEb2pvIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg1NjYxLjUzMjIyNjU2MjUsIDEwMTMuMDkwNzU5Mjc3MzQzOCwgLSAzMzQuOTY0OTk2MzM3ODkwNikpOwogICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDU4MTQuNDI3MjQ2MDkzNzUsIDEyMDguMzI2NzgyMjI2NTYyNSwgODg0LjU3ODU1MjI0NjA5MzgpKTsKICAgIGVuZAp9KTsKdjE1NjpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQ2jhur8gVOG6oW8gVm9sY2FuaWMgTWFnbmV0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB2Mzk1ID0gewogICAgICAgICAgICBbMV0gPSAiQ3JhZnRJdGVtIiwKICAgICAgICAgICAgWzJdID0gIkNyYWZ0IiwKICAgICAgICAgICAgWzNdID0gIlZvbGNhbmljIE1hZ25ldCIKICAgICAgICB9OwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHYzOTUpKTsKICAgIGVuZAp9KTsKbG9jYWwgdjE2NCA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVDb2xsZWN0RmlyZUZsb3dlcnMiLCB7CiAgICBUaXRsZSA9ICJM4bulbSBIb2EgxJDhu48iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE2NDpPbkNoYW5nZWQoZnVuY3Rpb24odjM5NikKICAgIF9HLkF1dG9Db2xsZWN0RmlyZUZsb3dlcnMgPSB2Mzk2OwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvQ29sbGVjdEZpcmVGbG93ZXJzIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjc0NyA9IHdvcmtzcGFjZTpGaW5kRmlyc3RDaGlsZCgiRmlyZUZsb3dlcnMiKTsKICAgICAgICAgICAgaWYgdjc0NyB0aGVuCiAgICAgICAgICAgICAgICBmb3IgdjkwMywgdjkwNCBpbiBwYWlycyh2NzQ3OkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHY5MDQ6SXNBKCJNb2RlbCIpIGFuZCB2OTA0LlByaW1hcnlQYXJ0KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzY3ID0gdjkwNC5QcmltYXJ5UGFydC5Qb3NpdGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzNjggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb247CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzY5ID0gKHYxMzY3IC0gdjEzNjgpLk1hZ25pdHVkZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMzY5IDw9IDEpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgIkUiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KHYxMzY3KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNjUgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlV2hpdGVCZWx0IiwgewogICAgVGl0bGUgPSAiQ8OgeSDEkGFpIFRy4bqvbmciLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE2NTpPbkNoYW5nZWQoZnVuY3Rpb24odjM5NykKICAgIF9HLkF1dG9MZXZlbCA9IHYzOTc7CiAgICBpZiB2Mzk3IHRoZW4KICAgICAgICBsb2NhbCB2NjU2ID0gewogICAgICAgICAgICBbMV0gPSB7CiAgICAgICAgICAgICAgICBOUEMgPSAiRG9qbyBUcmFpbmVyIiwKICAgICAgICAgICAgICAgIENvbW1hbmQgPSAiUmVxdWVzdFF1ZXN0IgogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuTW9kdWxlcy5OZXQ6RmluZEZpcnN0Q2hpbGQoIlJGL0ludGVyYWN0RHJhZ29uUXVlc3QiKTpJbnZva2VTZXJ2ZXIodW5wYWNrKHY2NTYpKTsKICAgICAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgIHdoaWxlIF9HLkF1dG9MZXZlbCBkbwogICAgICAgICAgICAgICAgbG9jYWwgdjgxNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIE5QQyA9ICJEb2pvIFRyYWluZXIiLAogICAgICAgICAgICAgICAgICAgICAgICBDb21tYW5kID0gIkNsYWltUXVlc3QiCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Nb2R1bGVzLk5ldDpGaW5kRmlyc3RDaGlsZCgiUkYvSW50ZXJhY3REcmFnb25RdWVzdCIpOkludm9rZVNlcnZlcih1bnBhY2sodjgxNykpOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHYxNjYgPSB2MTYuU2VhOkFkZFBhcmFncmFwaCh7CiAgICBUaXRsZSA9ICJIb8OgbiBUaMOgbmgg4bqiaSBEcmFjbyBWNCAoU+G7m20gUmEpIiwKICAgIENvbnRlbnQgPSAiIgp9KTsKbG9jYWwgdjE2NyA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVUcmlhbFRlbGVwb3J0IiwgewogICAgVGl0bGUgPSAiQmF5IMSQ4bq/biBD4butYSBUcmlhbCBU4buZYyBEcmFjbyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTY3Ok9uQ2hhbmdlZChmdW5jdGlvbih2Mzk4KQogICAgX0cuQXV0b1RyaWFsVGVsZXBvcnQgPSB2Mzk4OwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvVHJpYWxUZWxlcG9ydCB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3NDggPSB3b3Jrc3BhY2UuTWFwLlByZWhpc3RvcmljSXNsYW5kOkZpbmRGaXJzdENoaWxkKCJUcmlhbFRlbGVwb3J0Iik7CiAgICAgICAgICAgIGlmICh2NzQ4IGFuZCB2NzQ4OklzQSgiUGFydCIpKSB0aGVuCiAgICAgICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyh2NzQ4LlBvc2l0aW9uKSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNjggPSB2MTYuU2VhOkFkZFNlY3Rpb24oIsSQ4bqjbyBEdW5nIE5oYW0iKTsKbG9jYWwgdjE2OSA9IHYxNi5TZWE6QWRkUGFyYWdyYXBoKHsKICAgIFRpdGxlID0gIlRy4bqhbmcgVGjDoWkgxJDhuqNvIER1bmcgTmhhbSIsCiAgICBDb250ZW50ID0gIiIKfSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgZ2dhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJQcmVoaXN0b3JpY0lzbGFuZCIpIHRoZW4KICAgICAgICAgICAgICAgIHYxNjk6U2V0RGVzYygixJDhuqNvIER1bmcgTmhhbTog4pyF77iPIik7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHYxNjk6U2V0RGVzYygixJDhuqNvIER1bmcgTmhhbTog4p2M77iPIik7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKbG9jYWwgdjE3MCA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVUUFZvbGNhbm8iLCB7CiAgICBUaXRsZSA9ICJCYXkgxJDhur9uIMSQ4bqjbyBEdW5nIE5oYW0iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE3MDpPbkNoYW5nZWQoZnVuY3Rpb24odjM5OSkKICAgIF9HLlR3ZWVuVG9QcmVoaXN0b3JpYyA9IHYzOTk7CmVuZCk7CnYxNy5Ub2dnbGVUUFZvbGNhbm86U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBsb2NhbCB2NDAwOwogICAgd2hpbGUgbm90IHY0MDAgZG8KICAgICAgICB2NDAwID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIlByZWhpc3RvcmljSXNsYW5kIik7CiAgICAgICAgd2FpdCgpOwogICAgZW5kCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5Ud2VlblRvUHJlaGlzdG9yaWMgdGhlbgogICAgICAgICAgICBsb2NhbCB2NzQ5ID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIlByZWhpc3RvcmljSXNsYW5kIik7CiAgICAgICAgICAgIGlmIHY3NDkgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjg3OSA9IHY3NDk6RmluZEZpcnN0Q2hpbGQoIkNvcmUiKSBhbmQgdjc0OS5Db3JlOkZpbmRGaXJzdENoaWxkKCJQcmVoaXN0b3JpY1JlbGljIikgOwogICAgICAgICAgICAgICAgbG9jYWwgdjg4MCA9IHY4NzkgYW5kIHY4Nzk6RmluZEZpcnN0Q2hpbGQoIlNrdWxsIikgOwogICAgICAgICAgICAgICAgaWYgdjg4MCB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcodjg4MC5Qb3NpdGlvbikpOwogICAgICAgICAgICAgICAgICAgIF9HLlR3ZWVuVG9QcmVoaXN0b3JpYyA9IGZhbHNlOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNzEgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlRGVmZW5kVm9sY2FubyIsIHsKICAgIFRpdGxlID0gIlBow7JuZyBUaOG7pyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTcxOk9uQ2hhbmdlZChmdW5jdGlvbih2NDAxKQogICAgX0cuQXV0b0RlZmVuZFZvbGNhbm8gPSB2NDAxOwplbmQpOwpsb2NhbCB2MTA3ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZU1lbGVlIiwgewogICAgVGl0bGUgPSAiRMO5bmcgTWVsZWUiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEwNzpPbkNoYW5nZWQoZnVuY3Rpb24odjQwMikKICAgIF9HLlVzZU1lbGVlID0gdjQwMjsKZW5kKTsKbG9jYWwgdjEwOSA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVTd29yZCIsIHsKICAgIFRpdGxlID0gIkTDuW5nIFN3b3JkIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMDk6T25DaGFuZ2VkKGZ1bmN0aW9uKHY0MDMpCiAgICBfRy5Vc2VTd29yZCA9IHY0MDM7CmVuZCk7CmxvY2FsIHYxMTAgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlR3VuIiwgewogICAgVGl0bGUgPSAiRMO5bmcgR3VuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMTA6T25DaGFuZ2VkKGZ1bmN0aW9uKHY0MDQpCiAgICBfRy5Vc2VHdW4gPSB2NDA0OwplbmQpOwpsb2NhbCBmdW5jdGlvbiB2MTcyKHY0MDUpCiAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgdjQwNSwgZmFsc2UsIGdhbWUpOwogICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCB2NDA1LCBmYWxzZSwgZ2FtZSk7CmVuZApsb2NhbCBmdW5jdGlvbiB2MTczKCkKICAgIGxvY2FsIHY0MDYgPSBnYW1lLldvcmtzcGFjZS5NYXAuUHJlaGlzdG9yaWNJc2xhbmQuQ29yZTpGaW5kRmlyc3RDaGlsZCgiSW50ZXJpb3JMYXZhIik7CiAgICBpZiAodjQwNiBhbmQgdjQwNjpJc0EoIk1vZGVsIikpIHRoZW4KICAgICAgICB2NDA2OkRlc3Ryb3koKTsKICAgIGVuZAogICAgbG9jYWwgdjQwNyA9IGdhbWUuV29ya3NwYWNlLk1hcDpGaW5kRmlyc3RDaGlsZCgiUHJlaGlzdG9yaWNJc2xhbmQiKTsKICAgIGlmIHY0MDcgdGhlbgogICAgICAgIGZvciB2NzUwLCB2NzUxIGluIHBhaXJzKHY0MDc6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgKHY3NTE6SXNBKCJQYXJ0IikgYW5kIHY3NTEuTmFtZTpsb3dlcigpOmZpbmQoImxhdmEiKSkgdGhlbgogICAgICAgICAgICAgICAgdjc1MTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBsb2NhbCB2NDA4ID0gZ2FtZS5Xb3Jrc3BhY2UuTWFwOkZpbmRGaXJzdENoaWxkKCJQcmVoaXN0b3JpY0lzbGFuZCIpOwogICAgaWYgdjQwOCB0aGVuCiAgICAgICAgZm9yIHY3NTIsIHY3NTMgaW4gcGFpcnModjQwODpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiB2NzUzOklzQSgiTW9kZWwiKSB0aGVuCiAgICAgICAgICAgICAgICBmb3IgdjkwNSwgdjkwNiBpbiBwYWlycyh2NzUzOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHY5MDY6SXNBKCJNZXNoUGFydCIpIGFuZCB2OTA2Lk5hbWU6bG93ZXIoKTpmaW5kKCJsYXZhIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjkwNjpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCmxvY2FsIGZ1bmN0aW9uIHYxNzQoKQogICAgbG9jYWwgdjQwOSA9IGdhbWUuV29ya3NwYWNlLk1hcC5QcmVoaXN0b3JpY0lzbGFuZC5Db3JlLlZvbGNhbm9Sb2NrczsKICAgIGZvciB2NTY0LCB2NTY1IGluIHBhaXJzKHY0MDk6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2NTY1OklzQSgiTW9kZWwiKSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3NTQgPSB2NTY1OkZpbmRGaXJzdENoaWxkKCJ2b2xjYW5vcm9jayIpOwogICAgICAgICAgICBpZiAodjc1NCBhbmQgdjc1NDpJc0EoIk1lc2hQYXJ0IikpIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4ODEgPSB2NzU0LkNvbG9yOwogICAgICAgICAgICAgICAgaWYgKCh2ODgxID09IENvbG9yMy5mcm9tUkdCKDE4NSwgNTMsIDU2KSkgb3IgKHY4ODEgPT0gQ29sb3IzLmZyb21SR0IoMTg1LCA1MywgNTcpKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIHJldHVybiB2NzU0OwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICByZXR1cm4gbmlsOwplbmQKbG9jYWwgZnVuY3Rpb24gdjE2Mih2NDEwKQogICAgbG9jYWwgdjQxMSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjsKICAgIGxvY2FsIHY0MTIgPSB2NDExLkJhY2twYWNrOwogICAgZm9yIHY1NjYsIHY1NjcgaW4gcGFpcnModjQxMjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmICh2NTY3OklzQSgiVG9vbCIpIGFuZCAodjU2Ny5Ub29sVGlwID09IHY0MTApKSB0aGVuCiAgICAgICAgICAgIHY1NjcuUGFyZW50ID0gdjQxMS5DaGFyYWN0ZXI7CiAgICAgICAgICAgIGZvciB2ODE4LCB2ODE5IGluIGlwYWlycyh7CiAgICAgICAgICAgICAgICAiWiIsCiAgICAgICAgICAgICAgICAiWCIsCiAgICAgICAgICAgICAgICAiQyIsCiAgICAgICAgICAgICAgICAiViIsCiAgICAgICAgICAgICAgICAiRiIKICAgICAgICAgICAgfSkgZG8KICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB2MTcyKHY4MTkpOwogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHY1NjcuUGFyZW50ID0gdjQxMjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kCnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9EZWZlbmRWb2xjYW5vIHRoZW4KICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgcGNhbGwodjE3Myk7CiAgICAgICAgICAgIGxvY2FsIHY3NTcgPSB2MTc0KCk7CiAgICAgICAgICAgIGlmIHY3NTcgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjg4MiA9IENGcmFtZS5uZXcodjc1Ny5Qb3NpdGlvbiArIFZlY3RvcjMubmV3KDAsIDAsIDApKTsKICAgICAgICAgICAgICAgIFR3ZWVuMih2ODgyKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4ODMgPSB2NzU3LkNvbG9yOwogICAgICAgICAgICAgICAgaWYgKCh2ODgzIH49IENvbG9yMy5mcm9tUkdCKDE4NSwgNTMsIDU2KSkgYW5kICh2ODgzIH49IENvbG9yMy5mcm9tUkdCKDE4NSwgNTMsIDU3KSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NzU3ID0gdjE3NCgpOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTI1ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTI2ID0gKCh2MTEyNSAtIHY3NTcuUG9zaXRpb24pIC0gVmVjdG9yMy5uZXcoMCwgMCwgMCkpLk1hZ25pdHVkZTsKICAgICAgICAgICAgICAgICAgICBpZiAodjExMjYgPD0gMSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBfRy5Vc2VNZWxlZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTYyKCJNZWxlZSIpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgX0cuVXNlU3dvcmQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2MigiU3dvcmQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9HLlVzZUd1biB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTYyKCJHdW4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgX0cuVHdlZW5Ub1ByZWhpc3RvcmljID0gZmFsc2U7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgX0cuVHdlZW5Ub1ByZWhpc3RvcmljID0gdHJ1ZTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjE3NSA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVLaWxsQXVyYSIsIHsKICAgIFRpdGxlID0gIsSQ4bqlbSBHb2xlbXMgQXVyYSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTc1Ok9uQ2hhbmdlZChmdW5jdGlvbih2NDEzKQogICAgS2lsbEF1cmEgPSB2NDEzOwplbmQpOwp2MTcuVG9nZ2xlS2lsbEF1cmE6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBLaWxsQXVyYSB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGZvciB2ODg0LCB2ODg1IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiAodjg4NTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjg4NTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjg4NS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIsICJTaW11bGF0aW9uUmFkaXVzIiwgbWF0aC5odWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4ODUuSHVtYW5vaWQuSGVhbHRoID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4ODUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBLaWxsQXVyYSBvciBub3Qgdjg4NS5QYXJlbnQgb3IgKHY4ODUuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTc2ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZUNvbGxlY3RCb25lIiwgewogICAgVGl0bGUgPSAiTOG7pW0gWMawxqFuZyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTc2Ok9uQ2hhbmdlZChmdW5jdGlvbih2NDE0KQogICAgX0cuQXV0b0NvbGxlY3RCb25lID0gdjQxNDsKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b0NvbGxlY3RCb25lIHRoZW4KICAgICAgICAgICAgZm9yIHY4MjAsIHY4MjEgaW4gcGFpcnMod29ya3NwYWNlOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICBpZiAodjgyMTpJc0EoIkJhc2VQYXJ0IikgYW5kICh2ODIxLk5hbWUgPT0gIkRpbm9Cb25lIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyh2ODIxLlBvc2l0aW9uKSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjE3NyA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVDb2xsZWN0RWdnIiwgewogICAgVGl0bGUgPSAiTOG7pW0gVHLhu6luZyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTc3Ok9uQ2hhbmdlZChmdW5jdGlvbih2NDE1KQogICAgX0cuQXV0b0NvbGxlY3RFZ2cgPSB2NDE1OwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvQ29sbGVjdEVnZyB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3NTggPSB3b3Jrc3BhY2UuTWFwLlByZWhpc3RvcmljSXNsYW5kLkNvcmUuU3Bhd25lZERyYWdvbkVnZ3M6R2V0Q2hpbGRyZW4oKTsKICAgICAgICAgICAgaWYgKCMgdjc1OCA+IDApIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4ODYgPSB2NzU4W21hdGgucmFuZG9tKDEsICMgdjc1OCldOwogICAgICAgICAgICAgICAgaWYgKHY4ODY6SXNBKCJNb2RlbCIpIGFuZCB2ODg2LlByaW1hcnlQYXJ0KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4yKHY4ODYuUHJpbWFyeVBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTEyNyA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbjsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTEyOCA9IHY4ODYuUHJpbWFyeVBhcnQuUG9zaXRpb247CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExMjkgPSAodjExMjcgLSB2MTEyOCkuTWFnbml0dWRlOwogICAgICAgICAgICAgICAgICAgIGlmICh2MTEyOSA8PSAxKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJFIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnYxNDpOb3RpZnkoewogICAgVGl0bGUgPSAiUHUgSW9zIER6IiwKICAgIENvbnRlbnQgPSAiVOG6o2kgWG9uZyIsCiAgICBEdXJhdGlvbiA9IDEwCn0pOwoKCmxvY2FsIFBsYXllcnMgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQpsb2NhbCBTdGFydGVyR3VpID0gZ2FtZTpHZXRTZXJ2aWNlKCJTdGFydGVyR3VpIikKbG9jYWwgcGxheWVyID0gUGxheWVycy5Mb2NhbFBsYXllcgoKLS0gSMOgbSBoaeG7g24gdGjhu4sgcG9wdXAKbG9jYWwgZnVuY3Rpb24gc2hvd1BvcHVwKCkKICAgIGxvY2FsIHNjcmVlbkd1aSA9IEluc3RhbmNlLm5ldygiU2NyZWVuR3VpIikKICAgIHNjcmVlbkd1aS5QYXJlbnQgPSBwbGF5ZXI6V2FpdEZvckNoaWxkKCJQbGF5ZXJHdWkiKQoKICAgIGxvY2FsIGZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICBmcmFtZS5TaXplID0gVURpbTIubmV3KDAsIDMwMCwgMCwgMTUwKQogICAgZnJhbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAtMTUwLCAwLjUsIC03NSkKICAgIGZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0MCwgNDAsIDQwKQogICAgZnJhbWUuUGFyZW50ID0gc2NyZWVuR3VpCgogICAgbG9jYWwgdGV4dExhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgdGV4dExhYmVsLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMC41LCAwKQogICAgdGV4dExhYmVsLlRleHQgPSAiUHUgSU9TIER6IPCfjY9cbk5o4bubIExpa2UgQW5kIFN1YnNjcmliZSIKICAgIHRleHRMYWJlbC5UZXh0U2l6ZSA9IDE4CiAgICB0ZXh0TGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICB0ZXh0TGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIHRleHRMYWJlbC5QYXJlbnQgPSBmcmFtZQoKICAgIGxvY2FsIGJ1dHRvbllUID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgIGJ1dHRvbllULlNpemUgPSBVRGltMi5uZXcoMC41LCAtNSwgMC4zLCAwKQogICAgYnV0dG9uWVQuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMC43LCAwKQogICAgYnV0dG9uWVQuVGV4dCA9ICJLw6puaCBZVEIiCiAgICBidXR0b25ZVC5UZXh0U2l6ZSA9IDE2CiAgICBidXR0b25ZVC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMTUwLCAyNTUpCiAgICBidXR0b25ZVC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgIGJ1dHRvbllULlBhcmVudCA9IGZyYW1lCgogICAgbG9jYWwgYnV0dG9uQ2xvc2UgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgYnV0dG9uQ2xvc2UuU2l6ZSA9IFVEaW0yLm5ldygwLjUsIC01LCAwLjMsIDApCiAgICBidXR0b25DbG9zZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDUsIDAuNywgMCkKICAgIGJ1dHRvbkNsb3NlLlRleHQgPSAiWG9uZyIKICAgIGJ1dHRvbkNsb3NlLlRleHRTaXplID0gMTYKICAgIGJ1dHRvbkNsb3NlLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMDAsIDAsIDApCiAgICBidXR0b25DbG9zZS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgIGJ1dHRvbkNsb3NlLlBhcmVudCA9IGZyYW1lCgogICAgLS0gS2hpIG5o4bqlbiBuw7p0ICJLw6puaCBZVEIiLCBzYW8gY2jDqXAgbGluayB2w6BvIGNsaXBib2FyZAogICAgYnV0dG9uWVQuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgc2V0Y2xpcGJvYXJkKCJodHRwczovL3d3dy55b3V0dWJlLmNvbS9AUHVJb3NEenNvMXZuIikKICAgICAgICBTdGFydGVyR3VpOlNldENvcmUoIlNlbmROb3RpZmljYXRpb24iLCB7CiAgICAgICAgICAgIFRpdGxlID0gIsSQw6Mgc2FvIGNow6lwIGxpbmshIjsKICAgICAgICAgICAgVGV4dCA9ICJIw6N5IGTDoW4gdsOgbyB0csOsbmggZHV54buHdCBob+G6t2MgR29vZ2xlLiI7CiAgICAgICAgICAgIER1cmF0aW9uID0gMzsKICAgICAgICB9KQogICAgZW5kKQoKICAgIC0tIEtoaSBuaOG6pW4gIlhvbmciLCDEkcOzbmcgcG9wdXAKICAgIGJ1dHRvbkNsb3NlLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIHNjcmVlbkd1aTpEZXN0cm95KCkKICAgIGVuZCkKZW5kCgotLSBH4buNaSBow6BtIGhp4buDbiB0aOG7iyBwb3B1cCBraGkgc2NyaXB0IGNo4bqheQpzaG93UG9wdXAoKQo="))()
